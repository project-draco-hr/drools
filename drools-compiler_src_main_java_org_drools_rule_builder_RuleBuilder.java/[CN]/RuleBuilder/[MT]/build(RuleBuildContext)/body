{
  RuleDescr ruleDescr=context.getRuleDescr();
  if (null != ruleDescr.getParentName() && null != context.getPkg().getRule(ruleDescr.getParentName())) {
    context.getRule().setParent(context.getPkg().getRule(ruleDescr.getParentName()));
  }
  context.getRule().getMetaAttributes().putAll(ruleDescr.getMetaAttributes());
  final RuleConditionBuilder builder=(RuleConditionBuilder)context.getDialect().getBuilder(ruleDescr.getLhs().getClass());
  if (builder != null) {
    Pattern prefixPattern=null;
    if (context.getRuleDescr() instanceof QueryDescr) {
      prefixPattern=context.getDialect().getQueryBuilder().build(context,(QueryDescr)context.getRuleDescr());
    }
    final GroupElement ce=(GroupElement)builder.build(context,ruleDescr.getLhs(),prefixPattern);
    context.getRule().setLhs(ce);
  }
 else {
    throw new RuntimeDroolsException("BUG: builder not found for descriptor class " + ruleDescr.getLhs().getClass());
  }
  if (!(ruleDescr instanceof QueryDescr)) {
    context.getDialect().getConsequenceBuilder().build(context);
  }
  String salienceText=context.getRuleDescr().getSalience();
  try {
    if (salienceText != null && !salienceText.equals("")) {
      Salience salience=new SalienceInteger(Integer.parseInt(salienceText));
      context.getRule().setSalience(salience);
    }
  }
 catch (  Exception e) {
    context.getDialect().getSalienceBuilder().build(context);
  }
  String enabledText=context.getRuleDescr().getEnabled();
  if ("true".equalsIgnoreCase(enabledText.trim()) || "false".equalsIgnoreCase(enabledText.trim())) {
    if (Boolean.parseBoolean(enabledText)) {
      context.getRule().setEnabled(EnabledBoolean.ENABLED_TRUE);
    }
 else {
      context.getRule().setEnabled(EnabledBoolean.ENABLED_FALSE);
    }
  }
 else {
    context.getDialect().getEnabledBuilder().build(context);
  }
}
