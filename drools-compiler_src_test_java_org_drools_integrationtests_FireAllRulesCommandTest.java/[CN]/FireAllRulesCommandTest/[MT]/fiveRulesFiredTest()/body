{
  String str="";
  str+="package org.kie \n";
  str+="rule StringRule \n";
  str+=" when \n";
  str+=" $c : Cheese() \n";
  str+=" then \n";
  str+=" System.out.println($c); \n";
  str+="end \n";
  StatelessKnowledgeSession ksession=getSession(str);
  List<Command<?>> commands=new ArrayList<Command<?>>();
  commands.add(CommandFactory.newInsert(new Cheese("stilton")));
  commands.add(CommandFactory.newInsert(new Cheese("gruyere")));
  commands.add(CommandFactory.newInsert(new Cheese("cheddar")));
  commands.add(CommandFactory.newInsert(new Cheese("stinky")));
  commands.add(CommandFactory.newInsert(new Cheese("limburger")));
  commands.add(CommandFactory.newFireAllRules("num-rules-fired"));
  ExecutionResults results=ksession.execute(CommandFactory.newBatchExecution(commands));
  int fired=Integer.parseInt(results.getValue("num-rules-fired").toString());
  assertEquals(5,fired);
}
