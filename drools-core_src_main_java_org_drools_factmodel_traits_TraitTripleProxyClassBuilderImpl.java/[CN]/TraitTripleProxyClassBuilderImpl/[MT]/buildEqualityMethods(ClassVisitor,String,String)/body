{
  String proxyType=BuildUtils.getInternalType(proxy);
{
    MethodVisitor mv=cw.visitMethod(ACC_PUBLIC,"equals","(" + Type.getDescriptor(Object.class) + ")Z",null,null);
    mv.visitCode();
    mv.visitVarInsn(ALOAD,0);
    mv.visitVarInsn(ALOAD,1);
    Label l0=new Label();
    mv.visitJumpInsn(IF_ACMPNE,l0);
    mv.visitInsn(ICONST_1);
    mv.visitInsn(IRETURN);
    mv.visitLabel(l0);
    mv.visitVarInsn(ALOAD,1);
    mv.visitTypeInsn(CHECKCAST,Type.getInternalName(TraitFactory.proxyBaseClass));
    mv.visitVarInsn(ASTORE,2);
    mv.visitVarInsn(ALOAD,0);
    mv.visitMethodInsn(INVOKEVIRTUAL,proxyType,"getFields","()" + Type.getDescriptor(Map.class));
    mv.visitVarInsn(ALOAD,2);
    mv.visitMethodInsn(INVOKEVIRTUAL,Type.getInternalName(TraitFactory.proxyBaseClass),"getFields","()" + Type.getDescriptor(Map.class));
    mv.visitMethodInsn(INVOKEVIRTUAL,Type.getInternalName(Object.class),"equals","(" + Type.getDescriptor(Object.class) + ")Z");
    Label l1=new Label();
    mv.visitJumpInsn(IFNE,l1);
    mv.visitInsn(ICONST_0);
    mv.visitInsn(IRETURN);
    mv.visitLabel(l1);
    mv.visitVarInsn(ALOAD,0);
    mv.visitMethodInsn(INVOKEVIRTUAL,proxyType,"getObject","()" + Type.getDescriptor(Object.class));
    mv.visitVarInsn(ALOAD,2);
    mv.visitMethodInsn(INVOKEVIRTUAL,Type.getInternalName(TraitFactory.proxyBaseClass),"getObject","()" + Type.getDescriptor(Object.class));
    mv.visitMethodInsn(INVOKEVIRTUAL,Type.getInternalName(Object.class),"equals","(" + Type.getDescriptor(Object.class) + ")Z");
    Label l2=new Label();
    mv.visitJumpInsn(IFNE,l2);
    mv.visitInsn(ICONST_0);
    mv.visitInsn(IRETURN);
    mv.visitLabel(l2);
    mv.visitInsn(ICONST_1);
    mv.visitInsn(IRETURN);
    mv.visitMaxs(2,3);
    mv.visitEnd();
  }
{
    MethodVisitor mv=cw.visitMethod(ACC_PUBLIC,"hashCode","()I",null,null);
    mv.visitCode();
    mv.visitVarInsn(ALOAD,0);
    mv.visitMethodInsn(INVOKESPECIAL,Type.getInternalName(TraitFactory.proxyBaseClass),"hashCode","()I");
    mv.visitVarInsn(ISTORE,1);
    mv.visitIntInsn(BIPUSH,31);
    mv.visitVarInsn(ILOAD,1);
    mv.visitInsn(IMUL);
    mv.visitVarInsn(ALOAD,0);
    mv.visitMethodInsn(INVOKEVIRTUAL,proxyType,"getObject","()" + Type.getDescriptor(Object.class));
    mv.visitMethodInsn(INVOKEVIRTUAL,Type.getInternalName(Object.class),"hashCode","()I");
    mv.visitInsn(IADD);
    mv.visitVarInsn(ISTORE,1);
    mv.visitIntInsn(BIPUSH,31);
    mv.visitVarInsn(ILOAD,1);
    mv.visitInsn(IMUL);
    mv.visitVarInsn(ALOAD,0);
    mv.visitMethodInsn(INVOKEVIRTUAL,proxyType,"getFields","()" + Type.getDescriptor(Map.class));
    mv.visitMethodInsn(INVOKEVIRTUAL,Type.getInternalName(Object.class),"hashCode","()I");
    mv.visitInsn(IADD);
    mv.visitVarInsn(ISTORE,1);
    mv.visitVarInsn(ILOAD,1);
    mv.visitInsn(IRETURN);
    mv.visitMaxs(2,2);
    mv.visitEnd();
  }
}
