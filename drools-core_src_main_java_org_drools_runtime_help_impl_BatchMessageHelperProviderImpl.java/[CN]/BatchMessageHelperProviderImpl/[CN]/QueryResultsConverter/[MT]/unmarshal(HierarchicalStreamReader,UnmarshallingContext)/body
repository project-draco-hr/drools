{
  reader.moveDown();
  List<String> list=new ArrayList<String>();
  while (reader.hasMoreChildren()) {
    reader.moveDown();
    list.add(reader.getValue());
    reader.moveUp();
  }
  reader.moveUp();
  Map<String,Integer> identifiers=new HashMap<String,Integer>();
  for (int i=0; i < list.size(); i++) {
    identifiers.put(list.get(i),i);
  }
  List results=new ArrayList();
  while (reader.hasMoreChildren()) {
    reader.moveDown();
    List objects=new ArrayList();
    while (reader.hasMoreChildren()) {
      reader.moveDown();
      Object object=readItem(reader,context,null);
      objects.add(object);
      reader.moveUp();
    }
    results.add(objects);
    reader.moveUp();
  }
  return new FlatQueryResults(identifiers,results);
}
