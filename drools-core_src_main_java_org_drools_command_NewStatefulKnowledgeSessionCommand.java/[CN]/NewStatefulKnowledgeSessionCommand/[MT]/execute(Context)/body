{
  StatefulKnowledgeSession ksession=null;
  if (sessionId != null) {
    KnowledgeContainer kcontainer=((KnowledgeCommandContext)context).getKnowledgeContainer();
    ksession=kcontainer.getStatefulKnowlegeSession(sessionId);
  }
 else {
    KnowledgeBase kbase=((KnowledgeCommandContext)context).getKnowledgeBase();
    ksession=kbase.newStatefulKnowledgeSession(this.ksessionConf,environment);
  }
  return ksession;
}
