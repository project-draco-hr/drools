{
  RuleBaseImpl ruleBase=new RuleBaseImpl();
  WorkingMemoryImpl workingMemory=new WorkingMemoryImpl(ruleBase);
  Rete rete=ruleBase.getRete();
  ObjectTypeNode objectTypeNode=new ObjectTypeNode(1,new ClassObjectType(List.class),rete);
  objectTypeNode.attach();
  objectTypeNode.addObjectSink(new MockObjectSink());
  FactHandleImpl h1=new FactHandleImpl(1);
  String string="String";
  h1.setObject(string);
  rete.assertObject(h1,null,workingMemory);
  MockObjectSink sink1=(MockObjectSink)objectTypeNode.getObjectSinks().get(0);
  assertLength(0,sink1.getRetracted());
  FactHandleImpl h2=new FactHandleImpl(1);
  List list=new ArrayList();
  h2.setObject(list);
  rete.retractObject(h2,null,workingMemory);
  List retracted=sink1.getRetracted();
  assertLength(1,retracted);
  Object[] results=(Object[])retracted.get(0);
  assertSame(list,((FactHandleImpl)results[0]).getObject());
}
