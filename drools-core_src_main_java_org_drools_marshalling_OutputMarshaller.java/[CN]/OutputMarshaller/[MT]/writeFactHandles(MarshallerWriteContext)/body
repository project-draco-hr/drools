{
  ObjectOutputStream stream=context.stream;
  InternalWorkingMemory wm=context.wm;
  PlaceholderResolverStrategyFactory resolverStrategyFactory=context.resolverStrategyFactory;
  writeInitialFactHandleRightTuples(context);
  stream.writeInt(wm.getObjectStore().size());
  for (  InternalFactHandle handle : orderFacts(wm.getObjectStore())) {
    writeFactHandle(context,stream,resolverStrategyFactory,handle);
    writeRightTuples(handle,context);
  }
  writeInitialFactHandleLeftTuples(context);
  writeLeftTuples(context);
  writePropagationContexts(context);
  writeActivations(context);
}
