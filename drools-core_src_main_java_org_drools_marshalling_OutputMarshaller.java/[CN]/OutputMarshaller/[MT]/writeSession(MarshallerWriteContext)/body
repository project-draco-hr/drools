{
  ReteooWorkingMemory wm=(ReteooWorkingMemory)context.wm;
  context.writeInt(wm.getFactHandleFactory().getId());
  context.writeLong(wm.getFactHandleFactory().getRecency());
  System.out.println("FactHandleFactory int:" + wm.getFactHandleFactory().getId() + " long:"+ wm.getFactHandleFactory().getRecency());
  InternalFactHandle handle=context.wm.getInitialFactHandle();
  context.writeInt(handle.getId());
  context.writeLong(handle.getRecency());
  context.out.println("InitialFact int:" + handle.getId() + " long:"+ handle.getRecency());
  context.writeLong(wm.getPropagationIdCounter());
  System.out.println("PropagationCounter long:" + wm.getPropagationIdCounter());
  writeAgenda(context);
  writeFactHandles(context);
  writeActionQueue(context);
  if (wm.getTruthMaintenanceSystem() != null) {
    context.writeBoolean(true);
    writeTruthMaintenanceSystem(context);
  }
 else {
    context.writeBoolean(false);
  }
}
