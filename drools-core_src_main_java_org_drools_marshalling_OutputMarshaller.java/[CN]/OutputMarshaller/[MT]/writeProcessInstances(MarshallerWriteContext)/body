{
  ObjectOutputStream stream=context.stream;
  List<ProcessInstance> processInstances=new ArrayList<ProcessInstance>(context.wm.getProcessInstances());
  Collections.sort(processInstances,new Comparator<ProcessInstance>(){
    public int compare(    ProcessInstance o1,    ProcessInstance o2){
      return (int)(o1.getId() - o2.getId());
    }
  }
);
  for (  ProcessInstance processInstance : processInstances) {
    stream.writeShort(PersisterEnums.PROCESS_INSTANCE);
    writeProcessInstance(context,(RuleFlowProcessInstance)processInstance);
  }
  stream.writeShort(PersisterEnums.END);
}
