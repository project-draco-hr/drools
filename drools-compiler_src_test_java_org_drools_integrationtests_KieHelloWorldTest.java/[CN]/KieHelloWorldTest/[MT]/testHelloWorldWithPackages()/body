{
  String drl1="package org.drools\n" + "rule R1 when\n" + "   $m : Message( message == \"Hello World\" )\n"+ "then\n"+ "end\n";
  String drl2="package org.drools\n" + "rule R2 when\n" + "   $m : Message( message == \"Hello World\" )\n"+ "then\n"+ "end\n";
  KieServices ks=KieServices.Factory.get();
  KieFactory kf=KieFactory.Factory.get();
  GAV gav=kf.newGav("org.kie","hello-world","1.0-SNAPSHOT");
  KieFileSystem kfs=kf.newKieFileSystem().generateAndWritePomXML(gav).write("src/main/resoureces/org/pkg1/r1.drl",drl1).write("src/main/resoureces/org/pkg2/r2.drl",drl2).writeProjectXML(createKieProjectWithPackages(kf).toXML());
  ks.newKieBuilder(kfs).build();
  KieSession ksession=ks.getKieContainer(gav).getKieSession("KSession1");
  ksession.insert(new Message("Hello World"));
  int count=ksession.fireAllRules();
  assertEquals(1,count);
}
