{
  StatelessSession session=getStatelessSession(this.getClass().getResourceAsStream("Patterns.drl"));
  session.setAgendaFilter(new RuleNameMatchesAgendaFilter("Find redundant Patterns with restrictions"));
  VerifierReport result=VerifierReportFactory.newVerifierReport();
  Collection<? extends Object> data=getTestData(this.getClass().getResourceAsStream("PatternRedundancyTest.drl"),result.getVerifierData());
  session.setGlobal("result",result);
  StatelessSessionResult sessionResult=session.executeWithResults(data);
  Map<String,Set<String>> map=createRedundancyMap(sessionResult.iterateObjects());
  assertTrue(TestBase.mapContains(map,"Pattern redundancy with restrictions 1a","Pattern redundancy with restrictions 1b") ^ TestBase.mapContains(map,"Pattern redundancy with restrictions 1b","Pattern redundancy with restrictions 1a"));
  assertTrue(TestBase.mapContains(map,"Pattern redundancy with restrictions 2a","Pattern redundancy with restrictions 2b") ^ TestBase.mapContains(map,"Pattern redundancy with restrictions 2b","Pattern redundancy with restrictions 2a"));
  assertTrue(TestBase.mapContains(map,"Pattern redundancy with restrictions 3a","Pattern redundancy with restrictions 3b") ^ TestBase.mapContains(map,"Pattern redundancy with restrictions 3b","Pattern redundancy with restrictions 3a"));
  assertTrue(TestBase.mapContains(map,"Pattern redundancy with restrictions 4a","Pattern redundancy with restrictions 4b") ^ TestBase.mapContains(map,"Pattern redundancy with restrictions 4b","Pattern redundancy with restrictions 4a"));
  if (!map.isEmpty()) {
    fail("More redundancies than was expected.");
  }
}
