{
  try {
    final DummyValueObject obj3=new DummyValueObject(false,"string2",20,"object2");
    final DefaultFactHandle f3=(DefaultFactHandle)this.factory.newFactHandle(obj3);
    final ReteTuple tuple3=new ReteTuple(f3);
    this.memory.add(this.workingMemory,this.tuple0);
    this.memory.add(this.workingMemory,this.tuple1);
    this.memory.add(this.workingMemory,this.tuple2);
    this.memory.add(this.workingMemory,tuple3);
    Assert.assertEquals("Memory should have size 4",4,this.memory.size());
    final Iterator i=this.memory.iterator();
    Assert.assertTrue("There should be a next tuple",i.hasNext());
    Tuple tuple=(Tuple)i.next();
    Assert.assertSame("Wrong returned tuple",this.tuple0,tuple);
    Assert.assertTrue("There should be a next tuple",i.hasNext());
    tuple=(Tuple)i.next();
    Assert.assertSame("Wrong returned tuple",this.tuple1,tuple);
    Assert.assertTrue("There should be a next tuple",i.hasNext());
    tuple=(Tuple)i.next();
    Assert.assertSame("Wrong returned tuple",this.tuple2,tuple);
    Assert.assertTrue("There should be a next tuple",i.hasNext());
    tuple=(Tuple)i.next();
    Assert.assertSame("Wrong returned tuple",tuple3,tuple);
    Assert.assertFalse("There should not be a next tuple",i.hasNext());
  }
 catch (  final UnsupportedOperationException e) {
    Assert.fail("Beta memory was not supposed to throw any exception: " + e.getMessage());
  }
catch (  final ClassCastException e) {
    Assert.fail("BetaRightMemory was not supposed to throw ClassCastException: " + e.getMessage());
  }
}
