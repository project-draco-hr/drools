{
  this.ruleBase.readLock();
  try {
    InternalWorkingMemory wm=wmFactory.createWorkingMemory(this.ruleBase.nextWorkingMemoryCounter(),this.ruleBase,ruleBase.newFactHandleFactory(),null,0,this.sessionConf,EnvironmentFactory.newEnvironment(),this.workingMemoryEventSupport,this.agendaEventSupport,this.ruleEventListenerSupport,null);
    wm.setGlobalResolver(this.globalResolver);
    final InternalFactHandle handle=wm.getFactHandleFactory().newFactHandle(InitialFactImpl.getInstance(),wm.getObjectTypeConfigurationRegistry().getObjectTypeConf(EntryPoint.DEFAULT,InitialFactImpl.getInstance()),wm,wm);
    wm.queueWorkingMemoryAction(new WorkingMemoryReteAssertAction(handle,false,true,null,null));
    return wm;
  }
  finally {
    this.ruleBase.readUnlock();
  }
}
