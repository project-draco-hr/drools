{
  final Activation activation=tuple.getActivation();
  if (!tuple.isReadyForActivation() && !tuple.isActivationNull()) {
    if (activation.isActivated()) {
      activation.remove();
      getAgendaEventSupport().fireActivationCancelled(activation);
    }
    tuple.setActivation(null);
  }
  if (activation != null) {
    this.tms.removeLogicalDependencies(activation,tuple.getContext(),tuple.getLeapsRule().getRule());
    FastMap activations=(FastMap)this.rulesActivationsMap.get(activation.getRule());
    if (activations != null) {
      activations.remove(activation);
    }
  }
}
