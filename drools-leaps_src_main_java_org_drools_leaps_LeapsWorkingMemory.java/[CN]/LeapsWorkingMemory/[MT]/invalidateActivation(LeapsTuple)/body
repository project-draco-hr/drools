{
  final Activation activation=tuple.getActivation();
  if (activation != null) {
    if (activation.isActivated()) {
      activation.remove();
      this.getAgendaEventSupport().fireActivationCancelled(activation);
    }
    this.getTruthMaintenanceSystem().removeLogicalDependencies(activation,tuple.getContext(),tuple.getLeapsRule().getRule());
    tuple.setActivation(null);
    FastMap activations=(FastMap)this.rulesActivationsMap.get(activation.getRule());
    if (activations != null) {
      activations.remove(activation);
    }
  }
}
