{
  final String drl="import java.util.ArrayList;\n" + " import " + MyFact.class.getCanonicalName() + " ;\n"+ "rule RuleCollect \n"+ "  no-loop true\n"+ "when\n"+ "  $target: MyFact(name == \"target\");\n"+ "  $list : ArrayList( size > 0 ) from collect (\n"+ "    $v1: MyFact(name str[startsWith] \"src\", $val: currentValue != null)\n"+ "  );\n"+ "then\n"+ "  int $sum = 0;\n"+ "  for (Object obj : $list) {\n"+ "    MyFact myFact = (MyFact)obj;\n"+ "    $sum = $sum + ((MyFact)obj).getCurrentValue().intValue();\n"+ "    System.out.println(\" sum + \" + myFact.toString() + \" total is \" + $sum);\n"+ "  }\n"+ "  System.out.println(\" Fired!! \" + drools.getRule().getName() + \" total=\" + $sum);\n"+ "  $target.setCurrentValue($sum);\n"+ "  update($target);\n"+ "end\n"+ "\n"+ "rule RuleFollowing \n"+ "when\n"+ "  $target: MyFact(name == \"target\");\n"+ "then\n"+ "  System.out.println(\" Fired!! RuleFollowing target=\" + $target.toString());\n"+ "end\n";
  scenario(drl);
}
