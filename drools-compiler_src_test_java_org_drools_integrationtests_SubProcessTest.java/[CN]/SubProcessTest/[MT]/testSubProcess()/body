{
  try {
    RuleBase ruleBase=readRule(true);
    WorkingMemory workingMemory=ruleBase.newStatefulSession();
    InternalProcessInstance processInstance=(InternalProcessInstance)workingMemory.startProcess("com.sample.ruleflow");
    assertEquals(InternalProcessInstance.STATE_ACTIVE,processInstance.getState());
    assertEquals(2,workingMemory.getProcessInstances().size());
    workingMemory.insert(new Person());
    assertEquals(InternalProcessInstance.STATE_COMPLETED,processInstance.getState());
    assertEquals(0,workingMemory.getProcessInstances().size());
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
