{
  if (this.packages == Collections.EMPTY_MAP) {
    this.packages=new HashMap();
  }
  Package pkg=(Package)this.packages.get(packageDescr.getName());
  if (pkg != null) {
    mergePackage(pkg,packageDescr);
  }
 else {
    pkg=newPackage(packageDescr);
    this.packages.put(pkg.getName(),pkg);
  }
  for (Iterator it=packageDescr.getFunctions().iterator(); it.hasNext(); ) {
    addFunction(packageDescr,(FunctionDescr)it.next());
  }
  for (Iterator it=packageDescr.getRules().iterator(); it.hasNext(); ) {
    addRule(pkg,(RuleDescr)it.next());
  }
}
