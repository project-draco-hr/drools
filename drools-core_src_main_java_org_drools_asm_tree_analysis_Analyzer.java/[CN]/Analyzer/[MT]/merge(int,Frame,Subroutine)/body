{
  if (insn > n - 1) {
    throw new AnalyzerException("Execution can fall off end of the code");
  }
  Frame oldFrame=frames[insn];
  Subroutine oldSubroutine=subroutines[insn];
  boolean changes=false;
  if (oldFrame == null) {
    frames[insn]=newFrame(frame);
    changes=true;
  }
 else {
    changes|=oldFrame.merge(frame,interpreter);
  }
  newControlFlowEdge(frame,oldFrame);
  if (oldSubroutine == null) {
    if (subroutine != null) {
      subroutines[insn]=subroutine.copy();
      changes=true;
    }
  }
 else {
    if (subroutine != null) {
      changes|=oldSubroutine.merge(subroutine,!jsr);
    }
  }
  if (changes && !queued[insn]) {
    queued[insn]=true;
    queue[top++]=insn;
  }
}
