{
  try {
    BusinessRuleProvider provider=new BusinessRuleProviderDefaultImpl();
    Reader knowledge=provider.getKnowledgeReader(resource);
    DrlParser parser=new DrlParser();
    DefaultExpander expander=getDslExpander();
    if (null != expander) {
      knowledge=new StringReader(expander.expand(knowledge));
      if (expander.hasErrors()) {
        getErrors().addAll(expander.getErrors());
      }
    }
    PackageDescr pkg=parser.parse(knowledge);
    if (parser.hasErrors()) {
      getErrors().addAll(parser.getErrors());
    }
 else {
      addPackage(pkg);
    }
  }
 catch (  Exception e) {
    throw new DroolsParserException(e);
  }
}
