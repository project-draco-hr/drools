{
  DialectRegistry registry=new DialectRegistry();
  ClassLoader classLoader=Thread.currentThread().getContextClassLoader();
  for (Iterator it=this.dialects.entrySet().iterator(); it.hasNext(); ) {
    Entry entry=(Entry)it.next();
    String str=(String)entry.getKey();
    String dialectName=str.substring(str.lastIndexOf(".") + 1);
    String dialectClass=(String)entry.getValue();
    try {
      Class cls=classLoader.loadClass(dialectClass);
      Constructor cons=cls.getConstructor(new Class[]{PackageBuilder.class});
      registry.addDialect(dialectName,(Dialect)cons.newInstance(new Object[]{packageBuilder}));
    }
 catch (    Exception e) {
      throw new RuntimeDroolsException("Unable to load dialect '" + dialectClass + ":"+ dialectName+ "'");
    }
  }
  return registry;
}
