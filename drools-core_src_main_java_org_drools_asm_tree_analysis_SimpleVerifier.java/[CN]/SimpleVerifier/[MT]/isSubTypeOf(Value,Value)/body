{
  Type expectedType=((BasicValue)expected).getType();
  Type type=((BasicValue)value).getType();
  if (expectedType == null) {
    return type == null;
  }
switch (expectedType.getSort()) {
case Type.INT:
case Type.FLOAT:
case Type.LONG:
case Type.DOUBLE:
    return type == expectedType;
case Type.ARRAY:
case Type.OBJECT:
  if (expectedType.getDescriptor().equals("Lnull;")) {
    return type.getSort() == Type.OBJECT || type.getSort() == Type.ARRAY;
  }
if (type.getDescriptor().equals("Lnull;")) {
  return true;
}
 else if (type.getSort() == Type.OBJECT || type.getSort() == Type.ARRAY) {
  return isAssignableFrom(expectedType,type);
}
 else {
  return false;
}
default :
throw new RuntimeException("Internal error");
}
}
