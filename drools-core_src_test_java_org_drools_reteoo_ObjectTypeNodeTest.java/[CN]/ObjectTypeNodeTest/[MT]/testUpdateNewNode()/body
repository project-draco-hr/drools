{
  final PropagationContext context=new PropagationContextImpl(0,PropagationContext.ASSERTION,null,null);
  final ReteooWorkingMemory workingMemory=new ReteooWorkingMemory(new ReteooRuleBase());
  final Rete source=new Rete();
  final ObjectTypeNode objectTypeNode=new ObjectTypeNode(1,new ClassObjectType(String.class),source);
  final MockObjectSink sink1=new MockObjectSink();
  objectTypeNode.addObjectSink(sink1);
  final Object string1="cheese";
  final Object string2="bread";
  final DefaultFactHandle handle1=new DefaultFactHandle(1,string1);
  final DefaultFactHandle handle2=new DefaultFactHandle(2,string2);
  objectTypeNode.assertObject(handle1,context,workingMemory);
  objectTypeNode.assertObject(handle2,context,workingMemory);
  assertLength(2,sink1.getAsserted());
  objectTypeNode.attachingNewNode=true;
  final MockObjectSink sink2=new MockObjectSink();
  objectTypeNode.addObjectSink(sink2);
  assertLength(0,sink2.getAsserted());
  objectTypeNode.updateNewNode(workingMemory,null);
  objectTypeNode.attachingNewNode=false;
  assertLength(2,sink1.getAsserted());
  assertLength(2,sink2.getAsserted());
  final Object string3="water";
  final DefaultFactHandle handle3=new DefaultFactHandle(3,string3);
  objectTypeNode.assertObject(handle3,context,workingMemory);
  assertLength(3,sink1.getAsserted());
  assertLength(3,sink2.getAsserted());
}
