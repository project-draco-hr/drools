{
  ReteooRuleBase ruleBase=(ReteooRuleBase)RuleBaseFactory.newRuleBase();
  IdGenerator idGenerator=ruleBase.getReteooBuilder().getIdGenerator();
  final Rete source=new Rete((InternalRuleBase)ruleBase);
  final ObjectType objectType=new ClassObjectType(String.class);
  int id=idGenerator.getNextId();
  final ObjectTypeNode objectTypeNode=new ObjectTypeNode(id,objectType,source,3);
  assertEquals(id,objectTypeNode.getId());
  final Field field=Rete.class.getDeclaredField("objectTypeNodes");
  field.setAccessible(true);
  final ObjectHashMap map=(ObjectHashMap)field.get(source);
  assertEquals(0,map.size());
  objectTypeNode.attach();
  assertEquals(1,map.size());
  assertSame(objectTypeNode,map.get(objectType));
}
