{
  final RuleBase ruleBase=RuleBaseFactory.newRuleBase();
  final Rete source=new Rete((InternalRuleBase)ruleBase);
  final ObjectType objectType=new ClassObjectType(String.class);
  final ObjectTypeNode objectTypeNode=new ObjectTypeNode(1,objectType,source,3);
  assertEquals(1,objectTypeNode.getId());
  final Field field=Rete.class.getDeclaredField("objectTypeNodes");
  field.setAccessible(true);
  final ObjectHashMap map=(ObjectHashMap)field.get(source);
  assertEquals(0,map.size());
  objectTypeNode.attach();
  assertEquals(1,map.size());
  assertSame(objectTypeNode,map.get(objectType));
}
