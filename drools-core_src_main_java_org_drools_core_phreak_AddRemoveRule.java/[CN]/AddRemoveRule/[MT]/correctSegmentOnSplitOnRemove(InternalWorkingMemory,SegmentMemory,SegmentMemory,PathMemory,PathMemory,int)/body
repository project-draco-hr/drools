{
  if (p == 0) {
    mergeSegment(sm1,sm2);
    pmem.setSegmentMemory(sm1.getPos(),sm1);
    sm1.removePathMemory(removedPmem);
    SegmentMemory oldSegment=removedPmem.getSegmentMemories()[sm1.getPos() + 1];
    if (sm1.contains(oldSegment)) {
      sm1.remove(oldSegment);
    }
    sm1.notifyRuleLinkSegment(wm);
  }
 else {
    pmem.setSegmentMemory(sm1.getPos(),sm1);
  }
}
