{
  while (sm != null) {
    setSegmentMemoryOnNewPath(wm,newPmem,sm);
    sm=sm.getPos() > 0 ? pmem.getSegmentMemories()[sm.getPos() - 1] : null;
  }
}
