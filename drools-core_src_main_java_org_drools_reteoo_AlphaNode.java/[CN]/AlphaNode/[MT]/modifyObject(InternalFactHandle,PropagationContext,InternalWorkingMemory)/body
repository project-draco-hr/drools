{
  boolean propagate=true;
  if (this.constraint.isAllowed(handle.getObject(),null,workingMemory)) {
    if (hasMemory()) {
      final FactHashSet memory=(FactHashSet)workingMemory.getNodeMemory(this);
      propagate=memory.add(handle,true);
    }
    if (propagate) {
      this.sink.propagateAssertObject(handle,context,workingMemory);
    }
 else {
      this.sink.propagateModifyObject(handle,context,workingMemory);
    }
  }
 else {
    if (hasMemory) {
      final FactHashSet memory=(FactHashSet)workingMemory.getNodeMemory(this);
      propagate=memory.remove(handle);
    }
    if (propagate) {
      this.sink.propagateRetractObject(handle,context,workingMemory,false);
    }
  }
}
