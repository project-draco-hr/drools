{
  final FactHashSet memory=(FactHashSet)workingMemory.getNodeMemory(this);
  if (this.constraint.isAllowed(handle.getObject(),null,workingMemory)) {
    if (memory.add(handle,true)) {
      this.sink.propagateAssertObject(handle,context,workingMemory);
    }
 else {
      this.sink.propagateModifyObject(handle,context,workingMemory);
    }
  }
 else {
    if (memory.remove(handle)) {
      this.sink.propagateRetractObject(handle,context,workingMemory,false);
    }
  }
}
