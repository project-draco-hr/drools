{
  if (!context.getKnowledgeBase().getConfiguration().isPhreakEnabled() && context.getCleanupAdapter() != null) {
    for (    InternalWorkingMemory workingMemory : workingMemories) {
      CleanupAdapter adapter=context.getCleanupAdapter();
      final ObjectTypeNodeMemory memory=(ObjectTypeNodeMemory)workingMemory.getNodeMemory(this);
      Iterator<InternalFactHandle> it=memory.iterator();
      while (it.hasNext()) {
        InternalFactHandle handle=it.next();
        for (LeftTuple leftTuple=handle.getFirstLeftTuple(); leftTuple != null; leftTuple=leftTuple.getLeftParentNext()) {
          adapter.cleanUp(leftTuple,workingMemory);
        }
      }
    }
    context.setCleanupAdapter(null);
  }
}
