{
  GroupElement cloned=null;
  try {
    cloned=(GroupElement)this.getClass().newInstance();
  }
 catch (  final InstantiationException e) {
    throw new RuntimeException("Could not clone '" + this.getClass().getName() + "'");
  }
catch (  final IllegalAccessException e) {
    throw new RuntimeException("Could not clone '" + this.getClass().getName() + "'");
  }
  cloned.setType(this.getType());
  for (final Iterator it=this.children.iterator(); it.hasNext(); ) {
    Object object=it.next();
    if (object instanceof GroupElement) {
      object=((GroupElement)object).clone();
    }
    cloned.addChild(object);
  }
  return cloned;
}
