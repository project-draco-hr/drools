{
  final Object[] clone=this.children.toArray();
  for (int i=0; i < clone.length; i++) {
    if (clone[i] instanceof GroupElement) {
      final GroupElement childGroup=(GroupElement)clone[i];
      childGroup.pack(this);
    }
  }
  if ((this.isAnd() || this.isOr()) && (this.children.size() == 1)) {
    final Object child=this.getChildren().get(0);
    if (child instanceof GroupElement) {
      final GroupElement group=(GroupElement)child;
      this.type=group.getType();
      this.children.clear();
      this.children.addAll(group.getChildren());
    }
  }
  if (this.isNot() && this.children.size() == 1 && this.getChildren().get(0) instanceof GroupElement) {
    final GroupElement child=(GroupElement)this.getChildren().get(0);
    if (child.isExists()) {
      this.children.clear();
      this.children.addAll(child.getChildren());
    }
  }
  if (this.isExists() && this.children.size() == 1 && this.getChildren().get(0) instanceof GroupElement) {
    final GroupElement child=(GroupElement)this.getChildren().get(0);
    if (child.isNot()) {
      this.setType(NOT);
      this.children.clear();
      this.children.addAll(child.getChildren());
    }
  }
}
