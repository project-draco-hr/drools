{
  Object[] clone=this.children.toArray();
  for (int i=0; i < clone.length; i++) {
    if (clone[i] instanceof GroupElement) {
      GroupElement childGroup=(GroupElement)clone[i];
      childGroup.pack(this);
    }
  }
  if ((this.isAnd() || this.isOr()) && (this.children.size() == 1)) {
    Object child=this.getChildren().get(0);
    if (child instanceof GroupElement) {
      GroupElement group=(GroupElement)child;
      this.type=group.getType();
      this.children.clear();
      this.children.addAll(group.getChildren());
    }
  }
}
