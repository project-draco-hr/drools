{
  veto=veto != null ? (BitSet)veto.clone() : null;
  for (  Thing t : mostSpecificTraits) {
    if (!originators.contains(t)) {
      TraitProxy proxy=(TraitProxy)t;
      proxy.setTypeFilter(veto);
      InternalFactHandle h=(InternalFactHandle)lookupFactHandle(t);
      if (h != null) {
        NamedEntryPoint nep=(NamedEntryPoint)h.getEntryPoint();
        PropagationContext propagationContext=nep.getPctxFactory().createPropagationContext(nep.getInternalWorkingMemory().getNextPropagationIdCounter(),PropagationContext.MODIFICATION,activation.getRule(),activation.getTuple(),h,nep.getEntryPoint(),mask,modifiedClass,null);
        nep.update(h,t,t,nep.getObjectTypeConfigurationRegistry().getObjectTypeConf(nep.getEntryPoint(),t),activation.getRule(),propagationContext);
      }
      proxy.setTypeFilter(null);
      BitSet tc=proxy.getTypeCode();
      if (veto == null) {
        veto=(BitSet)tc.clone();
      }
 else {
        veto.or(tc);
      }
    }
  }
}
