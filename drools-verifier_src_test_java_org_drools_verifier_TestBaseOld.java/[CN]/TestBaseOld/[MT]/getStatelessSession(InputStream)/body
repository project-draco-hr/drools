{
  Reader source=new InputStreamReader(stream);
  PackageBuilder builder=new PackageBuilder();
  builder.addPackageFromDrl(source);
  Package pkg=builder.getPackage();
  if (builder.hasErrors()) {
    for (    KnowledgeBuilderError error : builder.getErrors()) {
      System.out.println(error.getMessage());
    }
    fail("Builder has errors");
  }
  assertTrue("Package was null.",pkg != null);
  RuleBase ruleBase=RuleBaseFactory.newRuleBase();
  ruleBase.addPackage(pkg);
  return ruleBase.newStatelessSession();
}
