{
  final ParserContext parserContext=getParserContext(analysis,outerDeclarations,otherInputVariables,context);
  ExpressionCompiler compiler=new ExpressionCompiler(text.trim());
  if (MVELDebugHandler.isDebugMode()) {
    compiler.setDebugSymbols(true);
  }
synchronized (COMPILER_LOCK) {
    ClassLoader tempClassLoader=Thread.currentThread().getContextClassLoader();
    Thread.currentThread().setContextClassLoader(pkg.getPackageScopeClassLoader());
    AbstractParser.setLanguageLevel(languageLevel);
    Serializable expr=compiler.compile(parserContext);
    Thread.currentThread().setContextClassLoader(tempClassLoader);
    return expr;
  }
}
