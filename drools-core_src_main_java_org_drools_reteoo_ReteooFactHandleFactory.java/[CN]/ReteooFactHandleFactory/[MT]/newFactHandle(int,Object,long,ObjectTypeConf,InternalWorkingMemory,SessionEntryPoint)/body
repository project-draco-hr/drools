{
  if (conf != null && conf.isEvent()) {
    TypeDeclaration type=conf.getTypeDeclaration();
    long timestamp;
    if (type.getTimestampExtractor() != null) {
      if (Date.class.isAssignableFrom(type.getTimestampExtractor().getExtractToClass())) {
        timestamp=((Date)type.getTimestampExtractor().getValue(workingMemory,object)).getTime();
      }
 else {
        timestamp=type.getTimestampExtractor().getLongValue(workingMemory,object);
      }
    }
 else {
      timestamp=workingMemory.getTimerService().getCurrentTime();
    }
    long duration=0;
    if (type.getDurationExtractor() != null) {
      duration=type.getDurationExtractor().getLongValue(workingMemory,object);
    }
    return new EventFactHandle(id,object,recency,timestamp,duration,wmEntryPoint);
  }
 else {
    return new DefaultFactHandle(id,object,recency,wmEntryPoint);
  }
}
