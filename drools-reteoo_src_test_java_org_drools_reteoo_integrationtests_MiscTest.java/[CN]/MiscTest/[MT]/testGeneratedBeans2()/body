{
  KnowledgeBase kbase=loadKnowledgeBase("test_GeneratedBeans2.drl");
  FactType cheeseFact=kbase.getFactType("org.drools.generatedbeans","Cheese");
  Object cheese=cheeseFact.newInstance();
  cheeseFact.set(cheese,"type","stilton");
  assertEquals("stilton",cheeseFact.get(cheese,"type"));
  Object cheese2=cheeseFact.newInstance();
  cheeseFact.set(cheese2,"type","stilton");
  assertEquals(cheese,cheese2);
  FactType personType=kbase.getFactType("org.drools.generatedbeans","Person");
  Object ps=personType.newInstance();
  personType.set(ps,"name","mark");
  personType.set(ps,"last","proctor");
  personType.set(ps,"age",42);
  Object ps2=personType.newInstance();
  personType.set(ps2,"name","mark");
  personType.set(ps2,"last","proctor");
  personType.set(ps2,"age",30);
  assertEquals(ps,ps2);
  personType.set(ps2,"last","little");
  assertFalse(ps.equals(ps2));
  StatefulKnowledgeSession wm=createKnowledgeSession(kbase);
  Object cg=cheeseFact.newInstance();
  wm.setGlobal("cg",cg);
  List result=new ArrayList();
  wm.setGlobal("list",result);
  wm.insert(cheese);
  wm.fireAllRules();
  assertEquals(1,result.size());
  assertEquals(new Integer(5),result.get(0));
  FactType personFact=kbase.getFactType("org.drools.generatedbeans","Person");
  Object person=personFact.newInstance();
  personFact.getField("likes").set(person,cheese);
  personFact.getField("age").set(person,7);
  wm.insert(person);
  wm.fireAllRules();
  assertEquals(2,result.size());
  assertEquals(person,result.get(1));
}
