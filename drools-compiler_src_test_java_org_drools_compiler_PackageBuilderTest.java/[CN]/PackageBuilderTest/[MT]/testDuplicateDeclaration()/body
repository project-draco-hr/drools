{
  final PackageBuilder builder=new PackageBuilder();
  final PackageDescr packageDescr=new PackageDescr("p1");
  final RuleDescr ruleDescr=new RuleDescr("rule-1");
  packageDescr.addRule(ruleDescr);
  final AndDescr lhs=new AndDescr();
  ruleDescr.setLhs(lhs);
  final ColumnDescr column1=new ColumnDescr(Cheese.class.getName());
  lhs.addDescr(column1);
  final FieldBindingDescr fieldBindingDescr=new FieldBindingDescr("type","$type");
  FieldConstraintDescr literalDescr=new FieldConstraintDescr("type");
  literalDescr.addRestriction(new LiteralRestrictionDescr("==","stilton"));
  column1.addDescr(fieldBindingDescr);
  column1.addDescr(literalDescr);
  final ColumnDescr column2=new ColumnDescr(Cheese.class.getName());
  lhs.addDescr(column2);
  column2.addDescr(fieldBindingDescr);
  ruleDescr.setConsequence("modify(stilton);");
  builder.addPackage(packageDescr);
  assertLength(2,builder.getErrors());
}
