{
  final PackageBuilder builder=new PackageBuilder();
  final PackageDescr packageDescr=new PackageDescr("p1");
  final RuleDescr ruleDescr=new RuleDescr("rule-1");
  packageDescr.addRule(ruleDescr);
  final AndDescr lhs=new AndDescr();
  ruleDescr.setLhs(lhs);
  final FactTemplateDescr cheese=new FactTemplateDescr("Cheese");
  cheese.addFieldTemplate(new FieldTemplateDescr("name","String"));
  cheese.addFieldTemplate(new FieldTemplateDescr("price","Integer"));
  packageDescr.addFactTemplate(cheese);
  final PatternDescr pattern=new PatternDescr("Cheese","stilton");
  lhs.addDescr(pattern);
  final FieldConstraintDescr literalDescr=new FieldConstraintDescr("name");
  literalDescr.addRestriction(new LiteralRestrictionDescr("==","stilton"));
  pattern.addDescr(literalDescr);
  ruleDescr.setConsequence("System.out.println( stilton.getFieldValue( \"name\" ) + \" \" + stilton.getFieldValue( \"price\" ) );");
  builder.addPackage(packageDescr);
  final RuleBase ruleBase=RuleBaseFactory.newRuleBase();
  final Package pkg=builder.getPackage();
  try {
    ruleBase.addPackage(pkg);
  }
 catch (  final Exception e) {
    e.printStackTrace();
  }
  final WorkingMemory workingMemory=ruleBase.newStatefulSession();
  final Fact stilton=pkg.getFactTemplate("Cheese").createFact(1);
  stilton.setFieldValue("name","stilton");
  stilton.setFieldValue("price",new Integer(200));
  workingMemory.assertObject(stilton);
  workingMemory.fireAllRules();
}
