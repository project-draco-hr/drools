{
  if (cls.isPrimitive() || cls.isArray())   return null;
  TypeDeclaration typeDeclaration=getCachedTypeDeclaration(cls);
  if (typeDeclaration != null)   return typeDeclaration;
  typeDeclaration=getExistingTypeDeclaration(cls);
  if (typeDeclaration != null) {
    initTypeDeclaration(cls,typeDeclaration);
    return typeDeclaration;
  }
  typeDeclaration=createTypeDeclarationForBean(cls);
  initTypeDeclaration(cls,typeDeclaration);
  PackageRegistry packageRegistry=pkgRegistryMap.get(packageName);
  if (packageRegistry != null) {
    packageRegistry.getPackage().addTypeDeclaration(typeDeclaration);
  }
  return typeDeclaration;
}
