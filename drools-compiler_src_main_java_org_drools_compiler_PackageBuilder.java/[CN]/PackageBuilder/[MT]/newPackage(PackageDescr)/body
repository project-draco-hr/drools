{
  Package pkg;
  if (this.ruleBase != null && this.ruleBase.getPackage(packageDescr.getName()) != null) {
    pkg=this.ruleBase.getPackage(packageDescr.getName());
  }
 else {
    pkg=new Package(packageDescr.getName());
    pkg.setClassFieldAccessorCache(new ClassFieldAccessorCache(this.rootClassLoader));
    if (this.ruleBase != null) {
      this.ruleBase.addPackage(pkg);
      pkg=this.ruleBase.getPackage(packageDescr.getName());
    }
 else {
      pkg.getDialectRuntimeRegistry().onAdd(this.rootClassLoader);
    }
  }
  PackageRegistry pkgRegistry=new PackageRegistry(this,pkg);
  pkgRegistry.addImport(packageDescr.getNamespace() + ".*");
  this.pkgRegistryMap.put(packageDescr.getName(),pkgRegistry);
  mergePackage(packageDescr);
  return pkgRegistry;
}
