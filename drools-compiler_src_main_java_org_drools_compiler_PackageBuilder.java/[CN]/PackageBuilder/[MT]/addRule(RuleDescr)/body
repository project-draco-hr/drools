{
  final String ruleClassName=getUniqueLegalName(this.pkg.getName(),ruleDescr.getName(),"java",this.src);
  ruleDescr.SetClassName(ucFirst(ruleClassName));
  final RuleBuilder builder=new RuleBuilder(getTypeResolver(),classFieldExtractorCache);
  builder.build(this.pkg,ruleDescr);
  this.results.addAll(builder.getErrors());
  final Rule rule=builder.getRule();
  if (builder.getRuleClass() != null) {
    addRuleSemantics(builder,rule,ruleDescr);
  }
  this.pkg.addRule(rule);
}
