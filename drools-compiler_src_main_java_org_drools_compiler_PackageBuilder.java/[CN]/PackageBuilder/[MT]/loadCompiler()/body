{
switch (this.configuration.getCompiler()) {
case PackageBuilderConfiguration.JANINO:
{
      if (!"1.4".equals(this.configuration.getJavaLanguageLevel())) {
        throw new RuntimeDroolsException("Incompatible Java language level with selected compiler");
      }
      this.compiler=JavaCompilerFactory.getInstance().createCompiler("janino");
      break;
    }
case PackageBuilderConfiguration.ECLIPSE:
default :
{
    final EclipseJavaCompilerSettings eclipseSettings=new EclipseJavaCompilerSettings();
    Map map=eclipseSettings.getMap();
    map.put(CompilerOptions.OPTION_TargetPlatform,this.configuration.getJavaLanguageLevel());
    map.put(CompilerOptions.OPTION_Source,"1.5");
    this.compiler=new EclipseJavaCompiler(map);
    break;
  }
}
}
