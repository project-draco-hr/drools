{
switch (configuration.getCompiler()) {
case PackageBuilderConfiguration.JANINO:
{
      if (!"1.4".equals(configuration.getJavaLanguageLevel()))       throw new RuntimeDroolsException("Incompatible Java language level with selected compiler");
      compiler=JavaCompilerFactory.getInstance().createCompiler("janino");
      break;
    }
case PackageBuilderConfiguration.ECLIPSE:
default :
{
    EclipseJavaCompilerSettings eclipseSettings=new EclipseJavaCompilerSettings();
    eclipseSettings.getMap().put("org.eclipse.jdt.core.compiler.codegen.targetPlatform",configuration.getJavaLanguageLevel());
    eclipseSettings.getMap().put("org.eclipse.jdt.core.compiler.source",configuration.getJavaLanguageLevel());
    compiler=new EclipseJavaCompiler(eclipseSettings);
    break;
  }
}
}
