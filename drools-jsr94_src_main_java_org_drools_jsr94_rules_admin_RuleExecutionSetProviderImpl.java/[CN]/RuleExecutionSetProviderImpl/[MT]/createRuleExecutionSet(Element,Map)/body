{
  DocumentBuilderFactory factory=DocumentBuilderFactory.newInstance();
  DocumentBuilder docBuilder;
  try {
    docBuilder=factory.newDocumentBuilder();
    Document doc1=docBuilder.newDocument();
    doc1.appendChild(ruleExecutionSetElement);
    Reader reader=new StringReader(ruleExecutionSetElement.getChildNodes().item(2).getNodeValue());
    DrlParser parser=new DrlParser();
    PackageDescr packageDescr;
    packageDescr=parser.parse(reader);
    PackageBuilder builder=new PackageBuilder();
    builder.addPackage(packageDescr);
    Package pkg=builder.getPackage();
    LocalRuleExecutionSetProviderImpl localRuleExecutionSetProvider=new LocalRuleExecutionSetProviderImpl();
    return localRuleExecutionSetProvider.createRuleExecutionSet(pkg,properties);
  }
 catch (  ParserConfigurationException e) {
    throw new RuleExecutionSetCreateException("could not create RuleExecutionSet: " + e);
  }
catch (  IOException e) {
    throw new RuleExecutionSetCreateException("could not create RuleExecutionSet: " + e);
  }
catch (  DroolsParserException e) {
    throw new RuleExecutionSetCreateException("could not create RuleExecutionSet: " + e);
  }
}
