{
  Environment env=createEnvironment(context);
  KnowledgeBase kbase=initializeKnowledgeBase(simpleRule);
  StatefulKnowledgeSession ksession=JPAKnowledgeService.newStatefulKnowledgeSession(kbase,null,env);
  ksession.addEventListener(new DefaultAgendaEventListener());
  ksession.addEventListener(new DefaultWorkingMemoryEventListener());
  assertEquals(1,ksession.getWorkingMemoryEventListeners().size());
  assertEquals(1,ksession.getAgendaEventListeners().size());
  ksession=JPAKnowledgeService.loadStatefulKnowledgeSession(ksession.getId(),kbase,null,env);
  assertEquals(1,ksession.getWorkingMemoryEventListeners().size());
  assertEquals(1,ksession.getAgendaEventListeners().size());
}
