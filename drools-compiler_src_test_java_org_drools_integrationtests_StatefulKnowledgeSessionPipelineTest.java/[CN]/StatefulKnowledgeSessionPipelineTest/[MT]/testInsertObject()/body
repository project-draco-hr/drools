{
  KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase();
  StatefulKnowledgeSession ksession=kbase.newStatefulKnowledgeSession();
  KnowledgeRuntimeCommand insertStage=PipelineFactory.newStatefulKnowledgeSessionInsert();
  ExecuteResultHandler resultHandlerStage=new ExecuteResultHandler();
  insertStage.setReceiver(resultHandlerStage);
  Pipeline pipeline=PipelineFactory.newStatefulKnowledgeSessionPipeline(ksession);
  pipeline.setReceiver(insertStage);
  assertEquals(0,ksession.getObjects().size());
  ResultHandlerImpl resultHanadle=new ResultHandlerImpl();
  pipeline.insert("Hello",resultHanadle);
  assertEquals(1,resultHanadle.getHandles().size());
}
