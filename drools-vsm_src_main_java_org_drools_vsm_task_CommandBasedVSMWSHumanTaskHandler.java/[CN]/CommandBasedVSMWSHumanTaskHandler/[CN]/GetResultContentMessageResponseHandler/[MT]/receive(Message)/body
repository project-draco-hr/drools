{
  Command cmd=(Command)message.getPayload();
  Content content=(Content)cmd.getArguments().get(0);
  ByteArrayInputStream bis=new ByteArrayInputStream(content.getContent());
  ObjectInputStream in;
  try {
    in=new ObjectInputStream(bis);
    Object result=in.readObject();
    in.close();
    results.put("Result",result);
    if (result instanceof Map) {
      Map<?,?> map=(Map)result;
      for (      Map.Entry<?,?> entry : map.entrySet()) {
        if (entry.getKey() instanceof String) {
          results.put((String)entry.getKey(),entry.getValue());
        }
      }
    }
    manager.completeWorkItem(task.getTaskData().getWorkItemId(),results);
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
catch (  ClassNotFoundException e) {
    e.printStackTrace();
  }
}
