{
  Command command=(Command)message.getPayload();
  Long taskId=(Long)command.getArguments().get(0);
synchronized (managers) {
    managers.put(taskId,this.manager);
  }
synchronized (idMapping) {
    idMapping.put(workItemId,taskId);
  }
  System.out.println("Created task " + taskId + " for work item "+ workItemId);
  EventKey key=new TaskEventKey(TaskCompletedEvent.class,taskId);
  TaskCompletedMessageHandler eventResponseHandler=new TaskCompletedMessageHandler(workItemId,taskId,managers);
  client.registerForEvent(key,true,eventResponseHandler);
  key=new TaskEventKey(TaskFailedEvent.class,taskId);
  client.registerForEvent(key,true,eventResponseHandler);
  key=new TaskEventKey(TaskSkippedEvent.class,taskId);
  client.registerForEvent(key,true,eventResponseHandler);
}
