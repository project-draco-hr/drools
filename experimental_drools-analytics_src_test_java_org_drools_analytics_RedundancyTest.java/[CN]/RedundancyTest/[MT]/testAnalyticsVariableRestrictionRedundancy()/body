{
  StatelessSession session=getStatelessSession(this.getClass().getResourceAsStream("Redundancy.drl"));
  session.setAgendaFilter(new RuleNameMatchesAgendaFilter("Find redundant VariableRestriction"));
  Collection<Object> data=getTestData(this.getClass().getResourceAsStream("SubsumptionVariableRestrictionTest.drl"));
  AnalysisResultNormal analysisResult=new AnalysisResultNormal();
  session.setGlobal("result",analysisResult);
  StatelessSessionResult sessionResult=session.executeWithResults(data);
  Map<String,Set<String>> map=createRedundancyMap(sessionResult.iterateObjects());
  assertTrue(mapContains(map,"Redundant 1a","Redundant 1b"));
  assertTrue(mapContains(map,"Redundant 1b","Redundant 1a"));
  assertTrue(mapContains(map,"Redundant 2a","Redundant 2a"));
  if (!map.isEmpty()) {
    fail("More redundancies than was expected.");
  }
}
