{
  if (compressed) {
    out=new GZIPOutputStream(out);
  }
  try {
    new DroolsObjectOutputStream(out).writeObject(object);
    out.flush();
  }
  finally {
    if (compressed) {
      out.close();
    }
  }
}
