{
  String expanded=expression;
  final List mappings=this.grammar.getMappings();
  expanded=processMappings(expanded,mappings,"*");
  if (scope != null) {
    expanded=processMappings(expanded,mappings,scope);
  }
  if (expanded.equals(expression)) {
    throw new IllegalArgumentException("Expression was not expandable: " + expression);
  }
  return expanded;
}
