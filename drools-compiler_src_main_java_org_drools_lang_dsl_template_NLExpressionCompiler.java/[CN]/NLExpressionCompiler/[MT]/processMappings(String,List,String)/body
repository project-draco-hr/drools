{
  for (final Iterator iter=mappings.iterator(); iter.hasNext(); ) {
    final NLMappingItem mapping=(NLMappingItem)iter.next();
    if (mapping.getScope().equals(scope)) {
      final Template template=(Template)this.templateCache.get(mapping);
      input=template.expandAll(input,mapping.getTargetTemplate());
    }
  }
  return input;
}
