{
  String expanded=expression;
  for (Iterator iter=templateCache.entrySet().iterator(); iter.hasNext(); ) {
    Map.Entry entry=(Map.Entry)iter.next();
    NLMappingItem mapping=(NLMappingItem)entry.getKey();
    Template template=(Template)entry.getValue();
    expanded=template.expandAll(expanded,mapping.getTargetTemplate());
  }
  return expanded;
}
