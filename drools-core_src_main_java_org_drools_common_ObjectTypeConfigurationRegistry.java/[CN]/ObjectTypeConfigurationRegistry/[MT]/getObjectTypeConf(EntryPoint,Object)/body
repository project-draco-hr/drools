{
  Class cls=null;
  if (object instanceof ShadowProxy) {
    cls=((ShadowProxy)object).getShadowedObject().getClass();
  }
 else {
    cls=object.getClass();
  }
  ObjectTypeConf objectTypeConf=this.typeConfMap.get(cls);
  if (objectTypeConf == null) {
    objectTypeConf=this.typeConfMap.get(object);
  }
  if (objectTypeConf == null) {
    if (object instanceof Fact) {
      objectTypeConf=new FactTemplateTypeConf(entrypoint,((Fact)object).getFactTemplate(),this.ruleBase);
      this.typeConfMap.put(object,objectTypeConf);
    }
 else {
      final boolean isEvent=this.ruleBase.isEvent(cls);
      objectTypeConf=new ClassObjectTypeConf(entrypoint,cls,isEvent,this.ruleBase);
      this.typeConfMap.put(cls,objectTypeConf);
    }
  }
  return objectTypeConf;
}
