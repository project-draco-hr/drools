{
  JTMSBeliefSet jtmsBeliefSet=(JTMSBeliefSet)beliefSet;
  boolean wasEmpty=jtmsBeliefSet.isEmpty();
  boolean wasNegated=jtmsBeliefSet.isNegated();
  boolean wasUndecided=jtmsBeliefSet.isUndecided();
  jtmsBeliefSet.add(node.getJustifierEntry());
  if (wasEmpty) {
    if (!jtmsBeliefSet.isUndecided()) {
      insertBelief(node,typeConf,jtmsBeliefSet,context,wasEmpty,wasNegated,wasUndecided);
    }
 else {
      defEP.getObjectStore().removeHandle(jtmsBeliefSet.getFactHandle());
    }
  }
 else   if (!wasUndecided && jtmsBeliefSet.isUndecided()) {
    if (STRICT) {
      throw new IllegalStateException("FATAL : A fact and its negation have been asserted " + jtmsBeliefSet.getFactHandle().getObject());
    }
    InternalFactHandle fh;
    boolean fullyRetract;
    if (wasNegated) {
      fh=jtmsBeliefSet.getNegativeFactHandle();
      jtmsBeliefSet.setNegativeFactHandle(null);
      fullyRetract=true;
      ((NamedEntryPoint)fh.getEntryPoint()).delete(fh,context.getRuleOrigin(),node.getJustifier());
    }
 else {
      fh=jtmsBeliefSet.getPositiveFactHandle();
      jtmsBeliefSet.setPositiveFactHandle(null);
      fullyRetract=false;
      NamedEntryPoint nep=(NamedEntryPoint)fh.getEntryPoint();
      nep.getEntryPointNode().retractObject(fh,context,typeConf,nep.getInternalWorkingMemory());
    }
  }
 else {
    if (wasUndecided && !jtmsBeliefSet.isUndecided()) {
      insertBelief(node,typeConf,jtmsBeliefSet,context,wasEmpty,wasNegated,wasUndecided);
    }
  }
}
