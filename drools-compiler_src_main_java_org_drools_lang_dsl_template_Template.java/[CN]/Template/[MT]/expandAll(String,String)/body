{
  String result=nl;
  int i=0;
  while (i < 10) {
    final String newResult=expandOnce(result,targetTemplate);
    if (newResult.equals(result)) {
      break;
    }
    result=newResult;
    i++;
    if (i == 10) {
      throw new IllegalArgumentException("To many iterations in processing the expression: [" + nl + "] with target template: ["+ targetTemplate+ "]");
    }
  }
  return result;
}
