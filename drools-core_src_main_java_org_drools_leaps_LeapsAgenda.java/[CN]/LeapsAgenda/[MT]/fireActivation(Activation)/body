{
  if (activation.getRule() instanceof Query) {
    this.workingMemory.addToQueryResults(activation.getRule().getName(),activation.getTuple());
  }
 else {
    if (activation.getRule().getActivationGroup() == null || (activation.getRule().getActivationGroup() != null && this.getActivationGroup(activation.getRule().getActivationGroup()).isEmpty())) {
      super.fireActivation(activation);
      ((LeapsTuple)activation.getTuple()).setWasFired(true);
      if (activation.getRule().getActivationGroup() != null) {
        this.getActivationGroup(activation.getRule().getActivationGroup());
      }
    }
  }
}
