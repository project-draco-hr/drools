{
  GuidedDTDRLPersistence p=new GuidedDTDRLPersistence();
  String[] row=new String[]{"1","desc","a","a condition","actionsetfield1","actionsetfield2","retract","actioninsertfact1","actioninsertfact2"};
  List<ActionCol> cols=new ArrayList<ActionCol>();
  ActionSetFieldCol asf1=new ActionSetFieldCol();
  asf1.boundName="a";
  asf1.factField="field1";
  asf1.type=SuggestionCompletionEngine.TYPE_STRING;
  cols.add(asf1);
  ActionSetFieldCol asf2=new ActionSetFieldCol();
  asf2.boundName="a";
  asf2.factField="field2";
  asf2.type=SuggestionCompletionEngine.TYPE_NUMERIC;
  cols.add(asf2);
  ActionRetractFactCol ret=new ActionRetractFactCol();
  ret.boundName="ret";
  cols.add(ret);
  ActionInsertFactCol ins1=new ActionInsertFactCol();
  ins1.boundName="ins";
  ins1.factType="Cheese";
  ins1.factField="price";
  ins1.type=SuggestionCompletionEngine.TYPE_NUMERIC;
  cols.add(ins1);
  ActionInsertFactCol ins2=new ActionInsertFactCol();
  ins2.boundName="ins";
  ins2.factType="Cheese";
  ins2.factField="type";
  ins2.type=SuggestionCompletionEngine.TYPE_NUMERIC;
  cols.add(ins2);
  RuleModel rm=new RuleModel();
  p.doActions(2,cols,row,rm);
  assertEquals(3,rm.rhs.length);
  ActionSetField a1=(ActionSetField)rm.rhs[0];
  assertEquals("a",a1.variable);
  assertEquals(2,a1.fieldValues.length);
  assertEquals("field1",a1.fieldValues[0].field);
  assertEquals("actionsetfield1",a1.fieldValues[0].value);
  assertEquals(SuggestionCompletionEngine.TYPE_STRING,a1.fieldValues[0].type);
  assertEquals("field2",a1.fieldValues[1].field);
  assertEquals("actionsetfield2",a1.fieldValues[1].value);
  assertEquals(SuggestionCompletionEngine.TYPE_NUMERIC,a1.fieldValues[1].type);
  ActionRetractFact a2=(ActionRetractFact)rm.rhs[1];
  assertEquals("ret",a2.variableName);
  ActionInsertFact a3=(ActionInsertFact)rm.rhs[2];
  assertEquals("Cheese",a3.factType);
  assertEquals(2,a3.fieldValues.length);
  assertEquals("price",a3.fieldValues[0].field);
  assertEquals("actioninsertfact1",a3.fieldValues[0].value);
  assertEquals(SuggestionCompletionEngine.TYPE_NUMERIC,a3.fieldValues[0].type);
  assertEquals("type",a3.fieldValues[1].field);
  assertEquals("actioninsertfact2",a3.fieldValues[1].value);
  assertEquals(SuggestionCompletionEngine.TYPE_NUMERIC,a3.fieldValues[1].type);
}
