{
  super(id,context.getPartitionId(),context.getRuleBase().getConfiguration().isMultithreadEvaluation());
  this.rule=rule;
  this.tupleSource=source;
  this.subrule=subrule;
  this.subruleIndex=subruleIndex;
  Map<String,Declaration> decls=this.subrule.getOuterDeclarations();
  this.declarations=new Declaration[rule.getRequiredDeclarations().length];
  int i=0;
  for (  String str : rule.getRequiredDeclarations()) {
    this.declarations[i++]=decls.get(str);
  }
  Arrays.sort(this.declarations,SortDeclarations.instance);
  fireDirect=rule.getActivationListener().equals("direct");
  initPropertySpecifcMask(source,context);
}
