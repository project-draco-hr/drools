{
  super(id,context.getPartitionId(),context.getRuleBase().getConfiguration().isMultithreadEvaluation(),source);
  this.rule=rule;
  this.subrule=subrule;
  this.subruleIndex=subruleIndex;
  Map<String,Declaration> decls=this.subrule.getOuterDeclarations();
  this.declarations=new Declaration[rule.getRequiredDeclarations().length];
  int i=0;
  for (  String str : rule.getRequiredDeclarations()) {
    this.declarations[i++]=decls.get(str);
  }
  Arrays.sort(this.declarations,SortDeclarations.instance);
  setFireDirect(rule.getActivationListener().equals("direct"));
  setDeclarations(decls);
  initDeclaredMask(context);
  initInferredMask();
}
