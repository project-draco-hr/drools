{
  ClassFieldExtractor extractor=new ClassFieldExtractor(Cheese.class,"type");
  FieldIndexMap map=new FieldIndexMap(extractor.getIndex(),extractor);
  assertEquals(0,map.size());
  Cheese stilton1=new Cheese("stilton",35);
  InternalFactHandle stiltonHandle1=new DefaultFactHandle(1,stilton1);
  map.add(stiltonHandle1);
  Cheese cheddar1=new Cheese("cheddar",35);
  InternalFactHandle cheddarHandle1=new DefaultFactHandle(2,cheddar1);
  map.add(cheddarHandle1);
  Cheese stilton2=new Cheese("stilton",81);
  InternalFactHandle stiltonHandle2=new DefaultFactHandle(3,stilton2);
  map.add(stiltonHandle2);
  assertEquals(2,map.size());
  assertEquals(2,tablePopulationSize(map));
  map.remove(cheddarHandle1);
  assertEquals(1,map.size());
  assertEquals(1,tablePopulationSize(map));
  map.remove(stiltonHandle2);
  assertEquals(1,map.size());
  assertEquals(1,tablePopulationSize(map));
  map.remove(stiltonHandle1);
  assertEquals(0,map.size());
  assertEquals(0,tablePopulationSize(map));
}
