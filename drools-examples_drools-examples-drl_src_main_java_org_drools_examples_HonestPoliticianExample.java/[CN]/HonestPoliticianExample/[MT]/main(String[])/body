{
  KnowledgeBuilderConfiguration conf=KnowledgeBuilderFactory.newKnowledgeBuilderConfiguration();
  conf.setProperty("drools.dump.dir","target");
  final KnowledgeBuilder builder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  builder.addResource(new InputStreamReader(HonestPoliticianExample.class.getResourceAsStream("HonestPolitician.drl")),KnowledgeType.DRL);
  final KnowledgeBase knowledgeBase=KnowledgeBaseFactory.newKnowledgeBase();
  knowledgeBase.addKnowledgePackages(builder.getKnowledgePackages());
  final StatefulKnowledgeSession session=knowledgeBase.newStatefulKnowledgeSession();
  final WorkingMemoryFileLogger logger=new WorkingMemoryFileLogger(session);
  logger.setFileName("log/honest-politician");
  final Politician blair=new Politician("blair",true);
  final Politician bush=new Politician("bush",true);
  final Politician chirac=new Politician("chirac",true);
  final Politician schroder=new Politician("schroder",true);
  session.insert(blair);
  session.insert(bush);
  session.insert(chirac);
  session.insert(schroder);
  session.fireAllRules();
  logger.writeToDisk();
  session.dispose();
}
