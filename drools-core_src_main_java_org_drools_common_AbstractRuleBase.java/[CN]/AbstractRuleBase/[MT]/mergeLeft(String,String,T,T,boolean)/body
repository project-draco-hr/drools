{
  T newValue=leftVal;
  if (!nullSafeEquals(leftVal,rightVal)) {
    if (leftVal == null && rightVal != null) {
      newValue=rightVal;
    }
 else     if (leftVal != null && rightVal != null) {
      if (errorOnDiff) {
        throw new RuntimeDroolsException(errorMsg + " '" + typeClass+ "'");
      }
 else {
      }
    }
  }
  return newValue;
}
