{
synchronized (this.pkgs) {
    final Package pkg=(Package)this.pkgs.get(packageName);
    final Rule rule=pkg.getRule(ruleName);
    int lastAquiredLock=0;
    final InternalWorkingMemory[] wms=getWorkingMemories();
    PackageCompilationData compilationData=null;
    try {
      for (lastAquiredLock=0; lastAquiredLock < wms.length; lastAquiredLock++) {
        wms[lastAquiredLock].getLock().lock();
      }
      removeRule(rule);
      compilationData=pkg.removeRule(rule);
      if (this.reloadPackageCompilationData == null) {
        this.reloadPackageCompilationData=new ReloadPackageCompilationData();
      }
      this.reloadPackageCompilationData.addPackageCompilationData(compilationData);
    }
  finally {
      for (lastAquiredLock--; lastAquiredLock > -1; lastAquiredLock--) {
        wms[lastAquiredLock].getLock().unlock();
      }
    }
  }
}
