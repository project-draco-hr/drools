{
  Package pkg=(Package)this.pkgs.get(packageName);
  for (Iterator it=this.workingMemories.keySet().iterator(); it.hasNext(); ) {
    AbstractWorkingMemory workingMemory=(AbstractWorkingMemory)it.next();
    workingMemory.getLock().lock();
  }
  Rule[] rules=pkg.getRules();
  for (int i=0; i < rules.length; ++i) {
    removeRule(rules[i]);
  }
  this.packageClassLoader.removeClassLoader(pkg.getPackageCompilationData().getClassLoader());
  pkg.clear();
  for (Iterator it=this.workingMemories.keySet().iterator(); it.hasNext(); ) {
    AbstractWorkingMemory workingMemory=(AbstractWorkingMemory)it.next();
    workingMemory.getLock().unlock();
  }
}
