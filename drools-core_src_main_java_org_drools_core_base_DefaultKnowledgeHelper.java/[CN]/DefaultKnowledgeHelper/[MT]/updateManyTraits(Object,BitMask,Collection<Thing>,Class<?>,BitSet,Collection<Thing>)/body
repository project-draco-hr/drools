{
  veto=veto != null ? (BitSet)veto.clone() : null;
  for (  Thing t : mostSpecificTraits) {
    if (!originators.contains(t)) {
      TraitProxy proxy=(TraitProxy)t;
      proxy.setTypeFilter(veto);
      InternalFactHandle h=(InternalFactHandle)lookupFactHandle(t);
      if (h != null) {
        ((NamedEntryPoint)h.getEntryPoint()).update(h,t,mask,modifiedClass,this.activation);
      }
      proxy.setTypeFilter(null);
      BitSet tc=proxy.getTypeCode();
      if (veto == null) {
        veto=(BitSet)tc.clone();
      }
 else {
        veto.or(tc);
      }
    }
  }
}
