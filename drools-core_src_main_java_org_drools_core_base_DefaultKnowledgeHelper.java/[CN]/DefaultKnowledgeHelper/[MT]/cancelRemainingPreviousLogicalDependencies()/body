{
  if (this.previousJustified != null) {
    for (LogicalDependency dep=(LogicalDependency)this.previousJustified.getFirst(); dep != null; dep=(LogicalDependency)dep.getNext()) {
      TruthMaintenanceSystemHelper.removeLogicalDependency(dep,activation.getPropagationContext());
    }
  }
  if (this.previousBlocked != null) {
    for (LogicalDependency dep=this.previousBlocked.getFirst(); dep != null; ) {
      LogicalDependency tmp=dep.getNext();
      this.previousBlocked.remove(dep);
      AgendaItem justified=(AgendaItem)dep.getJustified();
      justified.getBlockers().remove(dep.getJustifierEntry());
      if (justified.getBlockers().isEmpty()) {
        RuleInstanceAgendaItem ruleInstanceAgendaItem=justified.getRuleInstanceAgendaItem();
        if (ruleInstanceAgendaItem == null) {
          ((DefaultAgenda)workingMemory.getAgenda()).getStageActivationsGroup().addActivation(justified);
        }
 else {
          if (!ruleInstanceAgendaItem.isActivated()) {
            ((InternalAgenda)workingMemory.getAgenda()).addActivation(ruleInstanceAgendaItem);
          }
          ruleInstanceAgendaItem.getRuleExecutor().getLeftTupleList().add(justified.getTuple());
        }
      }
      dep=tmp;
    }
  }
}
