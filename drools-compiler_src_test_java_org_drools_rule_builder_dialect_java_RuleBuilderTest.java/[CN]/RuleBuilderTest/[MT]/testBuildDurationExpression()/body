{
  final RuleBuildContext context=mockery.mock(RuleBuildContext.class);
  final Rule rule=mockery.mock(Rule.class);
  final RuleDescr ruleDescr=new RuleDescr("my rule");
  ruleDescr.addAttribute(new AttributeDescr("duration","( 1h30m )"));
  mockery.checking(new Expectations(){
{
      allowing(context).getRule();
      will(returnValue(rule));
      allowing(context).getRuleDescr();
      will(returnValue(ruleDescr));
      oneOf(rule).setDuration(TimeUtils.parseTimeString("1h30m"));
    }
  }
);
  RuleBuilder builder=new RuleBuilder();
  builder.buildAttributes(context);
  mockery.assertIsSatisfied();
}
