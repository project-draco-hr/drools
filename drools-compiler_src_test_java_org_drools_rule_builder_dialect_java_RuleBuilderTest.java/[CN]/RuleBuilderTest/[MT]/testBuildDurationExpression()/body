{
  final RuleBuildContext context=mockery.mock(RuleBuildContext.class);
  final Rule rule=mockery.mock(Rule.class);
  final RuleDescr ruleDescr=new RuleDescr("my rule");
  ruleDescr.addAttribute(new AttributeDescr("duration","( 1h30m )"));
  ruleDescr.addAttribute(new AttributeDescr("calendars","[\"cal1\", \"cal2\"]"));
  mockery.checking(new Expectations(){
{
      allowing(context).getRule();
      will(returnValue(rule));
      allowing(context).getRuleDescr();
      will(returnValue(ruleDescr));
      oneOf(rule).setTimer(new IntervalTimer(null,null,TimeUtils.parseTimeString("1h30m"),0));
      oneOf(rule).setCalendars(new String[]{"cal1","cal2"});
    }
  }
);
  RuleBuilder builder=new RuleBuilder();
  builder.buildAttributes(context);
  mockery.assertIsSatisfied();
}
