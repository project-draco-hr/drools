{
  final List constraints=pattern.getConstraints();
  context.setObjectSource((ObjectSource)utils.attachNode(context,new ObjectTypeNode(context.getNextId(),pattern.getObjectType(),context.getRuleBase().getRete(),context.getRuleBase().getConfiguration().getAlphaNodeHashingThreshold())));
  final List betaConstraints=new ArrayList();
  checkRemoveIdentities(context,pattern,betaConstraints);
  for (final Iterator it=constraints.iterator(); it.hasNext(); ) {
    final Object object=it.next();
    if (object instanceof Declaration) {
      continue;
    }
    final Constraint constraint=(Constraint)object;
    final Declaration[] declarations=constraint.getRequiredDeclarations();
    boolean isAlphaConstraint=true;
    for (int i=0; isAlphaConstraint && i < declarations.length; i++) {
      if (declarations[i].getPattern() != pattern) {
        isAlphaConstraint=false;
      }
    }
    if (isAlphaConstraint) {
      context.setObjectSource((ObjectSource)utils.attachNode(context,new AlphaNode(context.getNextId(),(AlphaNodeFieldConstraint)constraint,context.getObjectSource())));
    }
 else {
      utils.checkUnboundDeclarations(context,constraint.getRequiredDeclarations());
      betaConstraints.add(constraint);
    }
  }
  return betaConstraints;
}
