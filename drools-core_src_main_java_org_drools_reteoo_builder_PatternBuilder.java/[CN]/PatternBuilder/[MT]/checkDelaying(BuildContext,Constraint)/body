{
  if (constraint instanceof VariableConstraint) {
    Declaration target=constraint.getRequiredDeclarations()[0];
    if (target.isPatternDeclaration() && target.getPattern().getObjectType().isEvent()) {
      long uplimit=((VariableConstraint)constraint).getInterval().getUpperBound();
      Timer timer=context.getRule().getTimer();
      DurationTimer durationTimer=new DurationTimer(uplimit);
      if (timer instanceof CompositeMaxDurationTimer) {
        ((CompositeMaxDurationTimer)timer).addDurationTimer(durationTimer);
      }
 else {
        if (timer == null) {
          timer=durationTimer;
        }
 else {
          timer=new CompositeMaxDurationTimer();
          if (timer instanceof DurationTimer) {
            ((CompositeMaxDurationTimer)timer).addDurationTimer((DurationTimer)timer);
          }
 else {
            ((CompositeMaxDurationTimer)timer).setTimer(context.getRule().getTimer());
          }
          ((CompositeMaxDurationTimer)timer).addDurationTimer(durationTimer);
        }
        context.getRule().setTimer(timer);
      }
    }
  }
}
