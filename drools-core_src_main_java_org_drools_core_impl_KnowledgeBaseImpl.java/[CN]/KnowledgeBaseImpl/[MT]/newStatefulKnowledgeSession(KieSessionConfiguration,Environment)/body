{
  if (conf == null) {
    conf=SessionConfiguration.getDefaultInstance();
  }
  if (environment == null) {
    environment=EnvironmentFactory.newEnvironment();
  }
  AbstractWorkingMemory session=(AbstractWorkingMemory)this.ruleBase.newStatefulSession((SessionConfiguration)conf,environment);
  return (StatefulKnowledgeSession)session.getKnowledgeRuntime();
}
