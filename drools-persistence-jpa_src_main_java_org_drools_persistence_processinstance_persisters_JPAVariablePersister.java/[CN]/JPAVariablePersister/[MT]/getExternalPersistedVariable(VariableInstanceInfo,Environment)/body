{
  EntityManager em=(EntityManager)env.get(EnvironmentName.ENTITY_MANAGER);
  if (((JPAPersistedVariable)variableInstanceInfo) == null || ((JPAPersistedVariable)variableInstanceInfo).getEntityId() == null) {
    return null;
  }
  System.out.println("Restoring JPAPersistedVariable id=" + ((JPAPersistedVariable)variableInstanceInfo).getId() + " entityId="+ ((JPAPersistedVariable)variableInstanceInfo).getEntityId()+ " class="+ ((JPAPersistedVariable)variableInstanceInfo).getEntityClass()+ " value="+ ((JPAPersistedVariable)variableInstanceInfo).getEntity());
  try {
    String varType=((JPAPersistedVariable)variableInstanceInfo).getEntityClass();
    return em.find(Class.forName(varType),((JPAPersistedVariable)variableInstanceInfo).getEntityId());
  }
 catch (  ClassNotFoundException ex) {
    Logger.getLogger(JPAVariablePersister.class.getName()).log(Level.SEVERE,null,ex);
    throw new RuntimeException("Could not restore external variable",ex);
  }
}
