{
  MemoryXaResource xa=pm.getXAResource();
  Xid xid=new DroolsXid(100,new byte[]{0x01},new byte[]{0x01});
  snapshotter.bytes=data1;
  xa.start(xid,XAResource.TMNOFLAGS);
  assertEquals(1,xa.list.size());
  assertSame(xa.data.get(xa.list.get(0)),pm.lastSave);
  snapshotter.bytes=data2;
  xa.rollback(xid);
  assertTrue(assertEquals(data1,snapshotter.bytes));
  assertTrue(xa.list.isEmpty());
  assertTrue(xa.data.isEmpty());
}
