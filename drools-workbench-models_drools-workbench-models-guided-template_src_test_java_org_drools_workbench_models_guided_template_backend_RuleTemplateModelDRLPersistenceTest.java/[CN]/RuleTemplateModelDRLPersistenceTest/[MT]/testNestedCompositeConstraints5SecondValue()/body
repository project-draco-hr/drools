{
  TemplateModel m=new TemplateModel();
  m.name="t1";
  FactPattern p=new FactPattern("Person");
  CompositeFieldConstraint comp=new CompositeFieldConstraint();
  comp.setCompositeJunctionType(CompositeFieldConstraint.COMPOSITE_TYPE_OR);
  p.addConstraint(comp);
  m.addLhsItem(p);
  final SingleFieldConstraint comp1sfc1=new SingleFieldConstraint();
  comp1sfc1.setFieldName("field1");
  comp1sfc1.setFieldType(DataType.TYPE_STRING);
  comp1sfc1.setConstraintValueType(SingleFieldConstraint.TYPE_TEMPLATE);
  comp1sfc1.setValue("$f1");
  comp1sfc1.setOperator("==");
  comp.addConstraint(comp1sfc1);
  final SingleFieldConstraint comp1sfc2=new SingleFieldConstraint();
  comp1sfc2.setFieldName("field2");
  comp1sfc2.setFieldType(DataType.TYPE_STRING);
  comp1sfc2.setConstraintValueType(SingleFieldConstraint.TYPE_TEMPLATE);
  comp1sfc2.setValue("$f2");
  comp1sfc2.setOperator("==");
  comp.addConstraint(comp1sfc2);
  final SingleFieldConstraint comp1sfc3=new SingleFieldConstraint();
  comp1sfc3.setFieldName("field3");
  comp1sfc3.setFieldType(DataType.TYPE_STRING);
  comp1sfc3.setConstraintValueType(SingleFieldConstraint.TYPE_TEMPLATE);
  comp1sfc3.setValue("$f3");
  comp1sfc3.setOperator("==");
  comp.addConstraint(comp1sfc3);
  String expected="rule \"t1_0\"\n" + "dialect \"mvel\"\n" + "when\n"+ "Person( field2 == \"bar\" )\n"+ "then\n"+ "end\n";
  m.addRow(new String[]{null,"bar",null});
  checkMarshall(expected,m);
}
