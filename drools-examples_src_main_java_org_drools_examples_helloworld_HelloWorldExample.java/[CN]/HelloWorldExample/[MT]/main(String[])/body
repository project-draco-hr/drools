{
  final KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.add(ResourceFactory.newClassPathResource("HelloWorld.drl",HelloWorldExample.class),ResourceType.DRL);
  if (kbuilder.hasErrors()) {
    System.out.println(kbuilder.getErrors().toString());
    throw new RuntimeException("Unable to compile \"HelloWorld.drl\".");
  }
  final Collection<KnowledgePackage> pkgs=kbuilder.getKnowledgePackages();
  final KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase();
  kbase.addKnowledgePackages(pkgs);
  final StatefulKnowledgeSession ksession=kbase.newStatefulKnowledgeSession();
  ksession.setGlobal("list",new ArrayList<Object>());
  ksession.addEventListener(new DebugAgendaEventListener());
  ksession.addEventListener(new DebugRuleRuntimeEventListener());
  final Message message=new Message();
  message.setMessage("Hello World");
  message.setStatus(Message.HELLO);
  ksession.insert(message);
  ksession.fireAllRules();
  ksession.dispose();
}
