{
  final int numberOfColumns=cellGrid.getNumberOfColumns();
  final int numberOfRows=cellGrid.getNumberOfRows();
  if (backgroundImage == null) {
    Dimension d=getSize();
    backgroundImage=createImage(d.width,d.height);
    Graphics backgroundImageGraphics=backgroundImage.getGraphics();
    backgroundImageGraphics.setColor(getBackground());
    backgroundImageGraphics.fillRect(0,0,d.width,d.height);
    backgroundImageGraphics.setColor(BACKGROUND_COLOR);
    backgroundImageGraphics.fillRect(0,0,cellSize * numberOfColumns - 1,cellSize * numberOfRows - 1);
    backgroundImageGraphics.setColor(GRID_COLOR);
    for (int x=1; x < numberOfColumns; x++) {
      backgroundImageGraphics.drawLine(x * cellSize - 1,0,x * cellSize - 1,cellSize * numberOfRows - 1);
    }
    for (int y=1; y < numberOfRows; y++) {
      backgroundImageGraphics.drawLine(0,y * cellSize - 1,cellSize * numberOfColumns - 1,y * cellSize - 1);
    }
  }
  g.drawImage(backgroundImage,0,0,null);
  for (int row=0; row < numberOfRows; row++) {
    for (int column=0; column < numberOfColumns; column++) {
      Cell cell=cellGrid.getCellAt(row,column);
      if (cell.getCellState() == CellState.LIVE) {
        g.drawImage(liveCellImage,column * cellSize,row * cellSize,this);
      }
    }
  }
}
