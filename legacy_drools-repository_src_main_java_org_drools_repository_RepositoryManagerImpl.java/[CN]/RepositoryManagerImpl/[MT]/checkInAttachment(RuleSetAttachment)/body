{
  String userId=getUserId();
  if (!userId.equals(attachment.getCheckedOutBy())) {
    throw new RepositoryException("Unable to check in the attachment, as it is currently checked out by " + attachment.getCheckedOutBy());
  }
  attachment.setCheckedOut(false);
  attachment.setCheckedOutBy(null);
  session.update(attachment);
}
