{
  String userId=getUserId();
  if (attachment.isCheckedOut()) {
    throw new RepositoryException("Rule is already checked out to " + attachment.getCheckedOutBy());
  }
  attachment.setCheckedOut(true);
  attachment.setCheckedOutBy(userId);
  session.update(attachment);
}
