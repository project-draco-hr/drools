{
  String userId=getUserId();
  if (rule.isCheckedOut()) {
    throw new RepositoryException("Rule is already checked out to " + rule.getCheckedOutBy());
  }
  rule.setCheckedOut(true);
  rule.setCheckedOutBy(userId);
  session.update(rule);
}
