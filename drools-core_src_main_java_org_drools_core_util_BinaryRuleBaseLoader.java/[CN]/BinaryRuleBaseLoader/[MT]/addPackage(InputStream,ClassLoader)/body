{
  if (classLoader == null) {
    classLoader=this.classLoader;
  }
  try {
    Object opkg=DroolsStreamUtils.streamIn(in,classLoader);
    if (opkg instanceof Package) {
      Package pkg=(Package)opkg;
      addPackage(pkg);
    }
 else     if (opkg instanceof Package[]) {
      Package[] pkgs=(Package[])opkg;
      for (      Package pkg : pkgs) {
        addPackage(pkg);
      }
    }
 else {
      throw new IllegalArgumentException("Can only add instances of org.kie.rule.Package to a rulebase instance.");
    }
  }
 catch (  IOException e) {
    throw new RuntimeDroolsException(e);
  }
catch (  ClassNotFoundException e) {
    throw new RuntimeDroolsException(e);
  }
 finally {
    try {
      in.close();
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
}
