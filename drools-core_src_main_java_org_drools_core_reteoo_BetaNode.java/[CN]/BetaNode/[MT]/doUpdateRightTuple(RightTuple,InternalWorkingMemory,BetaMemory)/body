{
  TupleSets<RightTuple> stagedRightTuples=memory.getStagedRightTuples();
  if (stagedRightTuples.isEmpty()) {
    memory.setNodeDirtyWithoutNotify();
  }
  boolean stagedUpdateWasEmpty=stagedRightTuples.addUpdate(rightTuple);
  if (stagedUpdateWasEmpty) {
    memory.setNodeDirty(wm);
  }
}
