{
  BlockExecutionEngine engine=(BlockExecutionEngine)parse("(bind ?x 0) (foreach ?e (create$ 1 2 3) (bind ?x (+ ?x ?e) ) (printout d ?x \" \") )").execution_block();
  ExecutionContext context=new ExecutionContext(null,null,2);
  ByteArrayOutputStream bais=new ByteArrayOutputStream();
  context.addPrintoutRouter("d",new PrintStream(bais));
  engine.execute(context);
  assertEquals(new BigDecimal(6),context.getLocalVariable(0).getBigDecimalValue(context));
  assertEquals("1 3 6 ",new String(bais.toByteArray()));
}
