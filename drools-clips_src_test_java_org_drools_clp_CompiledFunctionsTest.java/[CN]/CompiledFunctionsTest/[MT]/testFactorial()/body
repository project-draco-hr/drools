{
  Deffunction engine=(Deffunction)parse("(deffunction factorial (?n) (if (>= ?n 1) then (* ?n (factorial (- ?n 1))) else 1)) ").deffunction();
  ExecutionContext context=new ExecutionContext(null,null,1);
  ByteArrayOutputStream bais=new ByteArrayOutputStream();
  context.addPrintoutRouter("d",new PrintStream(bais));
  engine.execute(new ValueHandler[]{new LongValueHandler(6)},context);
  assertEquals("416256",new String(bais.toByteArray()));
}
