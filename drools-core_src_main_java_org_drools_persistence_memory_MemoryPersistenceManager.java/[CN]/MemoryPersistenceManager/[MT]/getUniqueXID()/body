{
  Random rnd=new Random(System.currentTimeMillis());
  txnUniqueID++;
  int txnUID=txnUniqueID;
  int tidID=tid;
  int randID=rnd.nextInt();
  byte[] gtrid=new byte[64];
  byte[] bqual=new byte[64];
  if (null == localIP) {
    try {
      localIP=Inet4Address.getLocalHost().getAddress();
    }
 catch (    Exception ex) {
      localIP=new byte[]{0x01,0x02,0x03,0x04};
    }
  }
  System.arraycopy(localIP,0,gtrid,0,4);
  System.arraycopy(localIP,0,bqual,0,4);
  for (int i=0; i <= 3; i++) {
    gtrid[i + 4]=(byte)(txnUID % 0x100);
    bqual[i + 4]=(byte)(txnUID % 0x100);
    txnUID>>=8;
    gtrid[i + 8]=(byte)(tidID % 0x100);
    bqual[i + 8]=(byte)(tidID % 0x100);
    tidID>>=8;
    gtrid[i + 12]=(byte)(randID % 0x100);
    bqual[i + 12]=(byte)(randID % 0x100);
    randID>>=8;
  }
  return new DroolsXid(0x1234,gtrid,bqual);
}
