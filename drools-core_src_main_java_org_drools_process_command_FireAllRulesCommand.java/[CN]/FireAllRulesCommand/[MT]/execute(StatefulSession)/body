{
  if (max > 0) {
    return session.fireAllRules(max);
  }
 else   if (agendaFilter != null) {
    return session.fireAllRules(new StatefulKnowledgeSessionImpl.AgendaFilterWrapper(agendaFilter));
  }
 else {
    return session.fireAllRules();
  }
}
