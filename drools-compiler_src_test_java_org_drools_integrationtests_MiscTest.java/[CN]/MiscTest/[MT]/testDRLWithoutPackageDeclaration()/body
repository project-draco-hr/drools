{
  final KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.add(ResourceFactory.newInputStreamResource(getClass().getResourceAsStream("test_NoPackageDeclaration.drl")),ResourceType.DRL);
  final KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase();
  kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());
  final FactType factType=kbase.getFactType("org.drools.pkg","Person");
  assertNotNull(factType);
  final Object bob=factType.newInstance();
  factType.set(bob,"name","Bob");
  factType.set(bob,"age",Integer.valueOf(30));
  final StatefulKnowledgeSession session=kbase.newStatefulKnowledgeSession();
  final List results=new ArrayList();
  session.setGlobal("results",results);
  session.insert(bob);
  session.fireAllRules();
  assertEquals(1,results.size());
  assertEquals(bob,results.get(0));
}
