{
  String str1="global java.util.List names;";
  String str2="import org.kie.*;\n" + "global java.util.List names;" + "rule R1 when\n"+ "   $p : Person( )\n"+ "   String( this == $p.name ) from names\n"+ "then\n"+ "end";
  KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.add(ResourceFactory.newByteArrayResource(str1.getBytes()),ResourceType.DRL);
  KnowledgeBase kbase=kbuilder.newKnowledgeBase();
  kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());
  StatefulKnowledgeSession ksession=kbase.newStatefulKnowledgeSession();
  List<String> names=new ArrayList<String>();
  names.add("Mark");
  ksession.setGlobal("names",names);
  ksession.insert(new Person("Mark"));
  ksession.fireAllRules();
  kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.add(ResourceFactory.newByteArrayResource(str2.getBytes()),ResourceType.DRL);
  kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());
  ksession.fireAllRules();
  ksession.dispose();
}
