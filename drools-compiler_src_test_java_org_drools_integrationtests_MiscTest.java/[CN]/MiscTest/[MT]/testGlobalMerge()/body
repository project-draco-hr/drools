{
  String rule1="package com.sample\n" + "rule \"rule 1\"\n" + "    salience 10\n"+ "    when\n"+ "    l : java.util.List()\n"+ "    then\n"+ "        l.add( \"rule 1 executed\" );\n"+ "end\n";
  String rule2="package com.sample\n" + "global String str;\n" + "rule \"rule 2\"\n"+ "    when\n"+ "    l : java.util.List()\n"+ "    then\n"+ "        l.add( \"rule 2 executed \" + str);\n"+ "end\n";
  PackageBuilder builder1=new PackageBuilder();
  builder1.addPackageFromDrl(new StringReader(rule1));
  Package pkg1=builder1.getPackage();
  PackageBuilder builder2=new PackageBuilder();
  builder2.addPackageFromDrl(new StringReader(rule2));
  Package pkg2=builder2.getPackage();
  RuleBase ruleBase=RuleBaseFactory.newRuleBase();
  ruleBase.addPackage(pkg1);
  ruleBase.addPackage(pkg2);
  WorkingMemory wm=ruleBase.newStatefulSession();
  wm.setGlobal("str","boo");
  List list=new ArrayList();
  wm.insert(list);
  wm.fireAllRules();
  assertEquals("rule 1 executed",list.get(0));
  assertEquals("rule 2 executed boo",list.get(1));
}
