{
  KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.add(ResourceFactory.newClassPathResource("empty.drl",getClass()),ResourceType.DRL);
  assertFalse(kbuilder.hasErrors());
  KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase();
  kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());
  StatefulKnowledgeSession ksession=createKnowledgeSession(kbase);
  for (int i=0; i < 20; i++) {
    Object object=new Object();
    ksession.insert(object);
    org.drools.runtime.rule.FactHandle factHandle=ksession.getFactHandle(object);
    assertNotNull(factHandle);
    assertEquals(object,ksession.getObject(factHandle));
  }
  ksession.dispose();
}
