{
  String str="global java.util.List list;\n";
  str+="rule \"test\"\n";
  str+="when\n";
  str+="  exists(eval(true))\n";
  str+="then\n";
  str+=" list.add(\"fired\");\n";
  str+="end\n";
  PackageBuilder pkgBuilder=new PackageBuilder();
  pkgBuilder.addPackageFromDrl(new StringReader(str));
  Assert.assertTrue("Should not have errors",pkgBuilder.getErrors().isEmpty());
  ReteooRuleBase rb=new ReteooRuleBase("dummy");
  rb.addPackage(pkgBuilder.getPackage());
  List list=new ArrayList();
  StatefulSession session=rb.newStatefulSession();
  session.setGlobal("list",list);
  session.fireAllRules();
  assertEquals(1,list.size());
  list.clear();
  rb.removePackage(pkgBuilder.getPackage().getName());
  rb.addPackage(pkgBuilder.getPackage());
  session=rb.newStatefulSession();
  session.setGlobal("list",list);
  session.fireAllRules();
  assertEquals(1,list.size());
}
