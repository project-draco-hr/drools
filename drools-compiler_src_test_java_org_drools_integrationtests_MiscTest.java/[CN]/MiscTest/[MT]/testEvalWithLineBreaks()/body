{
  final KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.add(ResourceFactory.newInputStreamResource(getClass().getResourceAsStream("test_EvalWithLineBreaks.drl")),ResourceType.DRL);
  if (kbuilder.hasErrors()) {
    fail(kbuilder.getErrors().toString());
  }
  final KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase();
  kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());
  final List<Person> results=new ArrayList<Person>();
  final StatefulKnowledgeSession session=createKnowledgeSession(kbase);
  session.setGlobal("results",results);
  session.insert(Integer.valueOf(10));
  session.fireAllRules();
  assertEquals(1,results.size());
  assertEquals(Integer.valueOf(10),results.get(0));
}
