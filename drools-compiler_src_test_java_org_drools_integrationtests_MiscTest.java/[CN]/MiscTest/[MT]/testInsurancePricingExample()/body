{
  KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.add(ResourceFactory.newClassPathResource("insurance_pricing_example.drl",getClass()),ResourceType.DRL);
  KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase();
  kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());
  StatefulKnowledgeSession ksession=kbase.newStatefulKnowledgeSession();
  final Driver driver=new Driver();
  final Policy policy=new Policy();
  ksession.insert(driver);
  ksession.insert(policy);
  ksession.fireAllRules();
  assertEquals(120,policy.getBasePrice());
}
