{
  final PackageBuilder builder=new PackageBuilder();
  builder.addPackageFromDrl(new InputStreamReader(getClass().getResourceAsStream("test_MultiRestrictionFieldConstraint.drl")));
  final Package pkg=builder.getPackage();
  final RuleBase ruleBase=getRuleBase();
  ruleBase.addPackage(pkg);
  final WorkingMemory workingMemory=ruleBase.newStatefulSession();
  final List list1=new ArrayList();
  workingMemory.setGlobal("list1",list1);
  final List list2=new ArrayList();
  workingMemory.setGlobal("list2",list2);
  final List list3=new ArrayList();
  workingMemory.setGlobal("list3",list3);
  final List list4=new ArrayList();
  workingMemory.setGlobal("list4",list4);
  final Person youngChili1=new Person("young chili1");
  youngChili1.setAge(12);
  youngChili1.setHair("blue");
  final Person youngChili2=new Person("young chili2");
  youngChili2.setAge(25);
  youngChili2.setHair("purple");
  final Person chili1=new Person("chili1");
  chili1.setAge(35);
  chili1.setHair("red");
  final Person chili2=new Person("chili2");
  chili2.setAge(38);
  chili2.setHair("indigigo");
  final Person oldChili1=new Person("old chili2");
  oldChili1.setAge(45);
  oldChili1.setHair("green");
  final Person oldChili2=new Person("old chili2");
  oldChili2.setAge(48);
  oldChili2.setHair("blue");
  workingMemory.assertObject(youngChili1);
  workingMemory.assertObject(youngChili2);
  workingMemory.assertObject(chili1);
  workingMemory.assertObject(chili2);
  workingMemory.assertObject(oldChili1);
  workingMemory.assertObject(oldChili2);
  workingMemory.fireAllRules();
  assertEquals(1,list1.size());
  assertTrue(list1.contains(chili1));
  assertEquals(2,list2.size());
  assertTrue(list2.contains(chili1));
  assertTrue(list2.contains(chili2));
  assertEquals(2,list3.size());
  assertTrue(list3.contains(youngChili1));
  assertTrue(list3.contains(youngChili2));
  assertEquals(2,list4.size());
  assertTrue(list4.contains(youngChili1));
  assertTrue(list4.contains(chili1));
}
