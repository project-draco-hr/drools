{
  String rule="";
  rule+="package org.drools;\n";
  rule+="import java.util.ArrayList;\n";
  rule+="import org.drools.Person;\n";
  rule+="rule \"Test Rule\"\n";
  rule+="when\n";
  rule+="    $list: ArrayList()                                   \n";
  rule+="    ArrayList()                                          \n";
  rule+="            from collect(                                \n";
  rule+="                  Person(                                \n";
  rule+="                      (                                  \n";
  rule+="                          pet memberOf $list             \n";
  rule+="                      ) || (                             \n";
  rule+="                          pet == null                    \n";
  rule+="                      )                                  \n";
  rule+="                  )                                      \n";
  rule+="            )\n";
  rule+="then\n";
  rule+="  System.out.println(\"hello person\");\n";
  rule+="end";
  final PackageBuilder builder=new PackageBuilder();
  builder.addPackageFromDrl(new StringReader(rule));
  final org.drools.rule.Package pkg=builder.getPackage();
  final RuleBase ruleBase=getSinglethreadRuleBase();
  ruleBase.addPackage(pkg);
  StatefulSession session=ruleBase.newStatefulSession();
  Person toni=new Person("Toni",12);
  toni.setPet(new Pet("Mittens"));
  session.insert(new ArrayList());
  session.insert(toni);
  session.fireAllRules();
}
