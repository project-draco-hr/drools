{
  String rule="";
  rule+="package org.drools.integrationtests;\n";
  rule+="import java.lang.Math;\n";
  rule+="rule \"Test Rule\"\n";
  rule+="  dialect \"mvel\"\n";
  rule+="  when\n";
  rule+="  then\n";
  rule+="    new TestFact(TestFact.TEST);\n";
  rule+="end";
  KnowledgeBuilder builder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  builder.add(ResourceFactory.newByteArrayResource(rule.getBytes()),ResourceType.DRL);
  KnowledgeBase knowledgeBase=KnowledgeBaseFactory.newKnowledgeBase();
  try {
    knowledgeBase.addKnowledgePackages(builder.getKnowledgePackages());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Should execute with out exceptions");
  }
  StatefulKnowledgeSession ksession=knowledgeBase.newStatefulKnowledgeSession();
  ksession.fireAllRules();
}
