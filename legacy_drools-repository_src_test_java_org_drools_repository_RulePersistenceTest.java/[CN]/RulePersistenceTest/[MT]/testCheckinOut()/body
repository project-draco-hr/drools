{
  RuleDef rule=new RuleDef("checkin","some rule");
  RepositoryManager repo=RepositoryFactory.getRepository(new MockUser("michael"),false);
  repo.save(rule);
  repo.checkOutRule(rule);
  rule=repo.loadRule("checkin",1);
  assertEquals(true,rule.isCheckedOut());
  assertEquals("michael",rule.getCheckedOutBy());
  repo=RepositoryFactory.getRepository(new MockUser("rohit"),false);
  try {
    repo.checkInRule(rule);
  }
 catch (  RepositoryException e) {
    assertNotNull(e.getMessage());
  }
  repo=RepositoryFactory.getRepository(new MockUser("michael"),false);
  repo.checkInRule(rule);
  assertEquals(false,rule.isCheckedOut());
}
