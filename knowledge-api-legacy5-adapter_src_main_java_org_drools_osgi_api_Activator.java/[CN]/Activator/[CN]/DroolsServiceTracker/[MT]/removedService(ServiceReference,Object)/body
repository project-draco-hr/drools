{
  Service service=(Service)this.bc.getService(ref);
  logger.info("unregistering : " + service + " : "+ service.getClass().getInterfaces()[0]);
  Dictionary dic=new Hashtable();
  ServiceReference regServiceRef=this.activator.serviceRegistry.getReference();
  ((ServiceRegistryImpl)bc.getService(regServiceRef)).unregisterLocator(service.getClass().getInterfaces()[0]);
  for (  String key : regServiceRef.getPropertyKeys()) {
    if (!key.equals(service.getClass().getInterfaces()[0].getName())) {
      dic.put(key,regServiceRef.getProperty(key));
    }
  }
  activator.serviceRegistry.setProperties(dic);
}
