{
  if (sm.getTipNode() == liaNode) {
    if (sm.isEmpty()) {
      SegmentUtilities.createChildSegments(wm,sm,liaNode.getSinkPropagator());
    }
    sm=sm.getFirst();
  }
  LeftTupleSets leftTuples=sm.getStagedLeftTuples();
  LeftTupleSink sink=liaNode.getSinkPropagator().getFirstLeftTupleSink();
  doUpdateSegmentMemory(leftTuple,context,wm,linkOrNotify,sm,leftTuples,sink);
  if (sm.getNext() != null) {
    for (sm=sm.getNext(); sm != null; sm=sm.getNext()) {
      leftTuple=leftTuple.getPeer();
      leftTuples=sm.getStagedLeftTuples();
      doUpdateSegmentMemory(leftTuple,context,wm,linkOrNotify,sm,leftTuples,((LeftTupleSink)sm.getRootNode()));
    }
  }
}
