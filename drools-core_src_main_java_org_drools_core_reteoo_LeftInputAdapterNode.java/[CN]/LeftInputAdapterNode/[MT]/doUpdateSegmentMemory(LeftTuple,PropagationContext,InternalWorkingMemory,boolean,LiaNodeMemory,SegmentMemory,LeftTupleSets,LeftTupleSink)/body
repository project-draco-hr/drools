{
synchronized (((SynchronizedLeftTupleSets)leftTuples).getLock()) {
    if (leftTuple.getStagedType() == LeftTuple.NONE) {
      leftTuple.setPropagationContext(pctx);
      boolean stagedUpdateWasEmpty=false;
      if (((BaseNode)sm.getRootNode()).isStreamMode() && sm.getTupleQueue() != null) {
        stagedUpdateWasEmpty=sm.getTupleQueue().isEmpty();
        sm.getTupleQueue().add(new LeftTupleEntry(leftTuple,pctx,sm.getNodeMemories().getFirst(),pctx.getType()));
      }
 else {
        stagedUpdateWasEmpty=leftTuples.addUpdate(leftTuple);
      }
      if (stagedUpdateWasEmpty && linkOrNotify) {
        lm.setNodeDirty(wm);
      }
    }
  }
}
