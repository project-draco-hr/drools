{
  if ((tk.getFlags() & Token.SUBEVAL) != 0) {
    setFieldFalse(Token.SUBEVAL);
    if (compileMode) {
      tk.setCompiledExpression((CompiledExpression)compileExpression(tk.getValueAsString()));
    }
 else     if (fastExecuteMode) {
      return tk.setFinalValue(executeExpression(tk.getCompiledExpression(),ctx,variableFactory)).getValue();
    }
  }
 else   if ((tk.getFlags() & Token.DO_NOT_REDUCE) == 0) {
    return tk.setFinalValue(reduce(reduceToken(tk))).getValue();
  }
  return tk;
}
