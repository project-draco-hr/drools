{
  final WorkingMemory newWorkingMemory=this.getRuleExecutionSet().newWorkingMemory(keepReference);
  final Map props=this.getProperties();
  if (props != null) {
    for (final Iterator iterator=props.entrySet().iterator(); iterator.hasNext(); ) {
      final Map.Entry entry=(Map.Entry)iterator.next();
      newWorkingMemory.setGlobal((String)entry.getKey(),entry.getValue());
    }
  }
  this.setWorkingMemory(newWorkingMemory);
}
