{
  KieBaseConfiguration kbc=KnowledgeBaseFactory.newKnowledgeBaseConfiguration();
  kbc.setOption(EventProcessingOption.STREAM);
  KnowledgeBase kbase=loadKnowledgeBase(kbc,"test_CEP_EventExpiration2.drl");
  final TimeIntervalParser parser=new TimeIntervalParser();
  Map<ObjectType,ObjectTypeNode> objectTypeNodes=((KnowledgeBaseImpl)kbase).getRete().getObjectTypeNodes(EntryPointId.DEFAULT);
  ObjectTypeNode node=objectTypeNodes.get(new ClassObjectType(StockTick.class));
  assertNotNull(node);
  assertEquals(parser.parse("10m")[0].longValue() + 1,node.getExpirationOffset());
}
