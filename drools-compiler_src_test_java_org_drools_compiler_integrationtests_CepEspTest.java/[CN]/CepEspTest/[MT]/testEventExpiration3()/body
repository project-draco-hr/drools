{
  KieBaseConfiguration conf=KnowledgeBaseFactory.newKnowledgeBaseConfiguration();
  conf.setOption(EventProcessingOption.STREAM);
  final KnowledgeBase kbase=loadKnowledgeBase(conf,"test_CEP_EventExpiration3.drl");
  final InternalRuleBase internal=(InternalRuleBase)((KnowledgeBaseImpl)kbase).ruleBase;
  final TimeIntervalParser parser=new TimeIntervalParser();
  Map<ObjectType,ObjectTypeNode> objectTypeNodes=internal.getRete().getObjectTypeNodes(EntryPointId.DEFAULT);
  ObjectTypeNode node=objectTypeNodes.get(new ClassObjectType(StockTick.class));
  assertNotNull(node);
  assertEquals(parser.parse("10m")[0].longValue() + 1,node.getExpirationOffset());
}
