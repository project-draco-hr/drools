{
synchronized (this) {
    if (this.scan) {
      this.listener.info("ResourceChangeNotification scanner has started");
    }
    while (this.scan) {
      Exception exception=null;
synchronized (this.resources) {
        this.scanner.scan();
      }
      try {
        this.listener.debug("ResourceChangeScanner thread is waiting for " + this.interval);
        wait(this.interval * 1000);
      }
 catch (      InterruptedException e) {
        exception=e;
      }
      if (this.scan && exception != null) {
        this.listener.exception(new RuntimeException("ResourceChangeNotification ChangeSet scanning thread was interrupted, but shutdown was not requested",exception));
      }
    }
    this.listener.info("ResourceChangeNotification scanner has stopped");
  }
}
