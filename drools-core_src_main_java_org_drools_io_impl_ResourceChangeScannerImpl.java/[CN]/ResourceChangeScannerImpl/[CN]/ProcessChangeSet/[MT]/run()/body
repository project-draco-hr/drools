{
synchronized (this) {
    if (this.scan) {
      this.listener.info("ResourceChangeNotification scanner has started");
    }
    while (this.scan) {
      try {
synchronized (this.resources) {
          this.scanner.scan();
        }
      }
 catch (      RuntimeException e) {
        this.listener.exception(e);
      }
catch (      Error e) {
        this.listener.exception(e);
      }
      try {
        this.listener.debug("ResourceChangeScanner thread is waiting for " + this.interval + " seconds.");
        wait(this.interval * 1000);
      }
 catch (      InterruptedException e) {
        if (this.scan) {
          this.listener.exception(new RuntimeException("ResourceChangeNotification ChangeSet scanning thread was interrupted, but shutdown was not requested",e));
        }
      }
    }
    this.listener.info("ResourceChangeNotification scanner has stopped");
  }
}
