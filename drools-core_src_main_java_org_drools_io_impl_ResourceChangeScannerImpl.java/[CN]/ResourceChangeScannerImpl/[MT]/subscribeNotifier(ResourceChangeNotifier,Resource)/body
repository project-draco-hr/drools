{
synchronized (this.resources) {
    if (((InternalResource)resource).isDirectory()) {
      this.directories.add(resource);
    }
    Set<ResourceChangeNotifier> notifiers=this.resources.get(resource);
    if (notifiers == null) {
      notifiers=new HashSet<ResourceChangeNotifier>();
      this.resources.put(resource,notifiers);
    }
    this.listener.debug("ResourceChangeScanner subcribing notifier=" + notifier + " to resource="+ resource);
    notifiers.add(notifier);
  }
}
