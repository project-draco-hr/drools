{
  List<String> files=new ArrayList<String>();
  for (  String rule : rules) {
    String file="org/test/" + rule + ".drl";
    fileManager.write(fileManager.newFile("src/kbases/org.test.KBase1/" + file),createDRL(rule));
    files.add(file);
  }
  KProject kproj=new KProjectImpl();
  KBase kBase1=kproj.newKBase("org.test","KBase1").setFiles(files).setEqualsBehavior(AssertBehaviorOption.EQUALITY).setEventProcessingMode(EventProcessingOption.STREAM);
  KSession ksession1=kBase1.newKSession("org.test","KSession1").setType("stateful").setAnnotations(asList("@ApplicationScoped; @Inject")).setClockType(ClockTypeOption.get("realtime"));
  fileManager.write(fileManager.newFile(KnowledgeContainerImpl.KPROJECT_RELATIVE_PATH),new XStream().toXML(kproj));
  return kContainer.buildKJar(fileManager.getRootDirectory(),fileManager.getRootDirectory(),kjarName);
}
