{
  Handler handler=getHandler(localName);
  if ((handler != null) && (!this.parents.isEmpty() && this.parents.getLast() instanceof RuleDescr)) {
    this.inHandledRuleSubElement=false;
  }
  if (handler == null) {
    if (this.configurationStack.size() >= 1) {
      endConfiguration();
    }
    return;
  }
  this.current=getParent(handler.generateNodeFor());
  Object node=handler.end(uri,localName);
  if (node != null && !this.lastWasEndElement) {
    this.peer=node;
  }
 else   if (this.lastWasEndElement || (this.parents.getLast()).getClass().isInstance(this.current)) {
    this.peer=this.parents.removeLast();
  }
  this.lastWasEndElement=true;
}
