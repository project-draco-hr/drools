{
  KnowledgeBaseConfiguration kbconf=KnowledgeBaseFactory.newKnowledgeBaseConfiguration();
  kbconf.setOption(EventProcessingOption.STREAM);
  kbase=KnowledgeBaseFactory.newKnowledgeBase(kbconf);
  KnowledgeAgentConfiguration kaconf=KnowledgeAgentFactory.newKnowledgeAgentConfiguration();
  kaconf.setProperty("drools.agent.newInstance","false");
  KnowledgeAgent kagent=KnowledgeAgentFactory.newKnowledgeAgent("theAgent",kbase,kaconf);
  kagent.applyChangeSet(ResourceFactory.newUrlResource(changeset.toURI().toURL()));
  kbase=kagent.getKnowledgeBase();
}
