{
  final RuleDescr rule=parseResource("from.drl").rule();
  System.err.println(parser.getErrorMessages());
  assertFalse(parser.hasErrors());
  assertNotNull(rule);
  assertEquals("using_from",rule.getName());
  assertEquals(6,rule.getLhs().getDescrs().size());
  FromDescr from=(FromDescr)rule.getLhs().getDescrs().get(0);
  assertEquals(3,from.getLine());
  assertEquals("Foo",from.getReturnedColumn().getObjectType());
  assertTrue(from.getDataSource() instanceof FieldAccessDescr);
  assertEquals("baz",((FieldAccessDescr)from.getDataSource()).getFieldName());
  assertEquals("bar",((FieldAccessDescr)from.getDataSource()).getVariableName());
  from=(FromDescr)rule.getLhs().getDescrs().get(1);
  assertEquals("Whee",from.getReturnedColumn().getObjectType());
  assertEquals(1,from.getReturnedColumn().getDescrs().size());
  assertTrue(from.getDataSource() instanceof FunctionCallDescr);
  assertEquals("whee",((FunctionCallDescr)from.getDataSource()).getName());
  assertEquals(1,((FunctionCallDescr)from.getDataSource()).getArguments().size());
  assertEquals("y",((FunctionCallDescr)from.getDataSource()).getArguments().get(0));
  assertEquals(4,from.getLine());
  assertEquals(4,from.getReturnedColumn().getLine());
  from=(FromDescr)rule.getLhs().getDescrs().get(2);
  assertEquals("Foo",from.getReturnedColumn().getObjectType());
  assertEquals(1,from.getReturnedColumn().getDescrs().size());
  assertEquals("f",from.getReturnedColumn().getIdentifier());
  assertTrue(from.getDataSource() instanceof MethodAccessDescr);
  assertEquals("bar",((MethodAccessDescr)from.getDataSource()).getVariableName());
  assertEquals("la",((MethodAccessDescr)from.getDataSource()).getMethodName());
  assertEquals(1,((MethodAccessDescr)from.getDataSource()).getArguments().size());
  assertEquals("x",((MethodAccessDescr)from.getDataSource()).getArguments().get(0));
  assertEqualsIgnoreWhitespace("whee();",rule.getConsequence());
  from=(FromDescr)rule.getLhs().getDescrs().get(3);
  assertEquals("wa",((FunctionCallDescr)from.getDataSource()).getName());
  from=(FromDescr)rule.getLhs().getDescrs().get(4);
  assertEquals("wa",((MethodAccessDescr)from.getDataSource()).getMethodName());
  assertEquals("la",((MethodAccessDescr)from.getDataSource()).getVariableName());
  assertEquals("Bam",((ColumnDescr)rule.getLhs().getDescrs().get(5)).getObjectType());
}
