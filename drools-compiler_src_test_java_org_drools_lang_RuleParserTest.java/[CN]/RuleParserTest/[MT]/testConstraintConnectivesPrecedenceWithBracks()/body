{
  final String text="Person( age < 42 && ( location==\"atlanta\" || age > 20 && location==\"Seatle\") || location == \"Chicago\")";
  PatternDescr pattern=(PatternDescr)parse("lhs_pattern","lhs_pattern",text);
  assertEquals(1,pattern.getDescrs().size());
  OrDescr or1=(OrDescr)pattern.getDescrs().get(0);
  assertEquals(2,or1.getDescrs().size());
  AndDescr and1=(AndDescr)or1.getDescrs().get(0);
  assertEquals(2,and1.getDescrs().size());
  FieldConstraintDescr fcd=(FieldConstraintDescr)and1.getDescrs().get(0);
  assertEquals("age",fcd.getFieldName());
  assertEquals("<",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getEvaluator());
  assertEquals("42",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getText());
  OrDescr or2=(OrDescr)and1.getDescrs().get(1);
  fcd=(FieldConstraintDescr)or2.getDescrs().get(0);
  assertEquals("location",fcd.getFieldName());
  assertEquals("==",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getEvaluator());
  assertEquals("atlanta",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getText());
  AndDescr and2=(AndDescr)or2.getDescrs().get(1);
  assertEquals(2,and2.getDescrs().size());
  fcd=(FieldConstraintDescr)and2.getDescrs().get(0);
  assertEquals("age",fcd.getFieldName());
  assertEquals(">",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getEvaluator());
  assertEquals("20",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getText());
  fcd=(FieldConstraintDescr)and2.getDescrs().get(1);
  assertEquals("location",fcd.getFieldName());
  assertEquals("==",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getEvaluator());
  assertEquals("Seatle",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getText());
  fcd=(FieldConstraintDescr)or1.getDescrs().get(1);
  assertEquals("location",fcd.getFieldName());
  assertEquals("==",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getEvaluator());
  assertEquals("Chicago",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getText());
}
