{
  final RuleParser parser=parseResource("bindings.drl");
  parser.compilation_unit();
  final PackageDescr pkg=parser.getPackageDescr();
  final RuleDescr ruleDescr=(RuleDescr)pkg.getRules().get(0);
  final AndDescr lhs=ruleDescr.getLhs();
  assertEquals(2,lhs.getDescrs().size());
  final ColumnDescr cheese=(ColumnDescr)lhs.getDescrs().get(0);
  assertEquals("Cheese",cheese.getObjectType());
  assertEquals(2,lhs.getDescrs().size());
  FieldBindingDescr fieldBinding=(FieldBindingDescr)cheese.getDescrs().get(0);
  assertEquals("type",fieldBinding.getFieldName());
  FieldConstraintDescr fld=(FieldConstraintDescr)cheese.getDescrs().get(1);
  LiteralRestrictionDescr literalDescr=(LiteralRestrictionDescr)fld.getRestrictions().get(0);
  assertEquals("type",fld.getFieldName());
  assertEquals("==",literalDescr.getEvaluator());
  assertEquals("stilton",literalDescr.getText());
  final ColumnDescr person=(ColumnDescr)lhs.getDescrs().get(1);
  fieldBinding=(FieldBindingDescr)person.getDescrs().get(0);
  assertEquals("name",fieldBinding.getFieldName());
  fld=(FieldConstraintDescr)person.getDescrs().get(1);
  literalDescr=(LiteralRestrictionDescr)fld.getRestrictions().get(0);
  assertEquals("name",fld.getFieldName());
  assertEquals("==",literalDescr.getEvaluator());
  assertEquals("bob",literalDescr.getText());
  fld=(FieldConstraintDescr)person.getDescrs().get(2);
  final VariableRestrictionDescr variableDescr=(VariableRestrictionDescr)fld.getRestrictions().get(0);
  assertEquals("likes",fld.getFieldName());
  assertEquals("==",variableDescr.getEvaluator());
  assertEquals("$type",variableDescr.getIdentifier());
  assertFalse(parser.hasErrors());
}
