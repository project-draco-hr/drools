{
  final String text="Person( ( age == 70 && hair == \"black\" ) || ( age == 40 && hair == \"pink\" ) || ( age == 12 && ( hair == \"yellow\" || hair == \"blue\" ) ) )";
  final CharStream charStream=new ANTLRStringStream(text);
  final DRLLexer lexer=new DRLLexer(charStream);
  final TokenStream tokenStream=new CommonTokenStream(lexer);
  final DRLParser parser=new DRLParser(tokenStream);
  PatternDescr pattern=(PatternDescr)parser.fact(null);
  assertFalse(parser.getErrorMessages().toString(),parser.hasErrors());
  assertEquals(1,pattern.getDescrs().size());
  OrDescr or1=(OrDescr)pattern.getDescrs().get(0);
  assertEquals(3,or1.getDescrs().size());
  AndDescr and1=(AndDescr)or1.getDescrs().get(0);
  AndDescr and2=(AndDescr)or1.getDescrs().get(1);
  AndDescr and3=(AndDescr)or1.getDescrs().get(2);
  assertEquals(2,and1.getDescrs().size());
  FieldConstraintDescr fcd=(FieldConstraintDescr)and1.getDescrs().get(0);
  assertEquals("age",fcd.getFieldName());
  assertEquals("==",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getEvaluator());
  assertEquals("70",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getText());
  fcd=(FieldConstraintDescr)and1.getDescrs().get(1);
  assertEquals("hair",fcd.getFieldName());
  assertEquals("==",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getEvaluator());
  assertEquals("black",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getText());
  assertEquals(2,and2.getDescrs().size());
  fcd=(FieldConstraintDescr)and2.getDescrs().get(0);
  assertEquals("age",fcd.getFieldName());
  assertEquals("==",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getEvaluator());
  assertEquals("40",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getText());
  fcd=(FieldConstraintDescr)and2.getDescrs().get(1);
  assertEquals("hair",fcd.getFieldName());
  assertEquals("==",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getEvaluator());
  assertEquals("pink",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getText());
  assertEquals(2,and3.getDescrs().size());
  fcd=(FieldConstraintDescr)and3.getDescrs().get(0);
  assertEquals("age",fcd.getFieldName());
  assertEquals("==",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getEvaluator());
  assertEquals("12",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getText());
  OrDescr or2=(OrDescr)and3.getDescrs().get(1);
  fcd=(FieldConstraintDescr)or2.getDescrs().get(0);
  assertEquals("hair",fcd.getFieldName());
  assertEquals("==",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getEvaluator());
  assertEquals("yellow",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getText());
  fcd=(FieldConstraintDescr)or2.getDescrs().get(1);
  assertEquals("hair",fcd.getFieldName());
  assertEquals("==",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getEvaluator());
  assertEquals("blue",((LiteralRestrictionDescr)fcd.getRestrictions().get(0)).getText());
}
