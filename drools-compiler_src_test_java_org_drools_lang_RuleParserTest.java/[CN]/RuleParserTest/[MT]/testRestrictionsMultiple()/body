{
  final RuleDescr rule=parseResource("restrictions_test.drl").rule();
  assertFalse(this.parser.getErrors().toString(),this.parser.hasErrors());
  assertNotNull(rule);
  assertEqualsIgnoreWhitespace("consequence();",(String)rule.getConsequence());
  assertEquals("simple_rule",rule.getName());
  assertEquals(2,rule.getLhs().getDescrs().size());
  PatternDescr pattern=(PatternDescr)rule.getLhs().getDescrs().get(0);
  assertEquals("Person",pattern.getObjectType());
  assertEquals(1,pattern.getDescrs().size());
  FieldConstraintDescr fld=(FieldConstraintDescr)pattern.getDescrs().get(0);
  assertEquals(3,fld.getRestrictions().size());
  assertEquals("age",fld.getFieldName());
  LiteralRestrictionDescr lit=(LiteralRestrictionDescr)fld.getRestrictions().get(0);
  assertEquals(">",lit.getEvaluator());
  assertEquals("30",lit.getText());
  RestrictionConnectiveDescr con=(RestrictionConnectiveDescr)fld.getRestrictions().get(1);
  assertEquals(RestrictionConnectiveDescr.AND,con.getConnective());
  lit=(LiteralRestrictionDescr)fld.getRestrictions().get(2);
  assertEquals("<",lit.getEvaluator());
  assertEquals("40",lit.getText());
  pattern=(PatternDescr)rule.getLhs().getDescrs().get(1);
  assertEquals("Vehicle",pattern.getObjectType());
  assertEquals(2,pattern.getDescrs().size());
  fld=(FieldConstraintDescr)pattern.getDescrs().get(0);
  assertEquals(3,fld.getRestrictions().size());
  lit=(LiteralRestrictionDescr)fld.getRestrictions().get(0);
  assertEquals("type",fld.getFieldName());
  assertEquals("==",lit.getEvaluator());
  assertEquals("sedan",lit.getText());
  con=(RestrictionConnectiveDescr)fld.getRestrictions().get(1);
  assertEquals(RestrictionConnectiveDescr.OR,con.getConnective());
  lit=(LiteralRestrictionDescr)fld.getRestrictions().get(2);
  assertEquals("==",lit.getEvaluator());
  assertEquals("wagon",lit.getText());
  fld=(FieldConstraintDescr)pattern.getDescrs().get(1);
  assertEquals(1,fld.getRestrictions().size());
  lit=(LiteralRestrictionDescr)fld.getRestrictions().get(0);
  assertEquals("<",lit.getEvaluator());
  assertEquals("3",lit.getText());
}
