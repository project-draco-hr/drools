{
  final RuleDescr rule=(RuleDescr)parseResource("rule","rule","restrictions_test.drl");
  assertNotNull(rule);
  assertEqualsIgnoreWhitespace("consequence();",(String)rule.getConsequence());
  assertEquals("simple_rule",rule.getName());
  assertEquals(2,rule.getLhs().getDescrs().size());
  PatternDescr pattern=(PatternDescr)rule.getLhs().getDescrs().get(0);
  assertEquals("Person",pattern.getObjectType());
  assertEquals(1,pattern.getConstraint().getDescrs().size());
  AndDescr and=(AndDescr)pattern.getConstraint();
  FieldConstraintDescr fld=(FieldConstraintDescr)and.getDescrs().get(0);
  assertEquals(RestrictionConnectiveDescr.AND,((RestrictionConnectiveDescr)fld.getRestriction()).getConnective());
  assertEquals(2,fld.getRestrictions().size());
  assertEquals("age",fld.getFieldName());
  LiteralRestrictionDescr lit=(LiteralRestrictionDescr)fld.getRestrictions().get(0);
  assertEquals(">",lit.getEvaluator());
  assertEquals("30",lit.getText());
  lit=(LiteralRestrictionDescr)fld.getRestrictions().get(1);
  assertEquals("<",lit.getEvaluator());
  assertEquals("40",lit.getText());
  pattern=(PatternDescr)rule.getLhs().getDescrs().get(1);
  assertEquals("Vehicle",pattern.getObjectType());
  assertEquals(2,pattern.getConstraint().getDescrs().size());
  and=(AndDescr)pattern.getConstraint();
  fld=(FieldConstraintDescr)and.getDescrs().get(0);
  assertEquals("type",fld.getFieldName());
  assertEquals(1,fld.getRestrictions().size());
  RestrictionConnectiveDescr or=(RestrictionConnectiveDescr)fld.getRestrictions().get(0);
  assertEquals(RestrictionConnectiveDescr.OR,or.getConnective());
  assertEquals(2,or.getRestrictions().size());
  lit=(LiteralRestrictionDescr)or.getRestrictions().get(0);
  assertEquals("==",lit.getEvaluator());
  assertEquals("sedan",lit.getText());
  lit=(LiteralRestrictionDescr)or.getRestrictions().get(1);
  assertEquals("==",lit.getEvaluator());
  assertEquals("wagon",lit.getText());
  fld=(FieldConstraintDescr)and.getDescrs().get(1);
  assertEquals(1,fld.getRestrictions().size());
  lit=(LiteralRestrictionDescr)fld.getRestrictions().get(0);
  assertEquals("<",lit.getEvaluator());
  assertEquals("3",lit.getText());
}
