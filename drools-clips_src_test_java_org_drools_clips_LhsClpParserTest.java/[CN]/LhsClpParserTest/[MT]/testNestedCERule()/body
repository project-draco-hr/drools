{
  RuleDescr rule=parse("(defrule xxx ?b <- (person (name yyy)) (or (and (hobby1 (type qqq1)) (hobby2 (type ~qqq2))) (food (veg ~shroom) ) ) => )").defrule();
  assertEquals("xxx",rule.getName());
  AndDescr lhs=rule.getLhs();
  List lhsList=lhs.getDescrs();
  assertEquals(2,lhsList.size());
  PatternDescr col=(PatternDescr)lhsList.get(0);
  assertEquals("?b",col.getIdentifier());
  assertEquals("person",col.getObjectType());
  FieldConstraintDescr fieldConstraintDescr=(FieldConstraintDescr)col.getDescrs().get(0);
  assertEquals("name",fieldConstraintDescr.getFieldName());
  LiteralRestrictionDescr litDescr=(LiteralRestrictionDescr)fieldConstraintDescr.getRestrictions().get(0);
  assertEquals("==",litDescr.getEvaluator());
  assertEquals("yyy",litDescr.getText());
  OrDescr orDescr=(OrDescr)lhsList.get(1);
  assertEquals(2,orDescr.getDescrs().size());
  AndDescr andDescr=(AndDescr)orDescr.getDescrs().get(0);
  col=(PatternDescr)andDescr.getDescrs().get(0);
  assertEquals("hobby1",col.getObjectType());
  fieldConstraintDescr=(FieldConstraintDescr)col.getDescrs().get(0);
  assertEquals("type",fieldConstraintDescr.getFieldName());
  litDescr=(LiteralRestrictionDescr)fieldConstraintDescr.getRestrictions().get(0);
  assertEquals("==",litDescr.getEvaluator());
  assertEquals("qqq1",litDescr.getText());
  col=(PatternDescr)andDescr.getDescrs().get(1);
  assertEquals("hobby2",col.getObjectType());
  fieldConstraintDescr=(FieldConstraintDescr)col.getDescrs().get(0);
  assertEquals("type",fieldConstraintDescr.getFieldName());
  litDescr=(LiteralRestrictionDescr)fieldConstraintDescr.getRestrictions().get(0);
  assertEquals("!=",litDescr.getEvaluator());
  assertEquals("qqq2",litDescr.getText());
  col=(PatternDescr)orDescr.getDescrs().get(1);
  assertEquals("food",col.getObjectType());
  fieldConstraintDescr=(FieldConstraintDescr)col.getDescrs().get(0);
  assertEquals("veg",fieldConstraintDescr.getFieldName());
  litDescr=(LiteralRestrictionDescr)fieldConstraintDescr.getRestrictions().get(0);
  assertEquals("!=",litDescr.getEvaluator());
  assertEquals("shroom",litDescr.getText());
}
