{
  String rule1="B(a == 15) C() A()";
  String rule2="B(a == 15) C() A() @watch(b, c)";
  KnowledgeBase kbase=getKnowledgeBase(rule1,rule2);
  InternalWorkingMemory wm=((InternalWorkingMemory)kbase.newStatefulKnowledgeSession());
  ObjectTypeNode otnA=getObjectTypeNode(kbase,"A");
  ObjectTypeNode otnC=getObjectTypeNode(kbase,"C");
  List<String> sp=getSettableProperties(wm,otnA);
  BetaNode betaNodeC=(BetaNode)otnC.getObjectSinkPropagator().getSinks()[0];
  BetaNode betaNodeA1=(BetaNode)otnA.getObjectSinkPropagator().getSinks()[0];
  BetaNode betaNodeA2=(BetaNode)otnA.getObjectSinkPropagator().getSinks()[1];
  assertSame(betaNodeC.getSinkPropagator().getSinks()[0],betaNodeA1);
  assertSame(betaNodeC.getSinkPropagator().getSinks()[1],betaNodeA2);
  assertSame(betaNodeA1.getLeftTupleSource(),betaNodeC);
  assertSame(betaNodeA2.getLeftTupleSource(),betaNodeC);
  assertEquals(EmptyBitMask.get(),betaNodeC.getRightDeclaredMask());
  assertEquals(EmptyBitMask.get(),betaNodeC.getRightInferredMask());
  assertEquals(EmptyBitMask.get(),betaNodeC.getLeftDeclaredMask());
  assertEquals(calculatePositiveMask(list("a"),sp),betaNodeC.getLeftInferredMask());
  assertEquals(EmptyBitMask.get(),betaNodeA1.getRightDeclaredMask());
  assertEquals(EmptyBitMask.get(),betaNodeA1.getRightInferredMask());
  assertEquals(AllSetBitMask.get(),betaNodeA1.getLeftDeclaredMask());
  assertEquals(AllSetBitMask.get(),betaNodeA1.getLeftInferredMask());
  assertEquals(calculatePositiveMask(list("b","c"),sp),betaNodeA2.getRightDeclaredMask());
  assertEquals(calculatePositiveMask(list("b","c"),sp),betaNodeA2.getRightInferredMask());
  assertEquals(AllSetBitMask.get(),betaNodeA2.getLeftDeclaredMask());
  assertEquals(AllSetBitMask.get(),betaNodeA2.getLeftInferredMask());
  kbase.removeRule("org.drools.compiler.integrationtests","r0");
  assertEquals(1,betaNodeC.getSinkPropagator().getSinks().length);
}
