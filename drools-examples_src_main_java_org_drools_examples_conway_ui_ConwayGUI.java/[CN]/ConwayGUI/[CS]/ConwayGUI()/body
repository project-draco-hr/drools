{
  super(new BorderLayout());
  final String nextGenerationLabel=ConwayApplicationProperties.getProperty("next.generation.label");
  this.nextGenerationButton=new JButton(nextGenerationLabel);
  final String startLabel=ConwayApplicationProperties.getProperty("start.label");
  this.startStopButton=new JButton(startLabel);
  final String clearLabel=ConwayApplicationProperties.getProperty("clear.label");
  this.clearButton=new JButton(clearLabel);
  final CellGrid grid=new CellGrid(30,30);
  final CellGridCanvas canvas=new CellGridCanvas(grid);
  final JPanel panel=new JPanel(new BorderLayout());
  panel.add(BorderLayout.CENTER,canvas);
  final Border etchedBorder=BorderFactory.createEtchedBorder(EtchedBorder.LOWERED);
  final Border outerBlankBorder=BorderFactory.createEmptyBorder(5,5,5,5);
  final Border innerBlankBorder=BorderFactory.createEmptyBorder(5,5,5,5);
  final Border border=BorderFactory.createCompoundBorder(BorderFactory.createCompoundBorder(outerBlankBorder,etchedBorder),innerBlankBorder);
  panel.setBorder(border);
  add(BorderLayout.CENTER,panel);
  add(BorderLayout.EAST,createControlPanel());
  this.nextGenerationButton.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      Worker.post(new Job(){
        public Object run(){
          grid.nextGeneration();
          return null;
        }
      }
);
      canvas.repaint();
    }
  }
);
  this.clearButton.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      Worker.post(new Job(){
        public Object run(){
          grid.killAll();
          return null;
        }
      }
);
      canvas.repaint();
    }
  }
);
  final ActionListener timerAction=new ActionListener(){
    public void actionPerformed(    ActionEvent ae){
      Worker.post(new Job(){
        public Object run(){
          if (!grid.nextGeneration()) {
            stopTimer();
          }
          return null;
        }
      }
);
      canvas.repaint();
    }
  }
;
  this.timer=new Timer(500,timerAction);
  this.startStopButton.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      if (ConwayGUI.this.timer.isRunning()) {
        stopTimer();
      }
 else {
        startTimer();
      }
    }
  }
);
  populatePatternSelector();
  this.patternSelector.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      final ConwayPattern pattern=(ConwayPattern)ConwayGUI.this.patternSelector.getSelectedItem();
      if (pattern != null) {
        grid.setPattern(pattern);
        canvas.repaint();
      }
    }
  }
);
  this.patternSelector.setSelectedIndex(-1);
}
