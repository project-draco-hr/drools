{
  KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.add(ResourceFactory.newClassPathResource("base.drl",getClass()),ResourceType.DRL);
  kbuilder.add(ResourceFactory.newClassPathResource("key-handlers.drl",getClass()),ResourceType.DRL);
  kbuilder.add(ResourceFactory.newClassPathResource("pacman.drl",getClass()),ResourceType.DRL);
  kbuilder.add(ResourceFactory.newClassPathResource("monster.drl",getClass()),ResourceType.DRL);
  if (kbuilder.hasErrors()) {
    System.out.println(kbuilder.getErrors());
  }
  KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase();
  kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());
  this.ksession=kbase.newStatefulKnowledgeSession();
  this.pacMan=new PacMan();
  this.pacMan.setSpeed(5);
  this.ksession.insert(this.pacMan);
  Monster monster=new Monster();
  monster.setSpeed(3);
  this.ksession.insert(monster);
  this.ksession.insert(new Score());
  KnowledgeRuntimeLoggerFactory.newThreadedFileLogger(this.ksession,"pacman.log",3000);
  Location pacLocation=new Location(this.pacMan,1,5);
  Location monLocation=new Location(monster,10,5);
  this.ksession.insert(pacLocation);
  this.ksession.insert(monLocation);
  Tick tick=new Tick(0);
  this.ksession.insert(tick);
}
