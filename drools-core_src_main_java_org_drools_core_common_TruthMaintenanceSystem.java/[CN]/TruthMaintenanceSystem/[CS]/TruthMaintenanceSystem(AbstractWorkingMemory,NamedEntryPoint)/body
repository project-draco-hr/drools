{
  this.wm=wm;
  this.equalityKeyMap=new ObjectHashMap();
  this.equalityKeyMap.setComparator(EqualityKeyComparator.getInstance());
  InternalRuleBase rbase=(InternalRuleBase)wm.getRuleBase();
  beliefSystem=rbase.getConfiguration().getComponentFactory().getBeliefSystemFactory().createBeliefSystem(wm.getSessionConfiguration().getBeliefSystemType(),ep,this);
}
