{
  boolean newInstance=Boolean.valueOf(config.getProperty(NEW_INSTANCE,"false")).booleanValue();
  int secondsToRefresh=Integer.parseInt(config.getProperty(POLL_INTERVAL,"-1"));
  final String name=config.getProperty(CONFIG_NAME,"default");
  listener.setAgentName(name);
  listener.info("Configuring with newInstance=" + newInstance + ", secondsToRefresh="+ secondsToRefresh);
  List provs=new ArrayList();
  for (Iterator iter=config.keySet().iterator(); iter.hasNext(); ) {
    String key=(String)iter.next();
    PackageProvider prov=getProvider(key,config);
    if (prov != null) {
      listener.info("Configuring package provider : " + prov.toString());
      provs.add(prov);
    }
  }
  configure(newInstance,provs,secondsToRefresh);
}
