{
  final KieBaseDescrImpl kBase=new KieBaseDescrImpl();
  kBase.setName(reader.getAttribute("name"));
  String eventMode=reader.getAttribute("eventProcessingMode");
  if (eventMode != null) {
    kBase.setEventProcessingMode(EventProcessingOption.determineEventProcessingMode(eventMode));
  }
  String equalsBehavior=reader.getAttribute("equalsBehavior");
  if (equalsBehavior != null) {
    kBase.setEqualsBehavior(AssertBehaviorOption.valueOf(equalsBehavior));
  }
  readNodes(reader,new AbstractXStreamConverter.NodeReader(){
    public void onNode(    HierarchicalStreamReader reader,    String name,    String value){
      if ("ksessions".equals(name)) {
        Map<String,KieSessionDescr> kSessions=new HashMap<String,KieSessionDescr>();
        for (        KieSessionDescrImpl kSession : readObjectList(reader,context,KieSessionDescrImpl.class)) {
          kSession.setKBase(kBase);
          kSessions.put(kSession.getName(),kSession);
        }
        kBase.setKSessions(kSessions);
      }
 else       if ("includes".equals(name)) {
        for (        String include : readList(reader)) {
          kBase.addInclude(include);
        }
      }
    }
  }
);
  return kBase;
}
