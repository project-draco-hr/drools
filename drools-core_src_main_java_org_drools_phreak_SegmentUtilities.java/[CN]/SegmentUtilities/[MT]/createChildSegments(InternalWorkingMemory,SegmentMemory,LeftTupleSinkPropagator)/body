{
  for (LeftTupleSinkNode sink=(LeftTupleSinkNode)sinkProp.getFirstLeftTupleSink(); sink != null; sink=sink.getNextLeftTupleSinkNode()) {
    if (!(NodeTypeEnums.isTerminalNode(sink) || sink.getType() == NodeTypeEnums.RightInputAdaterNode)) {
      SegmentMemory childSmem=createSegmentMemory((LeftTupleSource)sink,wm);
      smem.add(childSmem);
    }
 else {
      SegmentMemory childSmem=new SegmentMemory(sink);
      RuleMemory rmem;
      if (NodeTypeEnums.isTerminalNode(sink)) {
        rmem=(RuleMemory)wm.getNodeMemory((MemoryFactory)sink);
      }
 else {
        rmem=((RiaNodeMemory)wm.getNodeMemory((MemoryFactory)sink)).getRiaRuleMemory();
      }
      rmem.getSegmentMemories()[rmem.getSegmentMemories().length - 1]=childSmem;
      childSmem.setTipNode(sink);
      childSmem.setSinkFactory(sink);
      smem.add(childSmem);
    }
  }
}
