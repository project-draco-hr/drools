{
  this.pkg=pkg;
  this.methods=new ArrayList();
  this.invokers=new HashMap();
  this.invokerLookups=new HashMap();
  this.declarations=new HashMap();
  this.descrLookups=new HashMap();
  this.declarations=new HashMap();
  this.errors=new ArrayList();
  this.variables=new AvailableVariables(new Map[]{this.declarations,this.pkg.getGlobals()});
  this.ruleDescr=ruleDescr;
  if (ruleDescr instanceof QueryDescr) {
    this.rule=new Query(ruleDescr.getName());
  }
 else {
    this.rule=new Rule(ruleDescr.getName());
  }
}
