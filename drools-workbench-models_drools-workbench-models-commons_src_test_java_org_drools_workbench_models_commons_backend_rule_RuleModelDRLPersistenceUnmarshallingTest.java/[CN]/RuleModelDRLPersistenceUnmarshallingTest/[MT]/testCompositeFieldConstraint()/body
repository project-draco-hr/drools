{
  String drl="rule \"rule1\"\n" + "when\n" + "Applicant( age < 55 || age > 70 )\n"+ "then\n"+ "end";
  RuleModel m=RuleModelDRLPersistenceImpl.getInstance().unmarshal(drl,Collections.emptyList(),dmo);
  assertNotNull(m);
  assertEquals("rule1",m.name);
  assertEquals(1,m.lhs.length);
  IPattern p=m.lhs[0];
  assertTrue(p instanceof FactPattern);
  FactPattern fp=(FactPattern)p;
  assertEquals("Applicant",fp.getFactType());
  assertEquals(1,fp.getConstraintList().getConstraints().length);
  assertTrue(fp.getConstraint(0) instanceof CompositeFieldConstraint);
  CompositeFieldConstraint cfp=(CompositeFieldConstraint)fp.getConstraint(0);
  assertEquals("||",cfp.getCompositeJunctionType());
  assertEquals(2,cfp.getNumberOfConstraints());
  assertTrue(cfp.getConstraint(0) instanceof SingleFieldConstraint);
  assertTrue(cfp.getConstraint(1) instanceof SingleFieldConstraint);
  SingleFieldConstraint sfp1=(SingleFieldConstraint)cfp.getConstraint(0);
  assertEquals("Applicant",sfp1.getFactType());
  assertEquals("age",sfp1.getFieldName());
  assertEquals("<",sfp1.getOperator());
  assertEquals("55",sfp1.getValue());
  assertEquals(BaseSingleFieldConstraint.TYPE_LITERAL,sfp1.getConstraintValueType());
  SingleFieldConstraint sfp2=(SingleFieldConstraint)cfp.getConstraint(1);
  assertEquals("Applicant",sfp2.getFactType());
  assertEquals("age",sfp2.getFieldName());
  assertEquals(">",sfp2.getOperator());
  assertEquals("70",sfp2.getValue());
  assertEquals(BaseSingleFieldConstraint.TYPE_LITERAL,sfp2.getConstraintValueType());
}
