{
  final AccumulateDescr accumDescr=(AccumulateDescr)descr;
  if (!accumDescr.hasValidInput()) {
    return null;
  }
  final RuleConditionBuilder builder=(RuleConditionBuilder)context.getDialect().getBuilder(accumDescr.getInput().getClass());
  final RuleConditionElement source=builder.build(context,accumDescr.getInput());
  if (source == null) {
    return null;
  }
  Map<String,Declaration> declsInScope=context.getDeclarationResolver().getDeclarations(context.getRule());
  Map<String,Class<?>> declCls=DeclarationScopeResolver.getDeclarationClasses(declsInScope);
  Accumulate accumulate=null;
  if (accumDescr.isExternalFunction()) {
    accumulate=buildExternalFunctionCall(context,accumDescr,source,declsInScope,declCls);
  }
 else {
    accumulate=buildInlineAccumulate(context,accumDescr,source,declsInScope,declCls);
  }
  return accumulate;
}
