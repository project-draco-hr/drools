{
  boolean hasChildOr=false;
  ce.pack();
  Object[] children=(Object[])ce.getChildren().toArray();
  for (int i=0; i < children.length; i++) {
    if (children[i] instanceof GroupElement) {
      final GroupElement child=(GroupElement)children[i];
      processTree(child);
      if ((child.isOr() || child.isAnd()) && child.getType() == ce.getType()) {
        child.pack(ce);
      }
 else       if (child.isOr()) {
        hasChildOr=true;
      }
    }
  }
  if (hasChildOr) {
    applyOrTransformation(ce);
  }
}
