{
  final And cloned=(And)and.clone();
  processTree(cloned);
  Or or=null;
  for (final Iterator it=cloned.getChildren().iterator(); it.hasNext(); ) {
    final Object object=it.next();
    if (object instanceof Or) {
      or=(Or)applyOrTransformation(cloned,(GroupElement)object);
      break;
    }
  }
  And[] ands=null;
  if (or == null) {
    ands=new And[]{cloned};
    checkForAndRemoveDuplicates(ands[0]);
  }
 else {
    ands=new And[or.getChildren().size()];
    int i=0;
    for (final Iterator it=or.getChildren().iterator(); it.hasNext(); ) {
      final Object object=it.next();
      if (object.getClass() == And.class) {
        ands[i]=(And)object;
      }
 else {
        final And newAnd=new And();
        newAnd.addChild(and);
        ands[i]=newAnd;
      }
      checkForAndRemoveDuplicates(ands[i++]);
    }
  }
  return ands;
}
