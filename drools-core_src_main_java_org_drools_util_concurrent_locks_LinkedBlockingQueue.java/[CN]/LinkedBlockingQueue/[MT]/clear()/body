{
synchronized (putLock) {
synchronized (takeLock) {
      head.next=null;
      last=head;
      int c;
synchronized (this) {
        c=count;
        count=0;
      }
      if (c == capacity)       putLock.notifyAll();
    }
  }
}
