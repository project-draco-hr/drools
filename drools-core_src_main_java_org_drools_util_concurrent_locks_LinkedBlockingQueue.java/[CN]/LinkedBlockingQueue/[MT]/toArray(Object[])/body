{
synchronized (putLock) {
synchronized (takeLock) {
      int size=count;
      if (a.length < size)       a=(Object[])java.lang.reflect.Array.newInstance(a.getClass().getComponentType(),size);
      int k=0;
      for (Node p=head.next; p != null; p=p.next)       a[k++]=(Object)p.item;
      if (a.length > k)       a[k]=null;
      return a;
    }
  }
}
