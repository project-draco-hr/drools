{
  RulesRepository repo=RepositorySessionUtil.getRepository();
  PackageItem pkg=repo.createPackage("testFindByStatePackage","heheheh");
  AssetItem asset1=pkg.addAsset("asset1","");
  AssetItem asset2=pkg.addAsset("asset2","");
  repo.createState("testFindByState");
  repo.save();
  asset1.updateState("testFindByState");
  asset2.updateState("testFindByState");
  asset1.checkin("");
  asset2.checkin("");
  AssetItemPageResult result=repo.findAssetsByState("testFindByState",true,0,-1);
  assertEquals(2,result.assets.size());
}
