{
  RulesRepository repo=RepositorySessionUtil.getRepository();
  AssetItem item=repo.loadDefaultPackage().addAsset("testShareableNodeOriginal","desc");
  item.updateContent("la");
  item.getNode().addMixin("mix:shareable");
  PackageItem source=repo.createPackage("testShareableNodesPackage","desc");
  repo.save();
  source.checkout();
  Session session=repo.getSession();
  Workspace workspace=session.getWorkspace();
  String path="/drools:repository/drools:package_area/testShareableNodesPackage/assets/testShareableNodeShared";
  workspace.clone(workspace.getName(),item.getNode().getPath(),path,false);
  repo.save();
  byte[] repository_backup;
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  repo.exportRulesRepositoryToStream(bout);
  repository_backup=bout.toByteArray();
  assertNotNull(repository_backup);
  repo.importRulesRepositoryFromStream(new ByteArrayInputStream(repository_backup));
  assertTrue(repo.containsPackage("testShareableNodesPackage"));
  assertTrue(repo.loadPackage("testShareableNodesPackage").containsAsset("testShareableNodeOriginal"));
}
