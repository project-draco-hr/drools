{
  RulesRepository repo=getRepo();
  AssetItem item=repo.loadDefaultPackage().addAsset("testImportExportShareableNodeOriginal","desc");
  item.updateContent("la");
  item.getNode().addMixin("mix:shareable");
  PackageItem source=repo.createPackage("testImportExportShareableNodesPackage","desc");
  repo.save();
  source.checkout();
  Session session=repo.getSession();
  Workspace workspace=session.getWorkspace();
  String path="/drools:repository/drools:package_area/testImportExportShareableNodesPackage/assets/testImportExportShareableNodeShared";
  workspace.clone(workspace.getName(),item.getNode().getPath(),path,false);
  repo.save();
  byte[] repository_backup;
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  repo.exportRulesRepositoryToStream(bout);
  repository_backup=bout.toByteArray();
  assertNotNull(repository_backup);
  repo.importRulesRepositoryFromStream(new ByteArrayInputStream(repository_backup));
  assertTrue(repo.containsPackage("testImportExportShareableNodesPackage"));
  assertTrue(repo.loadPackage("testImportExportShareableNodesPackage").containsAsset("testImportExportShareableNodeOriginal"));
}
