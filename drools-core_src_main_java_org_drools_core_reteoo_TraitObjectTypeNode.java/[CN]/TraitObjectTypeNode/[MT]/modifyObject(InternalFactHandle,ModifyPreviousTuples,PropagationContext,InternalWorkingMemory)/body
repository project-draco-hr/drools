{
  if (dirty) {
    resetIdGenerator();
    updateTupleSinkId(this,this);
    dirty=false;
  }
  context.setObjectType(objectType);
  if (compiledNetwork != null) {
    compiledNetwork.modifyObject(factHandle,modifyPreviousTuples,context.adaptModificationMaskForObjectType(objectType,workingMemory),workingMemory);
  }
 else {
    if (factHandle.getObject() instanceof TraitProxy) {
      TraitProxy proxy=((TraitProxy)factHandle.getObject());
      BitSet vetoMask=proxy.getTypeFilter();
      if (vetoMask == null || typeMask.isEmpty() || !HierarchyEncoderImpl.supersetOrEqualset(vetoMask,this.typeMask)) {
        if (context.getModificationMask().isSet(PropertySpecificUtil.TRAITABLE_BIT)) {
          TraitableBean txBean=(TraitableBean)proxy.getObject();
          TraitTypeMap tMap=(TraitTypeMap)txBean._getTraitMap();
          Collection<Thing> x=tMap.immediateParents(this.typeMask);
          Thing k=x.iterator().next();
          BitMask originalMask=context.getModificationMask();
          if (!k.isTop()) {
            context.setModificationMask(AllSetBitMask.get());
          }
          this.sink.propagateModifyObject(factHandle,modifyPreviousTuples,context.adaptModificationMaskForObjectType(objectType,workingMemory),workingMemory);
          context.setModificationMask(originalMask);
        }
 else {
          this.sink.propagateModifyObject(factHandle,modifyPreviousTuples,context.adaptModificationMaskForObjectType(objectType,workingMemory),workingMemory);
        }
      }
 else {
      }
    }
 else {
      this.sink.propagateModifyObject(factHandle,modifyPreviousTuples,!context.getModificationMask().isSet(PropertySpecificUtil.TRAITABLE_BIT) ? context.adaptModificationMaskForObjectType(objectType,workingMemory) : context,workingMemory);
    }
  }
}
