{
  if (hasKey(getBottomCode())) {
    Thing<C> b=getMember(getBottomCode());
    if (((TraitType)b).isVirtual()) {
      return parents(getBottomCode());
    }
 else {
      return Collections.singleton(b);
    }
  }
 else {
    return immediateParents(getBottomCode());
  }
}
