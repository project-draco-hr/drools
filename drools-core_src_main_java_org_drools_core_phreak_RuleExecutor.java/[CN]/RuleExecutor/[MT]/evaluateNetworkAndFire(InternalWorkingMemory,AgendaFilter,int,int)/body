{
  LinkedList<StackEntry> outerStack=new LinkedList<StackEntry>();
  InternalAgenda agenda=(InternalAgenda)wm.getAgenda();
  boolean fireUntilHalt=agenda.isFireUntilHalt();
  reEvaluateNetwork(wm,outerStack,true);
  wm.executeQueuedActions();
  return fire(wm,filter,fireCount,fireLimit,outerStack,(InternalAgenda)wm.getAgenda());
}
