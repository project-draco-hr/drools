{
  if ((!rule.isEffective(leftTuple,rtn,wm)) || (rule.isNoLoop() && rule.equals(pctx.getRuleOrigin()))) {
    return true;
  }
  if (rule.getCalendars() != null) {
    long timestamp=wm.getSessionClock().getCurrentTime();
    for (    String cal : rule.getCalendars()) {
      if (!wm.getCalendars().get(cal).isTimeIncluded(timestamp)) {
        return true;
      }
    }
  }
  if (filter != null && !filter.accept((Activation)leftTuple)) {
    return true;
  }
  return false;
}
