{
  KnowledgeBuilder kbuilder=null;
  if (!StringUtils.isEmpty(kbaseId)) {
    attachedKnowledgeBase=(KnowledgeBase)context.get(kbaseId);
  }
  if (this.kbuilderConf == null) {
    kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder(this.attachedKnowledgeBase);
  }
 else {
    kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder(this.attachedKnowledgeBase,this.kbuilderConf);
  }
  return kbuilder;
}
