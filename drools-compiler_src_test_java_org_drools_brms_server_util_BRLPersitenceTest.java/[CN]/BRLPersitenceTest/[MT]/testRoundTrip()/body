{
  RuleModel m=getComplexModel();
  String xml=BRLPersistence.getInstance().toXML(m);
  RuleModel m2=BRLPersistence.getInstance().toModel(xml);
  assertNotNull(m2);
  assertEquals(m.name,m2.name);
  assertEquals(m.lhs.length,m2.lhs.length);
  assertEquals(m.rhs.length,m2.rhs.length);
  assertEquals(1,m.attributes.length);
  RuleAttribute at=m.attributes[0];
  assertEquals("no-loop",at.attributeName);
  assertEquals("true",at.value);
  String newXML=BRLPersistence.getInstance().toXML(m2);
  assertEquals(xml,newXML);
}
