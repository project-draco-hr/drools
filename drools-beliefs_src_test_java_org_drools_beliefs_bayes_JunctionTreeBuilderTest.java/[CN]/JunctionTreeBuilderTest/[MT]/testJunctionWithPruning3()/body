{
  Graph<BayesVariable> graph=new BayesNetwork();
  GraphNode x0=addNode(graph);
  GraphNode x1=addNode(graph);
  GraphNode x2=addNode(graph);
  GraphNode x3=addNode(graph);
  GraphNode x4=addNode(graph);
  GraphNode x5=addNode(graph);
  GraphNode x6=addNode(graph);
  GraphNode x7=addNode(graph);
  List<OpenBitSet> list=new ArrayList<OpenBitSet>();
  OpenBitSet OpenBitSet1=bitSet("00001111");
  OpenBitSet OpenBitSet2=bitSet("00011110");
  OpenBitSet OpenBitSet3=bitSet("11100000");
  OpenBitSet OpenBitSet4=bitSet("01100001");
  OpenBitSet intersect1And2=((OpenBitSet)OpenBitSet2.clone());
  intersect1And2.and(OpenBitSet1);
  OpenBitSet intersect2And3=((OpenBitSet)OpenBitSet2.clone());
  intersect2And3.and(OpenBitSet3);
  OpenBitSet intersect1And4=((OpenBitSet)OpenBitSet1.clone());
  intersect1And4.and(OpenBitSet4);
  OpenBitSet intersect3And4=((OpenBitSet)OpenBitSet3.clone());
  intersect3And4.and(OpenBitSet4);
  list.add(OpenBitSet1);
  list.add(OpenBitSet2);
  list.add(OpenBitSet3);
  list.add(OpenBitSet4);
  JunctionTreeBuilder jtBuilder=new JunctionTreeBuilder(graph);
  JunctionTreeClique jtNode=jtBuilder.junctionTree(list,false).getRoot();
  ;
  JunctionTreeClique root=jtNode;
  assertEquals(OpenBitSet1,root.getBitSet());
  assertEquals(2,root.getChildren().size());
  JunctionTreeSeparator sep=root.getChildren().get(0);
  assertEquals(OpenBitSet1,sep.getParent().getBitSet());
  assertEquals(OpenBitSet2,sep.getChild().getBitSet());
  assertEquals(0,sep.getChild().getChildren().size());
  sep=root.getChildren().get(1);
  assertEquals(OpenBitSet1,sep.getParent().getBitSet());
  assertEquals(OpenBitSet4,sep.getChild().getBitSet());
  assertEquals(intersect1And4,sep.getBitSet());
  assertEquals(1,sep.getChild().getChildren().size());
  jtNode=sep.getChild();
  assertEquals(OpenBitSet4,jtNode.getBitSet());
  assertEquals(1,jtNode.getChildren().size());
  sep=jtNode.getChildren().get(0);
  assertEquals(OpenBitSet4,sep.getParent().getBitSet());
  assertEquals(OpenBitSet3,sep.getChild().getBitSet());
  assertEquals(intersect3And4,sep.getBitSet());
  assertEquals(0,sep.getChild().getChildren().size());
}
