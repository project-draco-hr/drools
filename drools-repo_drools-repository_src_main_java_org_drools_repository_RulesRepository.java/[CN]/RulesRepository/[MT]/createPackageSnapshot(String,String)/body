{
  log.debug("Creating snapshot for [" + packageName + "] called ["+ snapshotName+ "]");
  try {
    Node snaps=this.getAreaNode(PACKAGE_SNAPSHOT_AREA);
    if (!snaps.hasNode(packageName)) {
      snaps.addNode(packageName,"nt:folder");
      save();
    }
    Node pkgSnaps=snaps.getNode(packageName);
    String newName=pkgSnaps.getPath() + "/" + snapshotName;
    Node folderNode=this.getAreaNode(RULE_PACKAGE_AREA);
    Node rulePackageNode=folderNode.getNode(packageName);
    String source=rulePackageNode.getPath();
    long start=System.currentTimeMillis();
    this.session.getWorkspace().copy(source,newName);
    log.debug("Time taken for snap: " + (System.currentTimeMillis() - start));
  }
 catch (  RepositoryException e) {
    log.error("Unable to create snapshot",e);
    throw new RulesRepositoryException(e);
  }
}
