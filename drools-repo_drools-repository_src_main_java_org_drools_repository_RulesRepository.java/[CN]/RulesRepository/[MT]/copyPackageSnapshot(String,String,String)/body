{
  log.debug("Creating snapshot for [" + packageName + "] called ["+ snapshotName+ "]");
  try {
    Node snaps=this.getAreaNode(PACKAGE_SNAPSHOT_AREA);
    Node pkgSnaps=snaps.getNode(packageName);
    Node sourceNode=pkgSnaps.getNode(snapshotName);
    if (pkgSnaps.hasNode(newName)) {
      pkgSnaps.getNode(newName).remove();
      this.session.save();
    }
    String destinationPath=pkgSnaps.getPath() + "/" + newName;
    this.session.getWorkspace().copy(sourceNode.getPath(),destinationPath);
  }
 catch (  RepositoryException e) {
    log.error("Unable to create snapshot",e);
    throw new RulesRepositoryException(e);
  }
}
