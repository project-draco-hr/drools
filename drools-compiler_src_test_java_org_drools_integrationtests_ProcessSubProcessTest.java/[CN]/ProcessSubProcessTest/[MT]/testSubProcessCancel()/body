{
  RuleBase ruleBase=readRule(true);
  WorkingMemory workingMemory=ruleBase.newStatefulSession();
  org.drools.process.instance.ProcessInstance processInstance=(org.drools.process.instance.ProcessInstance)workingMemory.startProcess("com.sample.ruleflow");
  assertEquals(ProcessInstance.STATE_ACTIVE,processInstance.getState());
  assertEquals(2,workingMemory.getProcessInstances().size());
  processInstance.setState(ProcessInstance.STATE_ABORTED);
  assertEquals(1,workingMemory.getProcessInstances().size());
}
