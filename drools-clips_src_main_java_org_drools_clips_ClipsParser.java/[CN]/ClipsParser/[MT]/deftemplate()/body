{
  TypeDeclarationDescr typeDescr=null;
  Token loc=null;
  Token deftemplateName=null;
  Token documentation=null;
  Token slotName=null;
  Token slotType=null;
  try {
{
      loc=(Token)input.LT(1);
      match(input,LEFT_PAREN,FOLLOW_LEFT_PAREN_in_deftemplate1598);
      if (failed)       return typeDescr;
      match(input,DEFTEMPLATE,FOLLOW_DEFTEMPLATE_in_deftemplate1605);
      if (failed)       return typeDescr;
      deftemplateName=(Token)input.LT(1);
      match(input,NAME,FOLLOW_NAME_in_deftemplate1609);
      if (failed)       return typeDescr;
      if (backtracking == 0) {
        debug("start rule: " + deftemplateName.getText());
        String templateStr=deftemplateName.getText();
        String mod=null;
        if (templateStr.indexOf("::") >= 0) {
          mod=templateStr.substring(0,templateStr.indexOf("::"));
          templateStr=templateStr.substring(templateStr.indexOf("::") + 2);
        }
        typeDescr=new TypeDeclarationDescr(templateStr);
        if (mod != null) {
          typeDescr.setNamespace(mod);
        }
        typeDescr.setLocation(offset(loc.getLine()),loc.getCharPositionInLine());
        typeDescr.setStartCharacter(((CommonToken)loc).getStartIndex());
      }
      documentation=(Token)input.LT(1);
      match(input,STRING,FOLLOW_STRING_in_deftemplate1620);
      if (failed)       return typeDescr;
      if (backtracking == 0) {
      }
      match(input,LEFT_PAREN,FOLLOW_LEFT_PAREN_in_deftemplate1634);
      if (failed)       return typeDescr;
      match(input,SLOT,FOLLOW_SLOT_in_deftemplate1646);
      if (failed)       return typeDescr;
      slotName=(Token)input.LT(1);
      match(input,NAME,FOLLOW_NAME_in_deftemplate1650);
      if (failed)       return typeDescr;
      match(input,LEFT_PAREN,FOLLOW_LEFT_PAREN_in_deftemplate1660);
      if (failed)       return typeDescr;
      match(input,48,FOLLOW_48_in_deftemplate1676);
      if (failed)       return typeDescr;
      slotType=(Token)input.LT(1);
      match(input,NAME,FOLLOW_NAME_in_deftemplate1680);
      if (failed)       return typeDescr;
      if (backtracking == 0) {
        typeDescr.addField(new TypeFieldDescr(slotName.getText(),new PatternDescr(slotType.getText())));
      }
      match(input,RIGHT_PAREN,FOLLOW_RIGHT_PAREN_in_deftemplate1700);
      if (failed)       return typeDescr;
      match(input,RIGHT_PAREN,FOLLOW_RIGHT_PAREN_in_deftemplate1707);
      if (failed)       return typeDescr;
      match(input,RIGHT_PAREN,FOLLOW_RIGHT_PAREN_in_deftemplate1720);
      if (failed)       return typeDescr;
    }
  }
 catch (  RecognitionException re) {
    reportError(re);
    recover(input,re);
  }
 finally {
  }
  return typeDescr;
}
