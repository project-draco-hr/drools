{
  String str="";
  str+="package org.simple \n";
  str+="import " + Person.class.getCanonicalName() + "\n";
  str+="import " + Cheese.class.getCanonicalName() + "\n";
  str+="import " + Cat.class.getCanonicalName() + "\n";
  str+="global java.util.List list \n";
  str+="rule x1 \n";
  str+="when \n";
  str+="    $pe : Person() \n";
  str+="    $ch : Cheese() \n";
  str+="    $ca : Cat() \n";
  str+="then \n";
  str+="end  \n";
  str+="rule x2 \n";
  str+="when \n";
  str+="    $ch : Cheese() \n";
  str+="    $ca : Cat() \n";
  str+="    $pe : Person() \n";
  str+="then \n";
  str+="end  \n";
  str+="rule x3 \n";
  str+="when \n";
  str+="    $ch : Cheese() \n";
  str+="then \n";
  str+="end  \n";
  str+="rule x4 \n";
  str+="when \n";
  str+="    $ch : Cheese() \n";
  str+="    eval( $ch != null ) \n";
  str+="then \n";
  str+="end  \n";
  KnowledgeBase kbase=loadKnowledgeBaseFromString(str);
  StatefulKnowledgeSession wm=kbase.newStatefulKnowledgeSession();
  ObjectTypeNode otnPerson=getObjectTypeNode(kbase,"Person");
  ObjectTypeNode otnCheese=getObjectTypeNode(kbase,"Cheese");
  ObjectTypeNode otnCat=getObjectTypeNode(kbase,"Cat");
  assertEquals(0,otnPerson.getOtnIdCounter());
  assertEquals(0,otnCheese.getOtnIdCounter());
  assertEquals(0,otnCat.getOtnIdCounter());
  wm.insert(new Person());
  wm.insert(new Cat("yyy"));
  wm.insert(new Cheese());
  assertEquals(2,otnPerson.getOtnIdCounter());
  assertEquals(4,otnCheese.getOtnIdCounter());
  assertEquals(2,otnCat.getOtnIdCounter());
}
