{
  if (context == null || context.getLastBuiltPatterns() == null) {
    rightDeclaredMask=Long.MAX_VALUE;
    super.initDeclaredMask(context,leftInput);
    return;
  }
  if (!(rightInput instanceof RightInputAdapterNode)) {
    Pattern pattern=context.getLastBuiltPatterns()[0];
    ObjectType objectType=pattern.getObjectType();
    if (!(objectType instanceof ClassObjectType)) {
      rightDeclaredMask=Long.MAX_VALUE;
    }
    Class objectClass=((ClassObjectType)objectType).getClassType();
    TypeDeclaration typeDeclaration=context.getRuleBase().getTypeDeclaration(objectClass);
    if (typeDeclaration == null || !typeDeclaration.isPropertySpecific()) {
      rightDeclaredMask=Long.MAX_VALUE;
    }
 else {
      List<String> settableProperties=getSettableProperties(context.getRuleBase(),objectClass);
      rightDeclaredMask=calculatePositiveMask(pattern.getListenedProperties(),settableProperties);
      rightDeclaredMask|=constraints.getListenedPropertyMask(settableProperties);
      rightNegativeMask=calculateNegativeMask(pattern.getListenedProperties(),settableProperties);
    }
  }
 else {
    rightDeclaredMask=Long.MAX_VALUE;
    context.setLastBuiltPattern(context.getLastBuiltPatterns()[0]);
  }
  super.initDeclaredMask(context,leftInput);
}
