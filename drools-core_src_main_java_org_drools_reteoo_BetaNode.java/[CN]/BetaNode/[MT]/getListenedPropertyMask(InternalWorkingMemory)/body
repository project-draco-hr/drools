{
  if (listenedPropertyMask >= 0) {
    return listenedPropertyMask;
  }
  if (listenedProperties != null && listenedProperties.size() == 0 && listenedProperties.equals("*")) {
    setListenedPropertyMask(Long.MAX_VALUE);
    return Long.MAX_VALUE;
  }
  List<String> settableProperties=getSettableProperties(workingMemory);
  long mask=0L;
  if (listenedProperties != null && listenedProperties.contains("*")) {
    mask=Long.MAX_VALUE;
  }
 else   if (listenedProperties == null || !listenedProperties.contains("!*")) {
    mask=inferListenedMask(settableProperties);
  }
  mask=calculateListenedMaskFromPattern(mask,settableProperties);
  setListenedPropertyMask(mask);
  return mask >= 0 ? mask : Long.MAX_VALUE;
}
