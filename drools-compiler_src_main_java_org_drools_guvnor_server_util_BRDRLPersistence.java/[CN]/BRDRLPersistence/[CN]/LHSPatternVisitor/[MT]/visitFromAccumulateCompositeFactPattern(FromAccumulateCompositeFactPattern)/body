{
  buf.append("\t\t");
  if (isDSLEnhanced) {
    buf.append(">");
  }
  if (pattern.getFactPattern() != null) {
    generateFactPattern(pattern.getFactPattern());
  }
  buf.append(" from accumulate ( ");
  if (pattern.getSourcePattern() != null) {
    if (pattern.getSourcePattern() instanceof FactPattern) {
      generateFactPattern((FactPattern)pattern.getSourcePattern());
    }
 else     if (pattern.getSourcePattern() instanceof FromAccumulateCompositeFactPattern) {
      visitFromAccumulateCompositeFactPattern((FromAccumulateCompositeFactPattern)pattern.getSourcePattern());
    }
 else     if (pattern.getSourcePattern() instanceof FromCollectCompositeFactPattern) {
      visitFromCollectCompositeFactPattern((FromCollectCompositeFactPattern)pattern.getSourcePattern());
    }
 else     if (pattern.getSourcePattern() instanceof FromCompositeFactPattern) {
      visitFromCompositeFactPattern((FromCompositeFactPattern)pattern.getSourcePattern());
    }
 else {
      throw new IllegalArgumentException("Unuported pattern " + pattern.getSourcePattern() + " for FROM ACCUMULATE");
    }
  }
  buf.append(",\n");
  if (pattern.useFunctionOrCode().equals(FromAccumulateCompositeFactPattern.USE_FUNCTION)) {
    buf.append("\t\t\t");
    buf.append(pattern.getFunction());
  }
 else {
    buf.append("\t\t\tinit( ");
    buf.append(pattern.getInitCode());
    buf.append(" ),\n");
    buf.append("\t\t\taction( ");
    buf.append(pattern.getActionCode());
    buf.append(" ),\n");
    if (pattern.getReverseCode() != null && !pattern.getReverseCode().trim().equals("")) {
      buf.append("\t\t\treverse( ");
      buf.append(pattern.getReverseCode());
      buf.append(" ),\n");
    }
    buf.append("\t\t\tresult( ");
    buf.append(pattern.getResultCode());
    buf.append(" )\n");
  }
  buf.append(") \n");
}
