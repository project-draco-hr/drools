{
  if (constr.constraintValueType == ISingleFieldConstraint.TYPE_PREDICATE) {
    buf.append("eval( ");
    buf.append(constr.value);
    buf.append(" )");
  }
 else {
    if (constr.fieldBinding != null) {
      buf.append(constr.fieldBinding);
      buf.append(" : ");
    }
    if ((constr.operator != null && constr.value != null) || constr.fieldBinding != null || constr.constraintValueType == ISingleFieldConstraint.TYPE_EXPR_BUILDER) {
      SingleFieldConstraint parent=(SingleFieldConstraint)constr.parent;
      StringBuilder parentBuf=new StringBuilder();
      while (parent != null) {
        parentBuf.insert(0,parent.fieldName + ".");
        parent=(SingleFieldConstraint)parent.parent;
      }
      buf.append(parentBuf);
      buf.append(constr.fieldName);
    }
    addFieldRestriction(buf,constr.constraintValueType,constr.operator,constr.value,constr.getExpression());
    if (constr.connectives != null) {
      for (int j=0; j < constr.connectives.length; j++) {
        final ConnectiveConstraint conn=constr.connectives[j];
        addFieldRestriction(buf,conn.constraintValueType,conn.operator,conn.value,null);
      }
    }
  }
}
