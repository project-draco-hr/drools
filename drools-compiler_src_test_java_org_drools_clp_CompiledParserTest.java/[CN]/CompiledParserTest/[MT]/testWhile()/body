{
  BlockExecutionEngine engine=(BlockExecutionEngine)parse("(while (< ?x ?y) do (bind ?x (+ ?x 1) ) )").rhs();
  ExecutionContext context=new ExecutionContext(null,null,2);
  Map vars=new HashMap();
  vars.put("?x",new LocalVariableValue("?x",0));
  vars.put("?y",new LocalVariableValue("?y",1));
  engine.replaceTempTokens(vars);
  context.setLocalVariable(0,new Long(0));
  context.setLocalVariable(1,new Long(10));
  engine.execute(context);
  assertEquals(new BigDecimal(10),context.getLocalVariable(0));
}
