{
  BlockExecutionEngine engine=(BlockExecutionEngine)parse("(if (< ?x ?y ) then (modify ?p (age 15) ) else (modify ?p (age 5)))").rhs();
  ExecutionContext context=new ExecutionContext(null,null,2);
  Person p=new Person("mark");
  Map vars=new HashMap();
  vars.put("?x",new LongLiteralValue(10));
  vars.put("?y",new LocalVariableValue("?y",0));
  vars.put("?p",new ObjectLiteralValue(p));
  engine.replaceTempTokens(vars);
  context.setLocalVariable(0,new Long(20));
  engine.execute(context);
  assertEquals(15,p.getAge());
  context.setLocalVariable(0,new Long(7));
  engine.execute(context);
  assertEquals(5,p.getAge());
}
