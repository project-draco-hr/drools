{
  File file=new File(rootFolder,KnowledgeContainerImpl.KPROJECT_RELATIVE_PATH);
  if (!recreate && file.exists()) {
    return;
  }
  KieProjectImpl kproj=new KieProjectImpl();
  for (  File kBaseFolder : sourceFolder.listFiles()) {
    String kBaseName=kBaseFolder.getName();
    kproj.newKieBaseModel(kBaseName).newKieSessionModel(kBaseName + ".session").setType("stateful");
  }
  BufferedWriter output=null;
  try {
    file.getParentFile().mkdirs();
    output=new BufferedWriter(new FileWriter(file));
    output.write(kproj.toXML());
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
 finally {
    if (output != null) {
      try {
        output.close();
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
  }
}
