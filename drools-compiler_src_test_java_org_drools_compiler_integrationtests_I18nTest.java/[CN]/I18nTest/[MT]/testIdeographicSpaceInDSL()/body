{
  String dsl="// Testing 'IDEOGRAPHIC SPACE' (U+3000)\n" + "[when]????????? {firstName}=Person(name==\"?????????{firstName}\")\n" + "[then]??????????????? {message}=messages.add(\"??????????????????\" + {message});";
  String dslr="package test\n" + "\n" + "import org.drools.compiler.Person\n"+ "\n"+ "expander test_I18n.dsl\n"+ "\n"+ "global java.util.List messages;\n"+ "\n"+ "rule \"IDEOGRAPHIC SPACE test\"\n"+ "    when\n"+ "        // Person(name==\"???????????????\")\n"+ "        ????????? ??????\n"+ "    then\n"+ "        // messages.add(\"???????????????????????????????????????????????????\");\n"+ "         ??????????????? \"?????????????????????????????????\"\n"+ "end";
  KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.add(ResourceFactory.newByteArrayResource(dsl.getBytes()),ResourceType.DSL);
  kbuilder.add(ResourceFactory.newByteArrayResource(dslr.getBytes()),ResourceType.DSLR);
  if (kbuilder.hasErrors()) {
    fail(kbuilder.getErrors().toString());
  }
  KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase();
  kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());
  StatefulKnowledgeSession ksession=createKnowledgeSession(kbase);
  List messages=new ArrayList();
  ksession.setGlobal("messages",messages);
  Person person=new Person();
  person.setName("???????????????");
  ksession.insert(person);
  ksession.fireAllRules();
  assertTrue(messages.contains("???????????????????????????????????????????????????"));
  ksession.dispose();
}
