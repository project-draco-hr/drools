{
  if (value == null || value.isEmpty()) {
    return new JaxbStringObjectPair[0];
  }
  List<JaxbStringObjectPair> ret=new ArrayList<JaxbStringObjectPair>(value.size());
  for (  Map.Entry<String,Object> entry : value.entrySet()) {
    Object obj=entry.getValue();
    Class<? extends Object> vClass=obj.getClass();
    if (obj instanceof QueryResultsImpl) {
      obj=new FlatQueryResults((QueryResultsImpl)obj);
    }
 else     if (!JaxbListWrapper.class.equals(vClass)) {
      obj=unknownAdapter.marshal(obj);
    }
    ret.add(new JaxbStringObjectPair(entry.getKey(),obj));
  }
  return ret.toArray(new JaxbStringObjectPair[value.size()]);
}
