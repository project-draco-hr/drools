{
  final XStream stream=new XStream();
  stream.setMode(XStream.ID_REFERENCES);
  final ClassLoader oldLoader=Thread.currentThread().getContextClassLoader();
  final ClassLoader newLoader=this.getClass().getClassLoader();
  try {
    Thread.currentThread().setContextClassLoader(newLoader);
    final RuleFlowProcess process=(RuleFlowProcess)stream.fromXML(reader);
    buildProcess(process);
  }
  finally {
    Thread.currentThread().setContextClassLoader(oldLoader);
  }
  reader.close();
}
