{
  try {
    KnowledgeBase knowledgeBase=readRule();
    StatefulKnowledgeSession ksession=knowledgeBase.newStatefulKnowledgeSession();
    WorkItemHandler handler=new WorkItemHandler(){
      public void executeWorkItem(      WorkItem workItem,      WorkItemManager manager){
        System.out.println("Executing work item " + workItem);
        manager.completeWorkItem(workItem.getId(),null);
      }
      public void abortWorkItem(      WorkItem workItem,      WorkItemManager manager){
      }
    }
;
    ksession.getWorkItemManager().registerWorkItemHandler("Email",handler);
    ksession.getWorkItemManager().registerWorkItemHandler("Log",handler);
    ksession.startProcess("com.sample.ruleflow");
    ksession.fireAllRules();
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
