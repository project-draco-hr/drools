{
  while (factory != null && !(factory instanceof DroolsVarFactory)) {
    factory=factory.getNextFactory();
  }
  if (factory == null) {
    throw new RuntimeException("Unable to find DroolsMVELIndexedFactory");
  }
  if (modificationMask < 0) {
    calculateModificationMask((WithNode)node);
  }
  ((DroolsVarFactory)factory).getKnowledgeHelper().update(value,modificationMask);
  return 0;
}
