{
  if (!systemId.toLowerCase().endsWith("xsd")) {
    return null;
  }
  try {
    final URL url=new URL(systemId);
    return new InputSource(url.openStream());
  }
 catch (  final Exception e) {
  }
  String xsd;
  int index=systemId.lastIndexOf("/");
  if (index == -1) {
    index=systemId.lastIndexOf("\\");
  }
  if (index != -1) {
    xsd=systemId.substring(index + 1);
  }
 else {
    xsd=systemId;
  }
  ClassLoader cl=Thread.currentThread().getContextClassLoader();
  if (cl == null) {
    cl=XmlPackageReader.class.getClassLoader();
  }
{
    final InputStream is=cl.getResourceAsStream("META-INF/" + xsd);
    if (is != null) {
      return new InputSource(is);
    }
  }
{
    final InputStream is=cl.getResourceAsStream("/META-INF/" + xsd);
    if (is != null) {
      return new InputSource(is);
    }
  }
{
    final InputStream is=cl.getResourceAsStream("/" + xsd);
    if (is != null) {
      return new InputSource(is);
    }
  }
{
    final File file=new File(xsd);
    if (file.exists()) {
      return new InputSource(new BufferedInputStream(new FileInputStream(file)));
    }
  }
  cl=ClassLoader.getSystemClassLoader();
{
    final InputStream is=cl.getResourceAsStream("META-INF/" + xsd);
    if (is != null) {
      return new InputSource(is);
    }
  }
{
    final InputStream is=cl.getResourceAsStream("/META-INF/" + xsd);
    if (is != null) {
      return new InputSource(is);
    }
  }
{
    final InputStream is=cl.getResourceAsStream("/" + xsd);
    if (is != null) {
      return new InputSource(is);
    }
  }
  return null;
}
