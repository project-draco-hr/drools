{
  RuleBase ruleBase=getRuleBase();
  StatefulSession session=ruleBase.newStatefulSession();
  final Cheese a=new Cheese("stilton",10);
  final Cheese b=new Cheese("stilton",15);
  final Cheese c=new Cheese("stilton",20);
  session.insert(a);
  session.insert(b);
  session.insert(c);
  final PackageBuilder builder=new PackageBuilder();
  builder.addPackageFromDrl(new InputStreamReader(getClass().getResourceAsStream("test_DynamicRules.drl")));
  final Package pkg=builder.getPackage();
  ruleBase.addPackage(SerializationHelper.serializeObject(pkg));
  ruleBase=SerializationHelper.serializeObject(ruleBase);
  session=SerializationHelper.getSerialisedStatefulSession(session,ruleBase);
  session.fireAllRules();
}
