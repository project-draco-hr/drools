{
  RuleFlowProcess process=new RuleFlowProcess();
  process.setId("org.drools.test.TestProcess");
  process.setName("TestProcess");
  process.setPackageName("org.drools.test");
  StartNode start=new StartNode();
  start.setId(1);
  start.setName("Start");
  process.addNode(start);
  ActionNode actionNode=new ActionNode();
  actionNode.setId(2);
  actionNode.setName("Action");
  DroolsConsequenceAction action=new DroolsConsequenceAction();
  action.setDialect("java");
  action.setConsequence("System.out.println(\"Executed action\");");
  actionNode.setAction(action);
  process.addNode(actionNode);
  new ConnectionImpl(start,Node.CONNECTION_DEFAULT_TYPE,actionNode,Node.CONNECTION_DEFAULT_TYPE);
  WorkItemNode workItemNode=new WorkItemNode();
  workItemNode.setId(3);
  workItemNode.setName("WorkItem1");
  Work work=new WorkImpl();
  work.setName("MyWork");
  workItemNode.setWork(work);
  process.addNode(workItemNode);
  new ConnectionImpl(actionNode,Node.CONNECTION_DEFAULT_TYPE,workItemNode,Node.CONNECTION_DEFAULT_TYPE);
  WorkItemNode workItemNode2=new WorkItemNode();
  workItemNode2.setId(4);
  workItemNode2.setName("WorkItem2");
  work=new WorkImpl();
  work.setName("MyWork");
  workItemNode2.setWork(work);
  process.addNode(workItemNode2);
  new ConnectionImpl(workItemNode,Node.CONNECTION_DEFAULT_TYPE,workItemNode2,Node.CONNECTION_DEFAULT_TYPE);
  WorkItemNode workItemNode3=new WorkItemNode();
  workItemNode3.setId(5);
  workItemNode3.setName("WorkItem3");
  work=new WorkImpl();
  work.setName("MyWork");
  workItemNode3.setWork(work);
  process.addNode(workItemNode3);
  new ConnectionImpl(workItemNode2,Node.CONNECTION_DEFAULT_TYPE,workItemNode3,Node.CONNECTION_DEFAULT_TYPE);
  EndNode end=new EndNode();
  end.setId(6);
  end.setName("End");
  process.addNode(end);
  new ConnectionImpl(workItemNode3,Node.CONNECTION_DEFAULT_TYPE,end,Node.CONNECTION_DEFAULT_TYPE);
  PackageBuilder packageBuilder=new PackageBuilder();
  ProcessBuilder processBuilder=new ProcessBuilder(packageBuilder);
  processBuilder.buildProcess(process,null);
  List<KnowledgePackage> list=new ArrayList<KnowledgePackage>();
  list.add(new KnowledgePackageImp(packageBuilder.getPackage()));
  return list;
}
