{
  AnalyticsData data=AnalyticsDataFactory.getAnalyticsData();
  File sourceFolder=new File(path + UrlFactory.SOURCE_FOLDER);
  sourceFolder.mkdir();
  writeToFile(path + UrlFactory.SOURCE_FOLDER + File.separator+ UrlFactory.HTML_FILE_INDEX,ComponentsReportVisitor.visitObjectTypeCollection(data.getAllClasses()));
  writeToFile(path + UrlFactory.SOURCE_FOLDER + File.separator+ UrlFactory.HTML_FILE_PACKAGES,ComponentsReportVisitor.visitRulePackageCollection(data.getAllRulePackages()));
  String ruleFolder=path + UrlFactory.SOURCE_FOLDER + File.separator+ UrlFactory.RULE_FOLDER;
  File rulesFolder=new File(ruleFolder);
  rulesFolder.mkdir();
  for (  AnalyticsRule rule : data.getAllRules()) {
    writeToFile(ruleFolder + File.separator + rule.getId()+ ".htm",ComponentsReportVisitor.visitRule(rule));
  }
  String objectTypeFolder=path + UrlFactory.SOURCE_FOLDER + File.separator+ UrlFactory.OBJECT_TYPE_FOLDER;
  File objectTypesFolder=new File(objectTypeFolder);
  objectTypesFolder.mkdir();
  for (  AnalyticsClass objectType : data.getAllClasses()) {
    writeToFile(objectTypeFolder + File.separator + objectType.getId()+ ".htm",ComponentsReportVisitor.visitObjectType(objectType));
  }
  String fieldFolder=path + UrlFactory.SOURCE_FOLDER + File.separator+ UrlFactory.FIELD_FOLDER;
  File fieldsFolder=new File(fieldFolder);
  fieldsFolder.mkdir();
  for (  Field field : data.getAllFields()) {
    writeToFile(fieldFolder + File.separator + field.getId()+ ".htm",ComponentsReportVisitor.visitField(field));
  }
  Collection<RangeCheckCause> rangeCheckCauses=data.getRangeCheckCauses();
  writeToFile(path + UrlFactory.SOURCE_FOLDER + File.separator+ UrlFactory.HTML_FILE_GAPS,MissingRangesReportVisitor.visitRangeCheckCauseCollection(rangeCheckCauses));
  String cssFolder=path + UrlFactory.SOURCE_FOLDER + File.separator+ UrlFactory.CSS_FOLDER;
  File cssesFolder=new File(cssFolder);
  cssesFolder.mkdir();
  writeToFile(cssFolder + File.separator + UrlFactory.CSS_FILE_DETAILS,ComponentsReportVisitor.getCss(UrlFactory.CSS_FILE_DETAILS));
  writeToFile(cssFolder + File.separator + UrlFactory.CSS_FILE_LIST,ComponentsReportVisitor.getCss(UrlFactory.CSS_FILE_LIST));
  String imagesFolder=path + UrlFactory.SOURCE_FOLDER + File.separator+ UrlFactory.IMAGES_FOLDER;
  File imgsFolder=new File(imagesFolder);
  imgsFolder.mkdir();
  try {
    copyFile(imagesFolder,"hdrlogo_drools50px.gif");
    copyFile(imagesFolder,"jbossrules_hdrbkg_blue.gif");
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
}
