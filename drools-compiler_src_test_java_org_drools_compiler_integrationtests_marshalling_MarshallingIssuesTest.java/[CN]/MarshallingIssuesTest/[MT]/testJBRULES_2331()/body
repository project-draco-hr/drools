{
  String source="package test.drl\n";
  source+="rule dummy_rule\n";
  source+="when\n";
  source+="eval( false )\n";
  source+="then\n";
  source+="end\n";
  Reader reader=new StringReader(source);
  KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.add(ResourceFactory.newReaderResource(reader),ResourceType.DRL);
  assertFalse(kbuilder.getErrors().toString(),kbuilder.hasErrors());
  KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase();
  kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());
  StatefulKnowledgeSession ksession=kbase.newStatefulKnowledgeSession();
  ksession=org.drools.compiler.integrationtests.SerializationHelper.getSerialisedStatefulKnowledgeSession(ksession,true);
  assertNotNull(ksession);
  ksession.dispose();
}
