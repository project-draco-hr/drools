{
  RightTuple rightTuple=modifyPreviousTuples.peekRightTuple();
  while (rightTuple != null && ((BetaNode)rightTuple.getRightTupleSink()).getRightInputOtnId().before(getRightInputOtnId())) {
    modifyPreviousTuples.removeRightTuple();
    rightTuple.setPropagationContext(context);
    BetaMemory bm=getBetaMemory((BetaNode)rightTuple.getRightTupleSink(),wm);
    ((BetaNode)rightTuple.getRightTupleSink()).doDeleteRightTuple(rightTuple,wm,bm);
    rightTuple=modifyPreviousTuples.peekRightTuple();
  }
  if (rightTuple != null && ((BetaNode)rightTuple.getRightTupleSink()).getRightInputOtnId().equals(getRightInputOtnId())) {
    modifyPreviousTuples.removeRightTuple();
    rightTuple.reAdd();
    if (rightTuple.getStagedType() != LeftTuple.INSERT) {
      rightTuple.setPropagationContext(context);
    }
    if (intersect(context.getModificationMask(),getRightInferredMask())) {
      BetaMemory bm=getBetaMemory(this,wm);
      rightTuple.setPropagationContext(context);
      doUpdateRightTuple(rightTuple,wm,bm);
    }
  }
 else {
    if (intersect(context.getModificationMask(),getRightInferredMask())) {
      assertObject(factHandle,context,wm);
    }
  }
}
