{
  final Rete source=this.kBase.getRete();
  final ClassObjectType cot=new ClassObjectType(object.getClass());
  final Map<ObjectType,ObjectTypeNode> map=source.getObjectTypeNodes(EntryPointId.DEFAULT);
  final ObjectTypeNode node=map.get(cot);
  final ObjectHashSet memory=((ObjectTypeNodeMemory)this.wm.getNodeMemory(node)).memory;
  org.drools.core.util.Iterator it=memory.iterator();
  for (Object obj=it.next(); obj != null; obj=it.next()) {
    org.drools.core.util.ObjectHashSet.ObjectEntry holder=(org.drools.core.util.ObjectHashSet.ObjectEntry)obj;
    InternalFactHandle handle=(InternalFactHandle)holder.getValue();
    if (handle != null && handle.getEqualityKey() == null) {
      EqualityKey key=new EqualityKey(handle);
      handle.setEqualityKey(key);
      key.setStatus(EqualityKey.STATED);
      getTruthMaintenanceSystem().put(key);
    }
  }
  conf.enableTMS();
}
