{
  TemplateRegistry registry=getRuleTemplateRegistry(context.getPackageBuilder().getRootClassLoader());
  context.getMethods().add(TemplateRuntime.execute(registry.getNamedTemplate(ruleTemplate),null,new MapVariableResolverFactory(vars),registry));
  registry=getInvokerTemplateRegistry(context.getPackageBuilder().getRootClassLoader());
  final String invokerClassName=context.getPkg().getName() + "." + context.getRuleDescr().getClassName()+ StringUtils.ucFirst(className)+ "Invoker";
  context.getInvokers().put(invokerClassName,TemplateRuntime.execute(registry.getNamedTemplate(invokerTemplate),null,new MapVariableResolverFactory(vars),registry));
  context.getInvokerLookups().put(invokerClassName,invokerLookup);
  context.getDescrLookups().put(invokerClassName,descrLookup);
}
