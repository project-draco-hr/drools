{
  RuleSetDef def=new RuleSetDef("with functions",null);
  def.addFunction(new FunctionDef("abc","123"));
  RepositoryManager repo=getRepo();
  repo.save(def);
  def=repo.loadRuleSet("with functions",1);
  FunctionDef func=(FunctionDef)def.getFunctions().iterator().next();
  assertEquals("abc",func.getFunctionContent());
  func.setFunctionContent("xyz");
  def.modify(func);
  Long id=func.getId();
  repo.save(def);
  def=repo.loadRuleSet("with functions",1);
  func=(FunctionDef)def.getFunctions().iterator().next();
  assertEquals(id,func.getId());
  assertEquals("xyz",func.getFunctionContent());
}
