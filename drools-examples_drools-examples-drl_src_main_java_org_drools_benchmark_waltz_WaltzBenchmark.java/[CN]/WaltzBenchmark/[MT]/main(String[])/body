{
  KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.add(ResourceFactory.newClassPathResource("waltz.drl",WaltzBenchmark.class),KnowledgeType.DRL);
  Collection<KnowledgePackage> pkgs=kbuilder.getKnowledgePackages();
  final KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase();
  kbase.addKnowledgePackages(pkgs);
  StatefulKnowledgeSession session=kbase.newStatefulKnowledgeSession();
  String filename;
  if (args.length != 0) {
    String arg=args[0];
    filename=arg;
  }
 else {
    filename="waltz12.dat";
  }
  loadLines(session,filename);
  Stage stage=new Stage(Stage.DUPLICATE);
  session.insert(stage);
  long start=System.currentTimeMillis();
  session.setGlobal("time",start);
  session.fireAllRules();
  System.out.println((System.currentTimeMillis() - start) / 1000);
  session.dispose();
}
