{
  KnowledgeBuilder builder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  builder.addResource(new InputStreamReader(WaltzBenchmark.class.getResourceAsStream("waltz.drl")),KnowledgeType.DRL);
  Collection<KnowledgePackage> pkgs=builder.getKnowledgePackages();
  KnowledgeBaseConfiguration conf=KnowledgeBaseFactory.newKnowledgeBaseConfiguration();
  final KnowledgeBase knowledgeBase=KnowledgeBaseFactory.newKnowledgeBase(conf);
  knowledgeBase.addKnowledgePackages(pkgs);
  StatefulKnowledgeSession session=knowledgeBase.newStatefulKnowledgeSession();
  String filename;
  if (args.length != 0) {
    String arg=args[0];
    filename=arg;
  }
 else {
    filename="waltz12.dat";
  }
  loadLines(session,filename);
  Stage stage=new Stage(Stage.DUPLICATE);
  session.insert(stage);
  long start=System.currentTimeMillis();
  session.setGlobal("time",start);
  session.fireAllRules();
  System.out.println((System.currentTimeMillis() - start) / 1000);
  session.dispose();
}
