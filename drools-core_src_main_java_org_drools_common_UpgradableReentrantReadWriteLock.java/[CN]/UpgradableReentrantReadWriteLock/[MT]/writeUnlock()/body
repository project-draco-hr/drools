{
  if (lock.getWriteHoldCount() == 1) {
    for (int i=getUpgradedReadCount(); i > 0; i--)     lock.readLock().lock();
    upgradedReadCounters.remove(Thread.currentThread().getId());
  }
  lock.writeLock().unlock();
  notifyUpgradingThread();
}
