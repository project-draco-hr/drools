{
  long threadId=Thread.currentThread().getId();
  IntegerRef upgradedReadCount=upgradedReadCounters.get(threadId);
  if (upgradedReadCount == null)   return false;
  if (upgradedReadCount.get() < 2) {
    upgradedReadCounters.remove(threadId);
  }
 else {
    upgradedReadCount.dec();
  }
  return true;
}
