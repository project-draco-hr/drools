{
  this.lock.lock();
  try {
    if (node.getId() >= this.memories.length()) {
      int size=Math.max(this.rulebase.getNodeCount(),node.getId() + 1);
      AtomicReferenceArray<Object> newMem=new AtomicReferenceArray<Object>(size);
      for (int i=0; i < this.memories.length(); i++) {
        newMem.set(i,this.memories.get(i));
      }
      this.memories=newMem;
    }
  }
  finally {
    this.lock.unlock();
  }
}
