{
  this.id=id;
  this.ruleBase=ruleBase;
  this.handleFactory=handleFactory;
  this.tms=new TruthMaintenanceSystem(this);
  this.assertMap=new ObjectHashMap();
  final RuleBaseConfiguration conf=this.ruleBase.getConfiguration();
  if (RuleBaseConfiguration.WM_BEHAVIOR_IDENTITY.equals(conf.getProperty(RuleBaseConfiguration.PROPERTY_ASSERT_BEHAVIOR))) {
    this.assertMap.setComparator(new IdentityAssertMapComparator(this.handleFactory.getFactHandleType()));
  }
 else {
    this.assertMap.setComparator(new EqualityAssertMapComparator(this.handleFactory.getFactHandleType()));
  }
  if (RuleBaseConfiguration.WM_BEHAVIOR_DISCARD.equals(conf.getProperty(RuleBaseConfiguration.PROPERTY_LOGICAL_OVERRIDE_BEHAVIOR))) {
    this.discardOnLogicalOverride=true;
  }
 else {
    this.discardOnLogicalOverride=false;
  }
}
