{
  ProcessInstanceFactoryRegistry processRegistry=((InternalRuleBase)getRuleBase()).getConfiguration().getProcessInstanceFactoryRegistry();
  ProcessInstanceFactory conf=processRegistry.getProcessInstanceFactory(process);
  if (conf == null) {
    throw new IllegalArgumentException("Illegal process type: " + process.getClass());
  }
  InternalProcessInstance processInstance=conf.createProcessInstance();
  if (processInstance == null) {
    throw new IllegalArgumentException("Illegal process type: " + process.getClass());
  }
  return processInstance;
}
