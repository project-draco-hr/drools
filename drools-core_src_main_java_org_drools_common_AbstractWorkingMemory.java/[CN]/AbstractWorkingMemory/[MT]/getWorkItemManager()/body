{
  if (workItemManager == null) {
    workItemManager=ruleBase.getConfiguration().getWorkItemManagerFactory().createWorkItemManager(this);
    Map<String,WorkItemHandler> workItemHandlers=((InternalRuleBase)getRuleBase()).getConfiguration().getWorkItemHandlers();
    if (workItemHandlers != null) {
      for (      Map.Entry<String,WorkItemHandler> entry : workItemHandlers.entrySet()) {
        workItemManager.registerWorkItemHandler(entry.getKey(),entry.getValue());
      }
    }
  }
  return workItemManager;
}
