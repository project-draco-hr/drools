{
  startOperation();
  try {
    if (this.ruleBase.getConfiguration().isMultithreadEvaluation()) {
      int maxThreads=(this.ruleBase.getConfiguration().getMaxThreads() > 0) ? this.ruleBase.getConfiguration().getMaxThreads() : this.ruleBase.getPartitionIds().size();
      if (this.threadPool.compareAndSet(null,createExecutorService(maxThreads))) {
        this.partitionManager.setPool(this.threadPool.get());
      }
    }
  }
  finally {
    endOperation();
  }
}
