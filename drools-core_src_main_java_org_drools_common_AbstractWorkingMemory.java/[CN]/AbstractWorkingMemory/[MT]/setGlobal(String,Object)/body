{
  if (value == null) {
    return;
  }
  try {
    lock.lock();
    final Map globalDefintions=this.ruleBase.getGlobals();
    final Class type=(Class)globalDefintions.get(name);
    if ((type == null)) {
      throw new RuntimeException("Unexpected global [" + name + "]");
    }
 else     if (!type.isInstance(value)) {
      throw new RuntimeException("Illegal class for global. " + "Expected [" + type.getName() + "], "+ "found ["+ value.getClass().getName()+ "].");
    }
 else {
      this.globals.put(name,value);
    }
  }
  finally {
    lock.unlock();
  }
}
