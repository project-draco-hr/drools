{
  addEventListener(new DefaultAgendaEventListener(){
    public void activationCreated(    ActivationCreatedEvent event,    WorkingMemory workingMemory){
      String ruleFlowGroup=event.getActivation().getRule().getRuleFlowGroup();
      if ("DROOLS_SYSTEM".equals(ruleFlowGroup)) {
        String ruleName=event.getActivation().getRule().getName();
        if (ruleName.startsWith("RuleFlowStateNode-")) {
          int index=ruleName.indexOf("-",18);
          index=ruleName.indexOf("-",index + 1);
          String eventType=ruleName.substring(0,index);
          signalManager.signalEvent(eventType,event);
        }
      }
    }
  }
);
  addEventListener(new DefaultRuleFlowEventListener(){
    public void afterRuleFlowGroupDeactivated(    final RuleFlowGroupDeactivatedEvent event,    final WorkingMemory workingMemory){
      signalManager.signalEvent("RuleFlowGroup_" + event.getRuleFlowGroup().getName(),null);
    }
  }
);
}
