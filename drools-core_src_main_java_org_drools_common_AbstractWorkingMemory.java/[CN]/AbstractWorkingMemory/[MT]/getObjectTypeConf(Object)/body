{
  ObjectTypeConf objectTypeConf;
  if (object instanceof Fact) {
    String key=((Fact)object).getFactTemplate().getName();
    objectTypeConf=(ObjectTypeConf)this.typeConfMap.get(key);
    if (objectTypeConf == null) {
      objectTypeConf=new FactTemplateTypeConf(((Fact)object).getFactTemplate(),this.ruleBase);
      this.typeConfMap.put(key,objectTypeConf);
    }
    object=key;
  }
 else {
    Class cls=null;
    if (object instanceof ShadowProxy) {
      cls=((ShadowProxy)object).getShadowedObject().getClass();
    }
 else {
      cls=object.getClass();
    }
    objectTypeConf=(ObjectTypeConf)this.typeConfMap.get(cls);
    if (objectTypeConf == null) {
      final boolean isEvent=this.ruleBase.isEvent(cls);
      objectTypeConf=new ClassObjectTypeConf(cls,isEvent,this.ruleBase);
      this.typeConfMap.put(cls,objectTypeConf);
    }
  }
  return objectTypeConf;
}
