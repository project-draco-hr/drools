{
  if (!org.drools.workflow.core.Node.CONNECTION_DEFAULT_TYPE.equals(type)) {
    throw new IllegalArgumentException("A FaultNode only accepts default incoming connections!");
  }
  String faultName=getFaultName();
  ExceptionScopeInstance exceptionScopeInstance=getExceptionScopeInstance(faultName);
  NodeInstanceContainer nodeInstanceContainer=(NodeInstanceContainer)getNodeInstanceContainer();
  nodeInstanceContainer.removeNodeInstance(this);
  if (getFaultNode().isTerminateParent()) {
    if (nodeInstanceContainer instanceof CompositeNodeInstance) {
      ((CompositeNodeInstance)nodeInstanceContainer).cancel();
    }
 else     if (nodeInstanceContainer instanceof WorkflowProcessInstance) {
      Collection<NodeInstance> nodeInstances=((WorkflowProcessInstance)nodeInstanceContainer).getNodeInstances();
      for (      NodeInstance nodeInstance : nodeInstances) {
        ((org.drools.workflow.instance.NodeInstance)nodeInstance).cancel();
      }
    }
  }
  if (exceptionScopeInstance != null) {
    handleException(faultName,exceptionScopeInstance);
  }
 else {
    ((ProcessInstance)getProcessInstance()).setState(ProcessInstance.STATE_ABORTED);
  }
}
