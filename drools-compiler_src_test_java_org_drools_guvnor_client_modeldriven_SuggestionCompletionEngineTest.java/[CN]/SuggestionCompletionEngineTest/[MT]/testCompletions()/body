{
  final SuggestionCompletionEngine com=new SuggestionCompletionEngine();
  com.setFactTypes(new String[]{"Person","Vehicle"});
  com.setFieldsForTypes(new HashMap<String,ModelField[]>(){
{
      put("Person",new ModelField[]{new ModelField("age",Integer.class.getName(),SuggestionCompletionEngine.TYPE_NUMERIC),new ModelField("rank",Integer.class.getName(),SuggestionCompletionEngine.TYPE_COMPARABLE),new ModelField("name",String.class.getName(),SuggestionCompletionEngine.TYPE_STRING)});
      put("Vehicle",new ModelField[]{new ModelField("make",String.class.getName(),SuggestionCompletionEngine.TYPE_STRING),new ModelField("type",String.class.getName(),SuggestionCompletionEngine.TYPE_STRING)});
    }
  }
);
  com.setGlobalVariables(new HashMap<String,String>(){
{
      put("bar","Person");
      put("baz","Vehicle");
    }
  }
);
  String[] c=com.getConditionalElements();
  assertEquals("not",c[0]);
  assertEquals("exists",c[1]);
  assertEquals("or",c[2]);
  c=com.getFactTypes();
  assertEquals(2,c.length);
  assertContains("Person",c);
  assertContains("Vehicle",c);
  c=com.getFieldCompletions("Person");
  assertEquals("age",c[0]);
  assertEquals("rank",c[1]);
  assertEquals("name",c[2]);
  c=com.getFieldCompletions("Vehicle");
  assertEquals("type",c[1]);
  assertEquals("make",c[0]);
  c=com.getOperatorCompletions("Person","name");
  assertEquals(4,c.length);
  assertEquals("==",c[0]);
  assertEquals("!=",c[1]);
  assertEquals("matches",c[2]);
  c=com.getOperatorCompletions("Person","age");
  assertEquals(6,c.length);
  assertEquals(c[0],"==");
  assertEquals(c[1],"!=");
  assertEquals(c[2],"<");
  assertEquals(c[3],">");
  c=com.getOperatorCompletions("Person","rank");
  assertEquals(6,c.length);
  assertEquals(c[0],"==");
  assertEquals(c[1],"!=");
  assertEquals(c[2],"<");
  assertEquals(c[3],">");
  c=com.getConnectiveOperatorCompletions("Vehicle","make");
  assertEquals(5,c.length);
  assertEquals("|| ==",c[0]);
  c=com.getGlobalVariables();
  assertEquals(2,c.length);
  assertEquals("baz",c[0]);
  assertEquals("bar",c[1]);
  c=com.getFieldCompletionsForGlobalVariable("bar");
  assertEquals(3,c.length);
  assertEquals("age",c[0]);
  assertEquals("rank",c[1]);
  assertEquals("name",c[2]);
  c=com.getFieldCompletionsForGlobalVariable("baz");
  assertEquals(2,c.length);
  assertEquals("make",c[0]);
  assertEquals("type",c[1]);
  c=com.getOperatorCompletions("Person","wankle");
  assertEquals(2,c.length);
  assertEquals("Numeric",com.getFieldType("Person","age"));
}
