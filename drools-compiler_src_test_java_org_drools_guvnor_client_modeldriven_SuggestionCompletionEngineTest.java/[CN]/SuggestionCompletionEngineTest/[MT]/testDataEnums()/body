{
  String pkg="package org.test\n import org.drools.guvnor.client.modeldriven.SuggestionCompletionEngineTest.NestedClass";
  SuggestionCompletionLoader loader=new SuggestionCompletionLoader();
  List<String> enums=new ArrayList<String>();
  enums.add("'Person.age' : [42, 43] \n 'Person.sex' : ['M', 'F']");
  enums.add("'Driver.sex' : ['M', 'F']");
  SuggestionCompletionEngine engine=loader.getSuggestionEngine(pkg,new ArrayList<JarInputStream>(),new ArrayList<DSLTokenizedMappingFile>(),enums);
  assertEquals("String",engine.getFieldType("SuggestionCompletionEngineTest$NestedClass","name"));
  assertEquals(3,engine.getDataEnumListsSize());
  String[] items=engine.getDataEnumList("Person.age");
  assertEquals(2,items.length);
  assertEquals("42",items[0]);
  assertEquals("43",items[1]);
  items=engine.getEnums(new FactPattern("Person"),"age").fixedList;
  assertEquals(2,items.length);
  assertEquals("42",items[0]);
  assertEquals("43",items[1]);
  assertNull(engine.getEnums(new FactPattern("Nothing"),"age"));
  assertEquals(null,engine.getEnums(new FactPattern("Something"),"else"));
}
