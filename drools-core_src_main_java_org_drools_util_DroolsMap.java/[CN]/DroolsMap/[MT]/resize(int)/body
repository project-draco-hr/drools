{
  Entry[] oldTable=this.table;
  int oldCapacity=oldTable.length;
  if (oldCapacity == MAX_CAPACITY) {
    this.threshold=Integer.MAX_VALUE;
    return;
  }
  Entry[] newTable=new Entry[newCapacity];
  for (int i=0; i < this.table.length; i++) {
    Entry entry=this.table[i];
    if (entry == null) {
      continue;
    }
    this.table[i]=null;
    Entry next=null;
    while (entry != null) {
      next=entry.getNext();
      int index=indexOf(entry.hashCode(),newTable.length);
      entry.setNext(newTable[index]);
      newTable[index]=entry;
      entry=next;
    }
  }
  this.table=newTable;
  this.threshold=(int)(newCapacity * this.loadFactor);
}
