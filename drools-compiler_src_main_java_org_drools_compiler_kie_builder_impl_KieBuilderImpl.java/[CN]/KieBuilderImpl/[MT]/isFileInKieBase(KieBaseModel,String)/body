{
  if (kieBase.getPackages().isEmpty()) {
    String pathName=kieBase.getName().replace('.',File.separatorChar);
    return fileName.startsWith(RESOURCES_ROOT + pathName + File.separator) || fileName.startsWith(pathName + File.separator);
  }
 else {
    int lastSep=fileName.lastIndexOf(File.separator);
    String pkgNameForFile=lastSep > 0 ? fileName.substring(0,lastSep) : fileName;
    pkgNameForFile=pkgNameForFile.replace(File.separatorChar,'.');
    for (    String pkgName : kieBase.getPackages()) {
      boolean isNegative=pkgName.startsWith("!");
      if (isNegative) {
        pkgName=pkgName.substring(1);
      }
      if (pkgName.equals("*") || pkgNameForFile.endsWith(pkgName) || (pkgName.endsWith(".*") && pkgNameForFile.contains(pkgName.substring(0,pkgName.length() - 2)))) {
        return !isNegative;
      }
    }
    return false;
  }
}
