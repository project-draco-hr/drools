{
  init();
  if (!isBuilt() && kModuleModel != null) {
    trgMfs=new MemoryFileSystem();
    writePomAndKModule();
    addKBasesFilesToTrg();
    kModule=new MemoryKieModule(releaseId,kModuleModel,trgMfs);
    if (kieDependencies != null && !kieDependencies.isEmpty()) {
      for (      KieModule kieModule : kieDependencies) {
        kModule.addKieDependency((InternalKieModule)kieModule);
      }
    }
    if (pomModel != null) {
      kModule.setPomModel(pomModel);
    }
    KieModuleKieProject kProject=new KieModuleKieProject(kModule);
    compileJavaClasses(kProject.getClassLoader());
    if (buildKieProject(kModule,results,kProject)) {
      writeKieModuleMetaInfo(generateKieModuleMetaInfo());
    }
  }
  return this;
}
