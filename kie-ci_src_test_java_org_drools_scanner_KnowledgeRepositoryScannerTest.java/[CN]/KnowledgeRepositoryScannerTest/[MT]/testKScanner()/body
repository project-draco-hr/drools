{
  KnowledgeContainer kContainer=KnowledgeContainerFactory.newKnowledgeContainer();
  File kJar1=createKJar(kContainer,"test1.jar","rule1","rule2");
  kContainer.deploy(kJar1);
  MavenRepository repository=new MavenRepository();
  repository.deployArtifact("org.drools","scanner-test","1.0-SNAPSHOT",kJar1,createKPom());
  KnowledgeRepositoryScanner scanner=KnowledgeContainerFactory.newKnowledgeScanner(kContainer,-1);
  ((KnowledgeRepositoryScannerImpl)scanner).setPomParser(new PomParser(){
    public List<DependencyDescriptor> getPomDirectDependencies(){
      return new ArrayList<DependencyDescriptor>(){
{
          add(new DependencyDescriptor("org.drools","scanner-test","1.0-SNAPSHOT","jar"));
        }
      }
;
    }
  }
);
  StatefulKnowledgeSession ksession=kContainer.getStatefulKnowlegeSession("KSession1");
  checkKSession(ksession,"rule1","rule2");
  resetFileManager();
  File kJar2=createKJar(kContainer,"test2.jar","rule2","rule3");
  repository.deployArtifact("org.drools","scanner-test","1.0-SNAPSHOT",kJar2,createKPom());
  scanner.scanNow();
  StatefulKnowledgeSession ksession2=kContainer.getStatefulKnowlegeSession("KSession1");
  checkKSession(ksession2,"rule2","rule3");
}
