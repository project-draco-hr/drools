{
  MemoryFileSystem mfs=new MemoryFileSystem();
  KProject kproj=new KProjectImpl();
  KBase kBase1=kproj.newKBase("KBase1").setEqualsBehavior(AssertBehaviorOption.EQUALITY).setEventProcessingMode(EventProcessingOption.STREAM);
  KSession ksession1=kBase1.newKSession("KSession1").setType("stateful").setAnnotations(asList("@ApplicationScoped; @Inject")).setClockType(ClockTypeOption.get("realtime"));
  Folder metaInf=mfs.getFolder("META-INF");
  metaInf.create();
  org.drools.kproject.File kprojectFile=metaInf.getFile("kproject.xml");
  kprojectFile.create(new ByteArrayInputStream(((KProjectImpl)kproj).toXML().getBytes()));
  String fldKB1=kBase1.getName();
  mfs.getFolder(fldKB1).create();
  mfs.getFile(fldKB1 + "/rule1.drl").create(new ByteArrayInputStream(createDRLForJavaSource(value).getBytes()));
  createClass(mfs,factor);
  return mfs.writeAsJar(fileManager.getRootDirectory(),kjarName);
}
