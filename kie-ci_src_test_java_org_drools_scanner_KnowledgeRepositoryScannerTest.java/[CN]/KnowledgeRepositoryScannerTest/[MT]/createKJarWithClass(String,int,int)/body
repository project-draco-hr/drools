{
  MemoryFileSystem mfs=new MemoryFileSystem();
  KieProject kproj=new KieProjectImpl();
  KieBaseModel kieBaseModel1=kproj.newKieBaseModel("KBase1").setEqualsBehavior(AssertBehaviorOption.EQUALITY).setEventProcessingMode(EventProcessingOption.STREAM);
  KieSessionModel ksession1=kieBaseModel1.newKieSessionModel("KSession1").setType("stateful").setAnnotations(asList("@ApplicationScoped; @Inject")).setClockType(ClockTypeOption.get("realtime"));
  Folder metaInf=mfs.getFolder("META-INF");
  metaInf.create();
  org.drools.kproject.File kprojectFile=metaInf.getFile("kproject.xml");
  kprojectFile.create(new ByteArrayInputStream(kproj.toXML().getBytes()));
  String fldKB1=kieBaseModel1.getName();
  mfs.getFolder(fldKB1).create();
  mfs.getFile(fldKB1 + "/rule1.drl").create(new ByteArrayInputStream(createDRLForJavaSource(value).getBytes()));
  createClass(mfs,factor);
  return mfs.writeAsJar(fileManager.getRootDirectory(),kjarName);
}
