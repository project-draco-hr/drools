{
  snapshotter.loadSnapshot(data1);
  XAResource xa=pm.getXAResource();
  Xid xid=new DroolsXid(100,new byte[]{0x01},new byte[]{0x01});
  xa.start(xid,XAResource.TMNOFLAGS);
  try {
    pm.save();
    fail("save should fail as the session currently has an open transaction");
  }
 catch (  Exception e) {
  }
}
