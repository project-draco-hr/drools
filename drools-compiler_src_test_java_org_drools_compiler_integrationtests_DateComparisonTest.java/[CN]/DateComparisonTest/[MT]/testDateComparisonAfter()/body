{
  String str="";
  str+="package org.drools.compiler;\n";
  str+="global java.util.List results;\n";
  str+="rule \"test date greater than\"\n";
  str+="     when\n";
  str+="         $c : Cheese(type == \"Yesterday\")\n";
  str+="         Cheese(type == \"Tomorrow\", $c.usedBy before usedBy)\n";
  str+="     then\n";
  str+="         results.add( \"test date greater than\" );\n";
  str+="end\n";
  str+="rule \"test date less than\"\n";
  str+="    when\n";
  str+="        $c : Cheese(type == \"Tomorrow\")\n";
  str+="        Cheese(type == \"Yesterday\", $c.usedBy after usedBy);\n";
  str+="    then\n";
  str+="        results.add( \"test date less than\" );\n";
  str+="end\n";
  KieSession ksession=new KieHelper().addContent(str,ResourceType.DRL).build().newKieSession();
  List<String> results=new ArrayList<String>();
  ksession.setGlobal("results",results);
  Cheese yesterday=new Cheese("Yesterday");
  yesterday.setUsedBy(yesterday());
  Cheese tomorrow=new Cheese("Tomorrow");
  tomorrow.setUsedBy(tomorrow());
  ksession.insert(yesterday);
  ksession.insert(tomorrow);
  ksession.fireAllRules();
  assertEquals(2,results.size());
  assertTrue(results.contains("test date greater than"));
  assertTrue(results.contains("test date less than"));
}
