{
  this.ruleBase=new RuleBaseImpl();
  this.wm1=this.ruleBase.newWorkingMemory();
  this.wm2=this.ruleBase.newWorkingMemory();
  this.wm3=this.ruleBase.newWorkingMemory();
  this.wm4=this.ruleBase.newWorkingMemory();
  this.ruleBaseAddRule=new RuleBaseImpl();
  this.workingMemory=this.ruleBaseAddRule.newWorkingMemory();
  ClassObjectType contextType=new ClassObjectType(Context.class);
  Evaluator integerEqualEvaluator=EvaluatorFactory.getInstance().getEvaluator(Evaluator.INTEGER_TYPE,Evaluator.EQUAL);
  this.rule1=new Rule("rule1");
  Column contextColumnRule1=new Column(0,contextType,"context1");
  contextColumnRule1.addConstraint(getLiteralConstraint(contextColumnRule1,"state",new Integer(1),integerEqualEvaluator));
  this.rule1.addPattern(contextColumnRule1);
  final Declaration contextRule1Declaration=this.rule1.getDeclaration("context1");
  this.rule1.setConsequence(new Consequence(){
    public void invoke(    Activation activation,    WorkingMemory workingMemory) throws ConsequenceException {
      try {
        Rule rule=activation.getRule();
        Tuple tuple=activation.getTuple();
        KnowledgeHelper drools=new DefaultKnowledgeHelper(rule,tuple,workingMemory);
        Context dummy=(Context)drools.get(contextRule1Declaration);
        if (dummy == RuleBaseImplTest.this.context1) {
          RuleBaseImplTest.this.handlesForRules.add(RuleBaseImplTest.this.handle1Rule1);
        }
 else         if (dummy == RuleBaseImplTest.this.context2) {
          RuleBaseImplTest.this.handlesForRules.add(RuleBaseImplTest.this.handle2Rule1);
        }
      }
 catch (      Exception e) {
        throw new ConsequenceException(e);
      }
    }
  }
);
  this.rule2=new Rule("rule2");
  Column contextColumnRule2=new Column(0,contextType,"context2");
  contextColumnRule2.addConstraint(getLiteralConstraint(contextColumnRule2,"state",new Integer(1),integerEqualEvaluator));
  this.rule2.addPattern(contextColumnRule2);
  final Declaration contextRule2Declaration=rule2.getDeclaration("context2");
  this.rule2.setConsequence(new Consequence(){
    public void invoke(    Activation activation,    WorkingMemory workingMemory) throws ConsequenceException {
      try {
        Rule rule=activation.getRule();
        Tuple tuple=activation.getTuple();
        KnowledgeHelper drools=new DefaultKnowledgeHelper(rule,tuple,workingMemory);
        Context dummy=(Context)drools.get(contextRule2Declaration);
        if (dummy == RuleBaseImplTest.this.context1) {
          RuleBaseImplTest.this.handlesForRules.add(RuleBaseImplTest.this.handle1Rule2);
        }
 else         if (dummy == RuleBaseImplTest.this.context2) {
          RuleBaseImplTest.this.handlesForRules.add(RuleBaseImplTest.this.handle2Rule2);
        }
      }
 catch (      Exception e) {
        throw new ConsequenceException(e);
      }
    }
  }
);
}
