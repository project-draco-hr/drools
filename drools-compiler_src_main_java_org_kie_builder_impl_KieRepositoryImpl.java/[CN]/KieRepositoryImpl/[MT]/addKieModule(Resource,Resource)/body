{
  log.info("Adding KieModule from resource :" + resource);
  KieModule kModule=getKieModule(resource);
  if (dependencies != null && dependencies.length > 0) {
    Map<GAV,InternalKieModule> list=new HashMap<GAV,InternalKieModule>();
    for (    Resource depRes : dependencies) {
      InternalKieModule depKModule=(InternalKieModule)getKieModule(depRes);
      log.info("Adding KieModule dependency from resource :" + resource);
      list.put(depKModule.getGAV(),depKModule);
    }
    ((InternalKieModule)kModule).setDependencies(list);
  }
  addKieModule(kModule);
  return kModule;
}
