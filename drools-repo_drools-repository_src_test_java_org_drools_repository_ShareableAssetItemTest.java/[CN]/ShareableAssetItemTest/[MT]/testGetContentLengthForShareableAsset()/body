{
  AssetItem ruleItem=loadGlobalArea().addAsset("testGetContentLengthForShareableAsset","desc");
  ruleItem.checkin("initial");
  AssetItem linkedRuleItem=getDefaultPackage().addAssetImportedFromGlobalArea(ruleItem.getName());
  assertEquals(0,ruleItem.getContentLength());
  assertEquals(0,linkedRuleItem.getContentLength());
  ruleItem.updateContent("boo");
  ruleItem.checkin("");
  assertEquals("boo".getBytes().length,ruleItem.getContentLength());
  assertEquals("boo".getBytes().length,linkedRuleItem.getContentLength());
  linkedRuleItem.updateContent("booo");
  linkedRuleItem.checkin("");
  assertEquals("booo".getBytes().length,ruleItem.getContentLength());
  assertEquals("booo".getBytes().length,linkedRuleItem.getContentLength());
  ruleItem=loadGlobalArea().addAsset("testGetContentLengthForShareableAsset2","");
  ruleItem.checkin("initial");
  linkedRuleItem=getDefaultPackage().addAssetImportedFromGlobalArea(ruleItem.getName());
  assertEquals(0,ruleItem.getContentLength());
  assertEquals(0,linkedRuleItem.getContentLength());
  linkedRuleItem.updateBinaryContentAttachment(new ByteArrayInputStream("foobar".getBytes()));
  linkedRuleItem.checkin("");
  assertEquals("foobar".getBytes().length,ruleItem.getContentLength());
  assertEquals("foobar".getBytes().length,linkedRuleItem.getContentLength());
  ruleItem.updateBinaryContentAttachment(new ByteArrayInputStream("foobarr".getBytes()));
  ruleItem.checkin("");
  assertEquals("foobarr".getBytes().length,ruleItem.getContentLength());
  assertEquals("foobarr".getBytes().length,linkedRuleItem.getContentLength());
}
