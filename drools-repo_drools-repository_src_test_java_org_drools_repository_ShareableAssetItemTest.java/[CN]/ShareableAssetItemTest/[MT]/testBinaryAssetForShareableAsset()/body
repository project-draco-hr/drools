{
  AssetItem asset=getRepo().loadGlobalArea().addAsset("testBinaryAssetForShareableAsset","desc");
  asset.checkin("version0");
  AssetItem linkedAsset=getDefaultPackage().addAssetImportedFromGlobalArea(asset.getName());
  String data="abc 123";
  ByteArrayInputStream in=new ByteArrayInputStream(data.getBytes());
  linkedAsset.updateBinaryContentAttachment(in);
  linkedAsset.updateBinaryContentAttachmentFileName("x.x");
  in.close();
  assertEquals(data,linkedAsset.getContent());
  assertFalse(linkedAsset.getNode().hasProperty(AssetItem.CONTENT_PROPERTY_NAME));
  assertTrue(linkedAsset.getNode().hasProperty(AssetItem.CONTENT_PROPERTY_BINARY_NAME));
  linkedAsset.checkin("lalalala");
  assertTrue(linkedAsset.isBinary());
  asset=getRepo().loadGlobalArea().loadAsset("testBinaryAssetForShareableAsset");
  InputStream in2=asset.getBinaryContentAttachment();
  assertNotNull(in2);
  byte[] data2=asset.getBinaryContentAsBytes();
  assertEquals(data,new String(data2));
  assertEquals("x.x",asset.getBinaryContentAttachmentFileName());
  assertTrue(asset.isBinary());
  linkedAsset.updateContent("qed");
  linkedAsset.checkin("");
  linkedAsset=getRepo().loadAssetByUUID(linkedAsset.getUUID());
  assertEquals("qed",linkedAsset.getContent());
}
