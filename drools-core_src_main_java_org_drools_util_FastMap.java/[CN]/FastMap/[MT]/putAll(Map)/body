{
  if (map instanceof FastMap) {
    final FastMap fm=(FastMap)map;
    for (Entry e=fm._head, end=fm._tail; (e=e._next) != end; ) {
      put(e._key,e._value);
    }
  }
 else {
    for (final Iterator i=map.entrySet().iterator(); i.hasNext(); ) {
      final Map.Entry e=(Map.Entry)i.next();
      put(e.getKey(),e.getValue());
    }
  }
}
