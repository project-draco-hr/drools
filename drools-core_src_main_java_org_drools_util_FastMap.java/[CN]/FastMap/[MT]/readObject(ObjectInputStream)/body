{
  final int size=stream.readInt();
  final int entriesLength=stream.readInt();
  this._entries=new FastMap.Entry[entriesLength][];
  for (int i=0; i < this._entries.length; ) {
    this._entries[i++]=FastMap.NULL_BLOCK;
  }
  this._head=new Entry();
  this._tail=new Entry();
  this._head._next=this._tail;
  this._tail._previous=this._head;
  this._values=new Values();
  this._entrySet=new EntrySet();
  this._keySet=new KeySet();
  this._unmodifiable=new Unmodifiable();
  setShared(stream.readBoolean());
  setKeyComparator((FastComparator)stream.readObject());
  setValueComparator((FastComparator)stream.readObject());
  for (int i=0; i < size; i++) {
    final Object key=stream.readObject();
    final Object value=stream.readObject();
    addEntry(this._keyComparator.hashCodeOf(key),key,value);
  }
}
