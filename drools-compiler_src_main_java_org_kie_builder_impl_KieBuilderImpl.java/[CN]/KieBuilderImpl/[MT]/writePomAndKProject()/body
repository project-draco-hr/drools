{
  KieFactory kf=KieFactory.Factory.get();
  KieRepository kr=KieServices.Factory.get().getKieRepository();
  if (gav == null) {
    gav=kr.getDefaultGAV();
  }
  if (!invalidPomXml) {
    if (pomXml == null) {
      String xml=generatePomXml(gav);
      trgMfs.write(((GroupArtifactVersion)gav).toJarPath() + "/pom.xml",xml.getBytes(),true);
    }
 else {
      trgMfs.write(((GroupArtifactVersion)gav).toJarPath() + "/pom.xml",srcMfs.getBytes("pom.xml"),true);
    }
    String props=generatePomProperties(gav);
    trgMfs.write(((GroupArtifactVersion)gav).toJarPath() + "/pom.properties",props.getBytes(),true);
  }
  if (!invalidKieProject) {
    if (kieProject == null) {
      kieProject=kf.newKieProject();
      kieProject.newKieBaseModel(gav.toExternalForm());
    }
    trgMfs.write("META-INF/kproject.xml",kieProject.toXML().getBytes(),true);
  }
  if (kieProject != null) {
    kieProject.setGroupArtifactVersion(this.gav);
  }
}
