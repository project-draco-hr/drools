{
  if (srcMfs.isAvailable(KieModuleModelImpl.KMODULE_SRC_PATH)) {
    kModuleModelXml=srcMfs.getBytes(KieModuleModelImpl.KMODULE_SRC_PATH);
    try {
      kModuleModel=KieModuleModelImpl.fromXML(new ByteArrayInputStream(kModuleModelXml));
    }
 catch (    Exception e) {
      results.addMessage(Level.ERROR,"kmodule.xml","kmodulet.xml found, but unable to read\n" + e.getMessage());
    }
  }
 else {
    kModuleModel=KieFactory.Factory.get().newKieModuleModel();
    KieBaseModel kieBaseModel=kModuleModel.newKieBaseModel("defaultKieBase").addPackage("*").setDefault(true);
    kieBaseModel.newKieSessionModel("defaultKieSession").setDefault(true);
    kieBaseModel.newKieSessionModel("defaultStatelessKieSession").setType(KieSessionModel.KieSessionType.STATELESS).setDefault(true);
    kModuleModelXml=kModuleModel.toXML().getBytes();
  }
}
