{
  this.ruleBase=(LeapsRuleBase)RuleBaseFactory.newRuleBase(RuleBase.LEAPS);
  this.wm1=this.ruleBase.newWorkingMemory();
  this.ruleBaseAddRule=(LeapsRuleBase)RuleBaseFactory.newRuleBase(RuleBase.LEAPS);
  this.workingMemory=this.ruleBaseAddRule.newWorkingMemory();
  final ClassObjectType contextType=new ClassObjectType(Context.class);
  final Evaluator integerEqualEvaluator=EvaluatorFactory.getEvaluator(Evaluator.INTEGER_TYPE,Evaluator.EQUAL);
  this.rule1=new Query("query-to-execute");
  final Column contextColumnRule1=new Column(0,contextType,"context1");
  contextColumnRule1.addConstraint(getLiteralConstraint(contextColumnRule1,"state",new Integer(1),integerEqualEvaluator));
  this.rule1.addPattern(contextColumnRule1);
  this.rule2=new Rule("rule2");
  final Column contextColumnRule2=new Column(0,contextType,"context2");
  contextColumnRule2.addConstraint(getLiteralConstraint(contextColumnRule2,"state",new Integer(1),integerEqualEvaluator));
  this.rule2.addPattern(contextColumnRule2);
  final Declaration contextRule2Declaration=this.rule2.getDeclaration("context2");
  this.rule2.setConsequence(new Consequence(){
    /** 
 */
    private static final long serialVersionUID=-5839841224218714327L;
    public void evaluate(    final KnowledgeHelper drools,    final WorkingMemory workingMemory) throws ConsequenceException {
      try {
        final Rule rule=drools.getRule();
        final Tuple tuple=drools.getTuple();
        final Context dummy=(Context)drools.get(contextRule2Declaration);
        if (dummy == QueryTest.this.context1) {
          QueryTest.this.handlesForRules.add(QueryTest.this.handle1Rule2);
        }
 else         if (dummy == QueryTest.this.context2) {
          QueryTest.this.handlesForRules.add(QueryTest.this.handle2Rule2);
        }
      }
 catch (      final Exception e) {
        throw new ConsequenceException(e);
      }
    }
  }
);
}
