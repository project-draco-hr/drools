{
  InternalAgenda agenda=(InternalAgenda)((ActivationTimerJobContext)ctx).getAgenda();
  ScheduledAgendaItem item=((ActivationTimerJobContext)ctx).getScheduledAgendaItem();
  boolean wasFired=agenda.fireTimedActivation(item,false);
  if (((ActivationTimerJobContext)ctx).getTrigger().hasNextFireTime() == null) {
    agenda.getScheduledActivationsLinkedList().remove(item);
    item.setEnqueued(false);
  }
 else {
    item.setActivated(true);
  }
  if (wasFired) {
    agenda.getWorkingMemory().fireAllRules();
  }
}
