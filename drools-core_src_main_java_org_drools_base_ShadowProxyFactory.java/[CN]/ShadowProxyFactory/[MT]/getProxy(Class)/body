{
  try {
    final ClassFieldInspector inspector=new ClassFieldInspector(clazz);
    final String className=Type.getInternalName(clazz) + "ShadowProxy";
    final byte[] bytes=dump(clazz,inspector,className,clazz.isInterface());
    final ByteArrayClassLoader classLoader=new ByteArrayClassLoader(Thread.currentThread().getContextClassLoader());
    final Class newClass=classLoader.defineClass(className.replace('/','.'),bytes);
    return newClass;
  }
 catch (  final Exception e) {
    throw new RuntimeDroolsException(e);
  }
}
