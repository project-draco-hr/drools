{
  try {
    if (!isPossibleToGenerateTheProxyFor(clazz)) {
      return null;
    }
    final String className=getInternalProxyClassNameForClass(clazz);
    final byte[] bytes=dump(clazz,className);
    final ByteArrayClassLoader classLoader=new ByteArrayClassLoader(Thread.currentThread().getContextClassLoader());
    final Class newClass=classLoader.defineClass(className.replace('/','.'),bytes,PROTECTION_DOMAIN);
    return newClass;
  }
 catch (  final Exception e) {
    throw new RuntimeDroolsException(e);
  }
}
