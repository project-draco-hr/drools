{
  MethodVisitor mv;
{
    mv=cw.visitMethod(Opcodes.ACC_PUBLIC,"hashCode",Type.getMethodDescriptor(Type.INT_TYPE,new Type[]{}),null,null);
    mv.visitCode();
    Label l0=new Label();
    mv.visitLabel(l0);
    mv.visitIntInsn(Opcodes.BIPUSH,31);
    mv.visitVarInsn(Opcodes.ISTORE,1);
    Label l1=new Label();
    mv.visitLabel(l1);
    mv.visitInsn(Opcodes.ICONST_1);
    mv.visitVarInsn(Opcodes.ISTORE,2);
    int count=0;
    for (Iterator it=fieldTypes.entrySet().iterator(); it.hasNext(); ) {
      Map.Entry entry=(Map.Entry)it.next();
      String name=(String)entry.getKey();
      Method method=(Method)entry.getValue();
      Class fieldType=method.getReturnType();
      String fieldFlag=name + ShadowProxyFactory.FIELD_SET_FLAG;
      count++;
      Label goNext=new Label();
      final Label l5=new Label();
      mv.visitLabel(l5);
      mv.visitVarInsn(Opcodes.ALOAD,0);
      mv.visitFieldInsn(Opcodes.GETFIELD,className,fieldFlag,Type.BOOLEAN_TYPE.getDescriptor());
      final Label l6=new Label();
      mv.visitJumpInsn(Opcodes.IFNE,l6);
      final Label l7=new Label();
      mv.visitLabel(l7);
      mv.visitVarInsn(Opcodes.ALOAD,0);
      mv.visitVarInsn(Opcodes.ALOAD,0);
      mv.visitFieldInsn(Opcodes.GETFIELD,className,ShadowProxyFactory.DELEGATE_FIELD_NAME,Type.getDescriptor(clazz));
      if (clazz.isInterface()) {
        mv.visitMethodInsn(Opcodes.INVOKEINTERFACE,Type.getInternalName(clazz),method.getName(),Type.getMethodDescriptor(method));
      }
 else {
        mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL,Type.getInternalName(clazz),method.getName(),Type.getMethodDescriptor(method));
      }
      mv.visitFieldInsn(Opcodes.PUTFIELD,className,name,Type.getDescriptor(fieldType));
      final Label l8=new Label();
      mv.visitLabel(l8);
      mv.visitVarInsn(Opcodes.ALOAD,0);
      mv.visitInsn(Opcodes.ICONST_1);
      mv.visitFieldInsn(Opcodes.PUTFIELD,className,fieldFlag,Type.BOOLEAN_TYPE.getDescriptor());
      mv.visitLabel(l6);
      Label l2=new Label();
      mv.visitLabel(l2);
      mv.visitIntInsn(Opcodes.BIPUSH,31);
      mv.visitVarInsn(Opcodes.ILOAD,2);
      mv.visitInsn(Opcodes.IMUL);
      if (fieldType.isPrimitive()) {
        mv.visitVarInsn(Opcodes.ALOAD,0);
        mv.visitFieldInsn(Opcodes.GETFIELD,className,name,Type.getDescriptor(fieldType));
        mv.visitInsn(Type.getType(fieldType).getOpcode(Opcodes.IADD));
        mv.visitVarInsn(Type.getType(fieldType).getOpcode(Opcodes.ISTORE),2);
      }
 else {
        mv.visitVarInsn(Opcodes.ALOAD,0);
        mv.visitFieldInsn(Opcodes.GETFIELD,className,name,Type.getDescriptor(fieldType));
        Label np1=new Label();
        mv.visitJumpInsn(Opcodes.IFNONNULL,np1);
        mv.visitInsn(Opcodes.ICONST_0);
        Label np2=new Label();
        mv.visitJumpInsn(Opcodes.GOTO,np2);
        mv.visitLabel(np1);
        mv.visitVarInsn(Opcodes.ALOAD,0);
        mv.visitFieldInsn(Opcodes.GETFIELD,className,name,Type.getDescriptor(fieldType));
        mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL,Type.getInternalName(fieldType),"hashCode","()I");
        mv.visitLabel(np2);
        mv.visitInsn(Opcodes.IADD);
        mv.visitVarInsn(Opcodes.ISTORE,2);
      }
      mv.visitLabel(goNext);
    }
    mv.visitVarInsn(Opcodes.ILOAD,2);
    mv.visitInsn(Opcodes.IRETURN);
    Label lastLabel=new Label();
    mv.visitLabel(lastLabel);
    mv.visitLocalVariable("this","L" + className + ";",null,l0,lastLabel,0);
    mv.visitLocalVariable("PRIME",Type.INT_TYPE.getDescriptor(),null,l0,lastLabel,1);
    mv.visitLocalVariable("result",Type.INT_TYPE.getDescriptor(),null,l1,lastLabel,2);
    mv.visitMaxs(0,0);
    mv.visitEnd();
  }
}
