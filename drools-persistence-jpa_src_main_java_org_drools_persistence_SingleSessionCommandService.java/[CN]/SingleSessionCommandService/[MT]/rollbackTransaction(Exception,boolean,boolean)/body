{
  try {
    if (logstack) {
      logger.warn("Could not commit session",t1);
    }
 else {
      logger.warn("Could not commit session due to {}",t1.getMessage());
    }
    txm.rollback(transactionOwner);
  }
 catch (  Exception t2) {
    logger.error("Could not rollback",t2);
    throw new RuntimeException("Could not commit session or rollback",t2);
  }
}
