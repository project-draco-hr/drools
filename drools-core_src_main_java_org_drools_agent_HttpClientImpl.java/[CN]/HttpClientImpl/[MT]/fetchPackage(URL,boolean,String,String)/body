{
  URLConnection con=url.openConnection();
  HttpURLConnection httpCon=(HttpURLConnection)con;
  try {
    httpCon.setRequestMethod("GET");
    if (enableBasicAuthentication) {
      String userpassword=username + ":" + password;
      byte[] authEncBytes=Base64.encodeBase64(userpassword.getBytes());
      httpCon.setRequestProperty("Authorization","Basic " + new String(authEncBytes));
    }
    Object o=DroolsStreamUtils.streamIn(httpCon.getInputStream());
    if (o instanceof KnowledgePackageImp) {
      return ((KnowledgePackageImp)o).pkg;
    }
 else {
      return (Package)o;
    }
  }
  finally {
    httpCon.disconnect();
  }
}
