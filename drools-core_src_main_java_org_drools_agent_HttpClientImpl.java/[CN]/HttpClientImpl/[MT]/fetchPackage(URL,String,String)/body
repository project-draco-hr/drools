{
  URLConnection con=url.openConnection();
  HttpURLConnection httpCon=(HttpURLConnection)con;
  try {
    httpCon.setRequestMethod("GET");
    BASE64Encoder enc=new sun.misc.BASE64Encoder();
    String userpassword=username + ":" + password;
    String encodedAuthorization=enc.encode(userpassword.getBytes());
    httpCon.setRequestProperty("Authorization","Basic " + encodedAuthorization);
    Object o=DroolsStreamUtils.streamIn(httpCon.getInputStream());
    if (o instanceof KnowledgePackageImp) {
      return ((KnowledgePackageImp)o).pkg;
    }
 else {
      return (Package)o;
    }
  }
  finally {
    httpCon.disconnect();
  }
}
