{
  URLConnection con=url.openConnection();
  HttpURLConnection httpCon=(HttpURLConnection)con;
  try {
    httpCon.setRequestMethod("GET");
    Base64 enc=new Base64();
    String userpassword=username + ":" + password;
    httpCon.setRequestProperty("Authorization","Basic " + enc.encode(userpassword.getBytes()));
    Object o=DroolsStreamUtils.streamIn(httpCon.getInputStream());
    if (o instanceof KnowledgePackageImp) {
      return ((KnowledgePackageImp)o).pkg;
    }
 else {
      return (Package)o;
    }
  }
  finally {
    httpCon.disconnect();
  }
}
