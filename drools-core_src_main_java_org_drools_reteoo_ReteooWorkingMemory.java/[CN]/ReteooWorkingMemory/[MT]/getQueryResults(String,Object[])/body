{
  try {
    startOperation();
    this.ruleBase.readLock();
    this.lock.lock();
    DroolsQuery queryObject=new DroolsQuery(query,arguments,getQueryListenerInstance(),false);
    InternalFactHandle handle=this.handleFactory.newFactHandle(queryObject,this.getObjectTypeConfigurationRegistry().getObjectTypeConf(EntryPoint.DEFAULT,queryObject),this);
    insert(handle,queryObject,null,null,this.typeConfReg.getObjectTypeConf(this.entryPoint,queryObject));
    this.handleFactory.destroyFactHandle(handle);
    Declaration[] declarations=new Declaration[0];
    if (queryObject.getQuery() != null) {
      declarations=queryObject.getQuery().getDeclarations();
    }
    return new QueryResults((List<FactHandle[]>)queryObject.getQueryResultCollector().getResults(),declarations,this);
  }
  finally {
    this.lock.unlock();
    this.ruleBase.readUnlock();
    endOperation();
  }
}
