{
  try {
    startOperation();
    this.ruleBase.readLock();
    this.lock.lock();
    this.ruleBase.executeQueuedActions();
    executeQueuedActions();
    DroolsQuery queryObject=new DroolsQuery(query,arguments,new OpenQueryViewChangedEventListenerAdapter(listener),true);
    InternalFactHandle handle=this.handleFactory.newFactHandle(queryObject,null,this,this);
    final PropagationContext propagationContext=new PropagationContextImpl(getNextPropagationIdCounter(),PropagationContext.ASSERTION,null,null,handle,agenda.getActiveActivations(),agenda.getDormantActivations(),getEntryPoint());
    getEntryPointNode().assertQuery(handle,propagationContext,this);
    propagationContext.evaluateActionQueue(this);
    executeQueuedActions();
    return new LiveQueryImpl(this,handle);
  }
  finally {
    this.lock.unlock();
    this.ruleBase.readUnlock();
    endOperation();
  }
}
