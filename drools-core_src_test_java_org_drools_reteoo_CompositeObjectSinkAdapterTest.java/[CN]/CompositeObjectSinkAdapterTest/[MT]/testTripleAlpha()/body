{
  CompositeObjectSinkAdapter ad=new CompositeObjectSinkAdapter();
  LiteralConstraint lit=new LiteralConstraint(new MockExtractor(),StringFactory.getInstance().getEvaluator(Operator.EQUAL),new ObjectFieldImpl("stilton"));
  AlphaNode al=new AlphaNode(0,lit,new MockObjectSource(0));
  ad.addObjectSink(al);
  assertNull(ad.otherSinks);
  assertNotNull(ad.hashedFieldIndexes);
  assertEquals(1,ad.hashableSinks.size());
  assertEquals(al,ad.getSinks()[0]);
  LiteralConstraint lit2=new LiteralConstraint(new MockExtractor(),StringFactory.getInstance().getEvaluator(Operator.EQUAL),new ObjectFieldImpl("cheddar"));
  AlphaNode al2=new AlphaNode(1,lit2,new MockObjectSource(0));
  ad.addObjectSink(al2);
  assertNull(ad.hashedSinkMap);
  assertEquals(2,ad.hashableSinks.size());
  LiteralConstraint lit3=new LiteralConstraint(new MockExtractor(),StringFactory.getInstance().getEvaluator(Operator.EQUAL),new ObjectFieldImpl("stinky"));
  AlphaNode al3=new AlphaNode(1,lit3,new MockObjectSource(0));
  ad.addObjectSink(al3);
  assertNotNull(ad.hashedSinkMap);
  assertNull(ad.hashableSinks);
  ad.removeObjectSink(al2);
  assertNotNull(ad.hashableSinks);
  assertNull(ad.hashedSinkMap);
}
