{
  final List<String> list=new ArrayList<String>();
  for (int i=0, length=declarations.length; i < length; i++) {
    for (final ListIterator<RuleConditionElement> it=context.stackIterator(); it.hasPrevious(); ) {
      final RuleConditionElement rce=it.previous();
      final Declaration decl=rce.resolveDeclaration(declarations[i].getIdentifier());
      if (decl == null || decl.getPattern().getOffset() > declarations[i].getPattern().getOffset()) {
        list.add(declarations[i].getIdentifier());
      }
    }
  }
  if (list.size() != 0) {
    final StringBuffer buffer=new StringBuffer();
    buffer.append(list.get(0));
    for (int i=1, size=list.size(); i < size; i++) {
      buffer.append(", " + list.get(i));
    }
    throw new InvalidPatternException("Required Declarations not bound: '" + buffer);
  }
}
