{
  if (raw == null) {
    return null;
  }
  final Matcher matcher=replacer.getPattern().matcher(raw);
  if (matcher.matches()) {
    String pre=matcher.group(1);
    if (matcher.group(1) != null) {
      pre=fix(pre,replacer);
    }
    final String obj=matcher.group(2).trim();
    String post=matcher.group(3);
    if (post != null) {
      post=fix(post,replacer);
    }
    final String replacement=escapeDollarSigns(replacer,obj);
    return pre + matcher.replaceAll(replacement) + post;
  }
 else {
    return raw;
  }
}
