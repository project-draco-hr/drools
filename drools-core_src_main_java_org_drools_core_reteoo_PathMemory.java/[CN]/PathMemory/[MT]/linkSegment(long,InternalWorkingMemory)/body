{
  linkedSegmentMask=linkedSegmentMask | mask;
  if (log.isTraceEnabled()) {
    if (NodeTypeEnums.isTerminalNode(getNetworkNode())) {
      TerminalNode rtn=(TerminalNode)getNetworkNode();
      log.trace("  LinkSegment smask={} rmask={} name={}",mask,linkedSegmentMask,rtn.getRule().getName());
    }
 else {
      log.trace("  LinkSegment smask={} rmask={} name={}",mask,"RiaNode");
    }
  }
  if (isRuleLinked()) {
    doLinkRule(wm);
  }
}
