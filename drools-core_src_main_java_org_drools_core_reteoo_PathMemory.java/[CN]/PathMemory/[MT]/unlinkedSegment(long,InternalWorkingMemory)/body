{
  boolean linkedRule=isRuleLinked();
  linkedSegmentMask=linkedSegmentMask ^ mask;
  if (log.isTraceEnabled()) {
    log.trace("  UnlinkSegment smask={} rmask={} name={}",mask,linkedSegmentMask,this);
  }
  if (linkedRule && !isRuleLinked()) {
    doUnlinkRule(wm);
  }
}
