{
  final BetaMemory memory=(BetaMemory)workingMemory.getNodeMemory(this);
  RightTupleMemory rightMemory=memory.getRightTupleMemory();
  RightTuple blocker=leftTuple.getBlocker();
  if (blocker == null) {
    memory.getLeftTupleMemory().remove(leftTuple);
  }
 else {
    if (rightMemory.isIndexed()) {
      RightTuple newRightTuple=rightMemory.getFirst(leftTuple,(InternalFactHandle)context.getFactHandle());
      if (newRightTuple == null || newRightTuple.getMemory() != blocker.getMemory()) {
        blocker.removeBlocked(leftTuple);
        leftTuple.setBlocker(null);
        leftTuple.setBlockedPrevious(null);
        leftTuple.setBlockedNext(null);
        blocker=null;
      }
    }
  }
  this.constraints.updateFromTuple(memory.getContext(),workingMemory,leftTuple);
  if (blocker == null || !this.constraints.isAllowedCachedLeft(memory.getContext(),blocker.getFactHandle())) {
    if (blocker != null) {
      blocker.removeBlocked(leftTuple);
      leftTuple.setBlocker(null);
      leftTuple.setBlockedPrevious(null);
      leftTuple.setBlockedNext(null);
    }
    FastIterator it=memory.getRightTupleMemory().fastIterator();
    RightTuple rightTuple=rightMemory.getFirst(leftTuple,(InternalFactHandle)context.getFactHandle());
    for (RightTuple newBlocker=rightTuple; newBlocker != null; newBlocker=(RightTuple)it.next(newBlocker)) {
      if (this.constraints.isAllowedCachedLeft(memory.getContext(),newBlocker.getFactHandle())) {
        leftTuple.setBlocker(newBlocker);
        newBlocker.addBlocked(leftTuple);
        break;
      }
    }
  }
  if (leftTuple.getBlocker() == null) {
    memory.getLeftTupleMemory().add(leftTuple);
    if (leftTuple.getFirstChild() != null) {
      this.sink.propagateRetractLeftTuple(leftTuple,context,workingMemory);
    }
  }
 else   if (leftTuple.getFirstChild() == null) {
    this.sink.propagateAssertLeftTuple(leftTuple,context,workingMemory,true);
  }
 else {
    this.sink.propagateModifyChildLeftTuple(leftTuple,context,workingMemory,true);
  }
  this.constraints.resetTuple(memory.getContext());
}
