{
  Person original=new Person();
  original.setAge(31);
  original.setName("michael");
  Person p=(Person)ProxyGenerator.generateProxy(original,false,true);
  standardTests(original,p);
  p.changeName("jo");
  assertEquals("jo",p.getName());
  assertEquals("jo",original.getName());
  assertTrue(p instanceof ChangeListener);
  ChangeListener cl=(ChangeListener)p;
  TestListener listener=new TestListener();
  cl.addPropertyChangeListener(listener);
  p.setAge(42);
  assertEquals(42,p.getAge());
  assertEquals(42,original.getAge());
  assertEquals(1,listener.events.size());
  PropertyChangeEvent event=(PropertyChangeEvent)listener.events.get(0);
  assertEquals("age",event.getPropertyName());
  assertEquals(new Integer(31),event.getOldValue());
  assertEquals(new Integer(42),event.getNewValue());
  p.setName("chloe");
  assertEquals(2,listener.events.size());
  event=(PropertyChangeEvent)listener.events.get(1);
  assertEquals("name",event.getPropertyName());
  assertEquals("jo",event.getOldValue());
  assertEquals("chloe",event.getNewValue());
  cl.removePropertyChangeListener(listener);
  p.setName("done");
  assertEquals(2,listener.events.size());
}
