{
  InternalWorkingMemory wm=((InternalWorkingMemoryEntryPoint)ksession).getInternalWorkingMemory();
  if (((InternalRuleBase)wm.getRuleBase()).getConfiguration().isPhreakEnabled()) {
    return PhreakActiveActivationIterator.iterator(wm);
  }
 else {
    return new ActiveActivationIterator(((StatefulKnowledgeSessionImpl)ksession).getInternalWorkingMemory());
  }
}
