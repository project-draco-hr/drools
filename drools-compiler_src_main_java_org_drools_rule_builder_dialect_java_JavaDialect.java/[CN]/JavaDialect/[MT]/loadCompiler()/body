{
switch (this.configuration.getCompiler()) {
case PackageBuilderConfiguration.JANINO:
{
      if (!"1.4".equals(this.configuration.getJavaLanguageLevel())) {
        throw new RuntimeDroolsException("Incompatible Java language level with selected compiler");
      }
      this.compiler=JavaCompilerFactory.getInstance().createCompiler("janino");
      break;
    }
case PackageBuilderConfiguration.ECLIPSE:
default :
{
    final EclipseJavaCompilerSettings eclipseSettings=new EclipseJavaCompilerSettings();
    Map map=eclipseSettings.getMap();
    String lngLevel=this.configuration.getJavaLanguageLevel();
    map.put(CompilerOptions.OPTION_TargetPlatform,lngLevel);
    if (lngLevel == "1.4") {
      lngLevel="1.5";
    }
    map.put(CompilerOptions.OPTION_Source,lngLevel);
    this.compiler=new EclipseJavaCompiler(map);
    break;
  }
}
}
