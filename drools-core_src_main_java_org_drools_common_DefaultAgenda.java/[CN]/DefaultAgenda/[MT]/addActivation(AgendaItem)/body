{
  if (activation.getRule().getAutoFocus()) {
    this.setFocus(activation.getRule().getAgendaGroup());
  }
  addItemToActivationGroup(activation);
  InternalAgendaGroup agendaGroup=(InternalAgendaGroup)this.getAgendaGroup(activation.getRule().getAgendaGroup());
  activation.setAgendaGroup(agendaGroup);
  if (activation.getRule().getRuleFlowGroup() == null) {
    if (activation.getRule().isLockOnActive() && agendaGroup.isActive()) {
      return false;
    }
    agendaGroup.add(activation);
  }
 else {
    InternalRuleFlowGroup rfg=(InternalRuleFlowGroup)this.getRuleFlowGroup(activation.getRule().getRuleFlowGroup());
    if (activation.getRule().isLockOnActive() && rfg.isActive()) {
      return false;
    }
    rfg.addActivation(activation);
  }
  notifyHalt();
  return true;
}
