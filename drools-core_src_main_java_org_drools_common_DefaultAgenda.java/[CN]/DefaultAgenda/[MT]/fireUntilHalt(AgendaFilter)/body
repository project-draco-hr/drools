{
  this.halt.set(false);
  while (continueFiring(-1)) {
    boolean fired=fireNextItem(agendaFilter);
    fired=fired || !((AbstractWorkingMemory)this.workingMemory).getActionQueue().isEmpty();
    this.workingMemory.executeQueuedActions();
    if (!fired) {
      try {
synchronized (this.halt) {
          this.halt.wait();
        }
      }
 catch (      InterruptedException e) {
        this.halt.set(true);
      }
    }
 else {
      this.workingMemory.executeQueuedActions();
    }
  }
}
