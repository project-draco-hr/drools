{
  if (declarativeAgenda) {
    InternalFactHandle factHandle=activation.getFactHandle();
    workingMemory.getEntryPointNode().modifyActivation(factHandle,activation.getPropagationContext(),workingMemory);
    if (previouslyActive) {
      return;
    }
    if (activation.getBlockers() != null && activation.getBlockers().size() > 0) {
      return;
    }
    ActivationGroup activationGroup=getStageActivationsGroup();
    if (activation.getActivationGroupNode() != null && activation.getActivationGroupNode().getActivationGroup() == activationGroup) {
      return;
    }
    activationGroup.addActivation(activation);
  }
 else {
    if (!previouslyActive) {
      addActivation(activation,true);
    }
  }
}
