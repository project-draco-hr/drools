{
  Object[] argTemplate=this.queryElement.getArgTemplate();
  Object[] args=new Object[argTemplate.length];
  System.arraycopy(argTemplate,0,args,0,args.length);
  int[] declIndexes=this.queryElement.getDeclIndexes();
  List<Integer> srcVarIndexes=null;
  for (int i=0, length=declIndexes.length; i < length; i++) {
    Declaration declr=(Declaration)argTemplate[declIndexes[i]];
    Object tupleObject=leftTuple.get(declr).getObject();
    Object o=declr.getValue(workingMemory,tupleObject);
    args[declIndexes[i]]=o;
  }
  int[] varIndexes=this.queryElement.getVariableIndexes();
  UnificationNodeViewChangedEventListener collector=new UnificationNodeViewChangedEventListener(leftTuple,varIndexes,this,this.tupleMemoryEnabled);
  DroolsQuery queryObject=new DroolsQuery(this.queryElement.getQueryName(),args,collector,openQuery);
  InternalFactHandle handle=workingMemory.getFactHandleFactory().newFactHandle(queryObject,null,workingMemory,null);
  collector.setFactHandle(handle);
  QueryInsertModifyAction action=new QueryInsertModifyAction(context,handle,leftTuple,varIndexes,srcVarIndexes,this);
  context.getQueue1().addFirst(action);
  leftTuple.setObject(handle);
}
