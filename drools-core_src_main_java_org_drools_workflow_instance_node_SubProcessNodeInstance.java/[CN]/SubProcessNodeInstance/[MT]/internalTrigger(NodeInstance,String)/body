{
  if (!Node.CONNECTION_DEFAULT_TYPE.equals(type)) {
    throw new IllegalArgumentException("A SubProcess node only accepts default incoming connections!");
  }
  ProcessInstance processInstance=getProcessInstance().getWorkingMemory().startProcess(getSubFlowNode().getProcessId());
  if (!getSubFlowNode().isWaitForCompletion() || processInstance.getState() == ProcessInstance.STATE_COMPLETED) {
    triggerCompleted();
  }
 else {
    getProcessInstance().getWorkingMemory().addEventListener(this);
    this.processInstanceId=processInstance.getId();
  }
}
