{
  this.env=env;
  if (workItem == null) {
    try {
      ByteArrayInputStream bais=new ByteArrayInputStream(workItemByteArray);
      MarshallerReaderContext context=new MarshallerReaderContext(bais,null,null,null);
      workItem=ProcessMarshallerImpl.readWorkItem(context,!externalVariables);
      if (externalVariables) {
        restoreVariables();
      }
      context.close();
    }
 catch (    IOException e) {
      e.printStackTrace();
      throw new IllegalArgumentException("IOException while loading process instance: " + e.getMessage());
    }
  }
  return workItem;
}
