{
  if (!nodes.containsKey(node)) {
    throw new IllegalStateException("A process node is connected with " + "a node that does not belong to the process.");
  }
  Boolean prevValue=(Boolean)nodes.put(node,Boolean.TRUE);
  if (prevValue == Boolean.FALSE) {
    for (Iterator it=node.getOutgoingConnections().iterator(); it.hasNext(); ) {
      IConnection connection=(IConnection)it.next();
      processNode(connection.getTo(),nodes);
    }
  }
}
