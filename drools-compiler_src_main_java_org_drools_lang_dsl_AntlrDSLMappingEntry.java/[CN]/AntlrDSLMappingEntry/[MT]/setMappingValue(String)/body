{
  StringBuffer valuePatternBuffer=new StringBuffer();
  StringBuffer valueBuffer=new StringBuffer();
  if (headMatchGroupAdded) {
    valuePatternBuffer.append("$1");
    valueBuffer.append("$1");
  }
  valuePatternBuffer.append(value);
  valueBuffer.append(value);
  if (tailMatchGroupAdded) {
    int maxGroupIndex=0;
    if (!variables.isEmpty()) {
      Integer tailMatchGroupIndex=(Integer)Collections.max(variables.values());
      maxGroupIndex=tailMatchGroupIndex.intValue();
    }
 else     if (headMatchGroupAdded) {
      maxGroupIndex++;
    }
    maxGroupIndex++;
    valuePatternBuffer.append("$" + maxGroupIndex);
    valueBuffer.append("$" + maxGroupIndex);
  }
  this.valuePattern=valuePatternBuffer.toString();
  this.value=valueBuffer.toString();
}
