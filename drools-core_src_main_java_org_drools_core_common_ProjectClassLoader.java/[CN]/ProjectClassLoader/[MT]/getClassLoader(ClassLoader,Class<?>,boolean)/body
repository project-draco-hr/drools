{
  if (classLoader == null) {
    return cls == null ? createProjectClassLoader() : createProjectClassLoader(cls.getClassLoader());
  }
 else {
    ProjectClassLoader projectClassLoader=createProjectClassLoader(classLoader);
    if (cls != null) {
      projectClassLoader.setDroolsClassLoader(cls.getClassLoader());
    }
    return projectClassLoader;
  }
}
