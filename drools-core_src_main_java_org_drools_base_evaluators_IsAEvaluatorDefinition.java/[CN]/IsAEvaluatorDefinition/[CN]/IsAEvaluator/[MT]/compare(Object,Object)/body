{
  Set sourceTraits=null;
  Set targetTraits=null;
  if (source instanceof IThing) {
    sourceTraits=((ITraitable)((IThing)source).getCore()).getTraits().keySet();
  }
 else   if (source.getClass().getAnnotation(Traitable.class) != null) {
    sourceTraits=((ITraitable)source).getTraits().keySet();
  }
  if (target instanceof IThing) {
    targetTraits=((ITraitable)((IThing)target).getCore()).getTraits().keySet();
  }
 else   if (source.getClass().getAnnotation(Traitable.class) != null) {
    targetTraits=((ITraitable)target).getTraits().keySet();
  }
  return (targetTraits != null && (this.getOperator().isNegated() ^ sourceTraits.containsAll(targetTraits)));
}
