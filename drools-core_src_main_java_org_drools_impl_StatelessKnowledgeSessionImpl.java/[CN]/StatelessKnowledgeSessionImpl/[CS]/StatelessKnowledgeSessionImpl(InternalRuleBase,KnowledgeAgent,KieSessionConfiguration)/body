{
  this.ruleBase=ruleBase;
  this.kagent=kagent;
  this.conf=(conf != null) ? conf : SessionConfiguration.getDefaultInstance();
  this.environment=EnvironmentFactory.newEnvironment();
  if (this.ruleBase != null) {
    this.ruleBase.lock();
    try {
      if (ruleBase.getConfiguration().isSequential()) {
        this.ruleBase.getReteooBuilder().order();
      }
    }
  finally {
      this.ruleBase.unlock();
    }
  }
}
