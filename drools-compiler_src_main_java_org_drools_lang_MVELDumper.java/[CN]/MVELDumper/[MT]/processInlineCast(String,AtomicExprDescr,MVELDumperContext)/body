{
  int sharpPos=expr.indexOf('#');
  if (sharpPos < 0) {
    return null;
  }
  String field1=expr.substring(0,sharpPos).trim();
  int sharpPos2=expr.indexOf('#',sharpPos + 1);
  String part2=sharpPos2 < 0 ? expr.substring(sharpPos + 1).trim() : expr.substring(sharpPos + 1,sharpPos2).trim();
  String[] classAndField=splitInClassAndField(part2,context);
  if (classAndField == null) {
    return null;
  }
  String className=classAndField[0];
  String field2=classAndField[1];
  String castedExpression="((" + className + ")"+ field1+ ")."+ field2;
  String instanceofExpression="";
  if (sharpPos2 >= 0) {
    String[] instanceofAndCastedExpr=processInlineCast(castedExpression + expr.substring(sharpPos2),atomicExpr,context);
    if (instanceofAndCastedExpr == null) {
      return null;
    }
 else {
      instanceofExpression=instanceofAndCastedExpr[0];
      castedExpression=instanceofAndCastedExpr[1];
    }
  }
  atomicExpr.setRewrittenExpression(castedExpression);
  instanceofExpression=field1 + " instanceof " + className+ " && "+ instanceofExpression;
  return new String[]{instanceofExpression,castedExpression};
}
