{
  int fileCount=0;
  for (  String fileName : kieModule.getFileNames()) {
    if (!fileName.endsWith(".properties") && filterFileInKBase(kieBaseModel,fileName)) {
      ResourceConfiguration conf=null;
      if (kieModule.isAvailable(fileName + ".properties")) {
        Properties prop=new Properties();
        try {
          prop.load(new ByteArrayInputStream(kieModule.getBytes(fileName + ".properties")));
        }
 catch (        IOException e) {
          log.error("Error loading resource configuration from file: " + fileName + ".properties");
        }
        conf=ResourceTypeImpl.fromProperties(prop);
      }
      if (conf == null) {
        ckbuilder.add(ResourceFactory.newByteArrayResource(kieModule.getBytes(fileName)),ResourceType.determineResourceType(fileName));
      }
 else {
        ckbuilder.add(ResourceFactory.newByteArrayResource(kieModule.getBytes(fileName)),ResourceType.determineResourceType(fileName),conf);
      }
      fileCount++;
    }
  }
  if (fileCount == 0) {
    if (kieModule instanceof FileKieModule) {
      log.warn("No files found for KieBase " + kieBaseModel.getName() + ", searching folder "+ kieModule.getFile());
    }
 else {
      log.warn("No files found for KieBase " + kieBaseModel.getName());
    }
  }
}
