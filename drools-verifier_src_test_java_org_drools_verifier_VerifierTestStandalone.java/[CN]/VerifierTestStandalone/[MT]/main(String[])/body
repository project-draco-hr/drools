{
  try {
    Collection<String> fileNames=new ArrayList<String>();
    fileNames.add("Enums.drl");
    DrlParser parser=new DrlParser();
    Verifier a=new Verifier();
    for (    String s : fileNames) {
      PackageDescr descr=parser.parse(new InputStreamReader(Verifier.class.getResourceAsStream(s)));
      a.addPackageDescr(descr);
    }
    a.fireAnalysis();
    a.writeComponentsHTML("/home/trikkola/");
    VerifierResult result=a.getResult();
    Collection<VerifierMessageBase> msgs=result.getBySeverity(Severity.ERROR);
    for (Iterator iterator=msgs.iterator(); iterator.hasNext(); ) {
      VerifierMessageBase msg=(VerifierMessageBase)iterator.next();
      System.out.println("ERR: " + msg.getMessage());
    }
    msgs=result.getBySeverity(Severity.WARNING);
    for (Iterator iterator=msgs.iterator(); iterator.hasNext(); ) {
      VerifierMessageBase msg=(VerifierMessageBase)iterator.next();
      System.out.println("WARN (" + msg.getClass().getSimpleName() + "): "+ msg.getMessage());
      System.out.println("\t FAULT: [" + msg.getClass().getSimpleName() + "] "+ msg.getFaulty());
      if (msg instanceof VerifierMessage) {
        System.out.println("\t CAUSES (message):");
        VerifierMessage amsg=(VerifierMessage)msg;
        for (Iterator iterator2=amsg.getCauses().iterator(); iterator2.hasNext(); ) {
          Cause c=(Cause)iterator2.next();
          System.out.println("\t\t [" + c.getClass().getSimpleName() + "]"+ c);
        }
      }
 else       if (msg instanceof VerifierRangeCheckMessage) {
        System.out.println("\t CAUSES (range):");
        VerifierRangeCheckMessage amsg=(VerifierRangeCheckMessage)msg;
        for (Iterator iterator2=amsg.getCauses().iterator(); iterator2.hasNext(); ) {
          Cause c=(Cause)iterator2.next();
          System.out.println("\t\t" + c);
        }
      }
    }
    msgs=result.getBySeverity(Severity.NOTE);
    for (Iterator iterator=msgs.iterator(); iterator.hasNext(); ) {
      VerifierMessageBase msg=(VerifierMessageBase)iterator.next();
      System.out.println("NOTE: " + msg.getMessage());
      System.out.println("\t" + msg.getFaulty());
    }
    Collection<ObjectType> classes=result.getVerifierData().getAllObjectTypes();
    for (Iterator iterator=classes.iterator(); iterator.hasNext(); ) {
      ObjectType c=(ObjectType)iterator.next();
      Collection<VerifierRule> cr=result.getVerifierData().getRulesByObjectTypeId(c.getId());
      System.err.println("Class rules:" + cr);
      Set<Field> flds=c.getFields();
      for (Iterator iterator2=flds.iterator(); iterator2.hasNext(); ) {
        Field f=(Field)iterator2.next();
        cr=result.getVerifierData().getRulesByFieldId(f.getId());
        System.err.println("Field rules: " + cr);
      }
    }
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
