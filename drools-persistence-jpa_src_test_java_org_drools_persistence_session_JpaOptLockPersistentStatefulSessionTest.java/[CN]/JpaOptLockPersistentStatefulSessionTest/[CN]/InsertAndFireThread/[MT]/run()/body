{
  StatefulKnowledgeSession ksession2=JPAKnowledgeService.loadStatefulKnowledgeSession(ksessionId,kbase,null,createEnvironment(context));
  SingleSessionCommandService sscs=(SingleSessionCommandService)((CommandBasedStatefulKnowledgeSession)ksession2).getCommandService();
  sscs.addInterceptor(new OptimisticLockRetryInterceptor());
  ksession2.setGlobal("list",list);
  ksession2.insert(1);
  ksession2.insert(2);
  ksession2.insert(3);
  ksession2.getWorkItemManager().completeWorkItem(0,null);
  ksession2.fireAllRules();
  ksession2.dispose();
}
