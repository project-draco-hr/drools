{
  PackageBuilder builder=new PackageBuilder();
  builder.addPackageFromDrl(getSource(),getDSL());
  RuleBase ruleBase=RuleBaseFactory.newRuleBase();
  ruleBase.addPackage(builder.getPackage());
  WorkingMemory workingMemory=ruleBase.newWorkingMemory();
  WorkingMemoryFileLogger logger=new WorkingMemoryFileLogger(workingMemory);
  logger.setFileName("log/state");
  Customer a=new Customer("A","Gold");
  Customer b=new Customer("B","Platinum");
  Customer c=new Customer("C","Silver");
  Customer d=new Customer("D","Silver");
  Ticket t1=new Ticket(a);
  Ticket t2=new Ticket(b);
  Ticket t3=new Ticket(c);
  Ticket t4=new Ticket(d);
  FactHandle fa=workingMemory.assertObject(a);
  FactHandle fb=workingMemory.assertObject(b);
  FactHandle fc=workingMemory.assertObject(c);
  FactHandle fd=workingMemory.assertObject(d);
  FactHandle ft1=workingMemory.assertObject(t1);
  FactHandle ft2=workingMemory.assertObject(t2);
  FactHandle ft3=workingMemory.assertObject(t3);
  FactHandle ft4=workingMemory.assertObject(t4);
  workingMemory.fireAllRules();
  t3.setStatus("Done");
  workingMemory.modifyObject(ft3,t3);
  try {
    System.err.println("[[ Sleeping 5 seconds ]]");
    Thread.sleep(5000);
  }
 catch (  InterruptedException e) {
    e.printStackTrace();
  }
  workingMemory.fireAllRules();
  logger.writeToDisk();
}
