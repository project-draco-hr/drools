{
  int dotPos=fileName.lastIndexOf('.');
  if (dotPos < 0) {
    return null;
  }
  String extension=fileName.substring(dotPos + 1);
  FormatConverter converter=converters.get(extension);
  if (converter == null) {
    String converterClassName=registry.get(extension);
    if (converterClassName != null) {
      try {
        converter=((Class<? extends FormatConverter>)Class.forName(converterClassName)).newInstance();
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
  return converter;
}
