{
  int numLines=0;
  if (node.getNodeType() == Node.DOCUMENT_FRAGMENT_NODE || node.getNodeType() == Node.DOCUMENT_NODE || node.getNodeType() == Node.ELEMENT_NODE) {
    Node child=node.getFirstChild();
    while (child != null) {
      numLines+=countLineBreaks(child);
      child=child.getNextSibling();
    }
  }
 else   if (node.getNodeType() == Node.TEXT_NODE) {
    String text=node.getNodeValue();
    int pos=0;
    for (int count=0; count < text.length(); count++) {
      if (text.charAt(count) == '\n') {
        numLines++;
      }
    }
  }
 else {
  }
  return numLines;
}
