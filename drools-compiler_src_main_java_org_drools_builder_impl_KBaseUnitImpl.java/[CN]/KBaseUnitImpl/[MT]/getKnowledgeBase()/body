{
  if (knowledgeBase != null) {
    return knowledgeBase;
  }
  KnowledgeBuilder kbuilder=getKBuilder();
  if (kbuilder.hasErrors()) {
    return null;
  }
  knowledgeBase=KnowledgeBaseFactory.newKnowledgeBase(getKnowledgeBaseConfiguration());
  knowledgeBase.addKnowledgePackages(kbuilder.getKnowledgePackages());
  return knowledgeBase;
}
