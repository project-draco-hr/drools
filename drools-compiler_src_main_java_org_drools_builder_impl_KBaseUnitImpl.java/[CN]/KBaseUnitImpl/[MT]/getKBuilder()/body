{
  if (kbuilder != null) {
    return kbuilder;
  }
  kbuilder=kConf != null ? KnowledgeBuilderFactory.newKnowledgeBuilder(kConf) : KnowledgeBuilderFactory.newKnowledgeBuilder();
  CompositeKnowledgeBuilder ckbuilder=kbuilder.batch();
  KBase kBase=getKBase();
  for (  String kBaseFile : kBase.getFiles()) {
    buildKBaseFile(ckbuilder,kBase,kBaseFile);
  }
  ckbuilder.build();
  return kbuilder;
}
