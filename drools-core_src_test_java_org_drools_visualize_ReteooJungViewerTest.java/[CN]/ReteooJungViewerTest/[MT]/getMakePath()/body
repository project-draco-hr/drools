{
  final Rule rule=new Rule("makePath");
  Column contextColumn=new Column(0,contextType);
  contextColumn.addConstraint(getLiteralConstraint(contextColumn,"state",new Integer(Context.MAKE_PATH),this.integerEqualEvaluator));
  rule.addPattern(contextColumn);
  Column seatingColumn=new Column(1,seatingType);
  seatingColumn.addConstraint(getFieldBinding(seatingColumn,"id","seatingId"));
  seatingColumn.addConstraint(getFieldBinding(seatingColumn,"pid","seatingPid"));
  seatingColumn.addConstraint(getLiteralConstraint(seatingColumn,"pathDone",new Boolean(false),booleanEqualEvaluator));
  rule.addPattern(seatingColumn);
  final Declaration seatingIdDeclaration=rule.getDeclaration("seatingId");
  final Declaration seatingPidDeclaration=rule.getDeclaration("seatingPid");
  Column pathColumn=new Column(2,pathType);
  pathColumn.addConstraint(getBoundVariableConstraint(pathColumn,"id",seatingPidDeclaration,integerEqualEvaluator));
  pathColumn.addConstraint(getFieldBinding(pathColumn,"guestName","pathGuestName"));
  pathColumn.addConstraint(getFieldBinding(pathColumn,"seat","pathSeat"));
  rule.addPattern(pathColumn);
  final Declaration pathGuestNameDeclaration=rule.getDeclaration("pathGuestName");
  final Declaration pathSeatDeclaration=rule.getDeclaration("pathSeat");
  Column notPathColumn=new Column(3,pathType);
  notPathColumn.addConstraint(getBoundVariableConstraint(notPathColumn,"id",seatingIdDeclaration,integerEqualEvaluator));
  notPathColumn.addConstraint(getBoundVariableConstraint(notPathColumn,"guestName",pathGuestNameDeclaration,objectEqualEvaluator));
  Not not=new Not();
  not.addChild(notPathColumn);
  rule.addPattern(not);
  Consequence consequence=new Consequence(){
    public void invoke(    Activation activation) throws ConsequenceException {
      try {
        Rule rule=activation.getRule();
        Tuple tuple=activation.getTuple();
        KnowledgeHelper drools=new DefaultKnowledgeHelper(rule,tuple);
        int id=((Integer)tuple.get(seatingIdDeclaration)).intValue();
        int seat=((Integer)tuple.get(pathSeatDeclaration)).intValue();
        String guestName=(String)tuple.get(pathGuestNameDeclaration);
        Path path=new Path(id,seat,guestName);
        drools.assertObject(path);
        System.out.println("make path : " + path);
      }
 catch (      Exception e) {
        throw new ConsequenceException(e);
      }
    }
  }
;
  rule.setConsequence(consequence);
  return rule;
}
