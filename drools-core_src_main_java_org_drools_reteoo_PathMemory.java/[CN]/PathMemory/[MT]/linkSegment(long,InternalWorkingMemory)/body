{
  if (log.isTraceEnabled()) {
    if (getRuleTerminalNode() != null) {
      log.trace("  LinkSegment smask={} rmask={} name={}",mask,linkedSegmentMask,getRuleTerminalNode().getRule().getName());
    }
 else {
      log.trace("  LinkSegment smask={} rmask={} name={}",mask,"RiaNode");
    }
  }
  linkedSegmentMask=linkedSegmentMask | mask;
  if (isRuleLinked()) {
    doLinkRule(wm);
  }
}
