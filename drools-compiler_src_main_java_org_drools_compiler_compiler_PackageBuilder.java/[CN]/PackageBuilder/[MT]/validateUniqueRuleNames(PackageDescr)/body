{
  final Set<String> names=new HashSet<String>();
  PackageRegistry packageRegistry=this.pkgRegistryMap.get(packageDescr.getNamespace());
  Package pkg=null;
  if (packageRegistry != null) {
    pkg=packageRegistry.getPackage();
  }
  for (  final RuleDescr rule : packageDescr.getRules()) {
    validateRule(packageDescr,rule);
    final String name=rule.getName();
    if (names.contains(name)) {
      this.results.add(new ParserError(rule.getResource(),"Duplicate rule name: " + name,rule.getLine(),rule.getColumn(),packageDescr.getNamespace()));
    }
    if (pkg != null && pkg.getRule(name) != null) {
      this.results.add(new DuplicateRule(rule,packageDescr,this.configuration));
    }
    names.add(name);
  }
}
