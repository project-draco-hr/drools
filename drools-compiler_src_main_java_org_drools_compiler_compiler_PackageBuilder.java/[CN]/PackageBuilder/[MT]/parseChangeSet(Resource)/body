{
  XmlChangeSetReader reader=new XmlChangeSetReader(this.configuration.getSemanticModules());
  if (resource instanceof ClassPathResource) {
    reader.setClassLoader(((ClassPathResource)resource).getClassLoader(),((ClassPathResource)resource).getClazz());
  }
 else {
    reader.setClassLoader(this.configuration.getClassLoader(),null);
  }
  Reader resourceReader=null;
  try {
    resourceReader=resource.getReader();
    ChangeSet changeSet=reader.read(resourceReader);
    return changeSet;
  }
  finally {
    if (resourceReader != null) {
      resourceReader.close();
    }
  }
}
