{
  String theory=compiler.compile(resource.getInputStream(),getPackageRegistry());
  if (!compiler.getResults().isEmpty()) {
    this.results.addAll(compiler.getResults());
    return null;
  }
  DrlParser parser=new DrlParser(configuration.getLanguageLevel());
  PackageDescr pkg=parser.parse(resource,new StringReader(theory));
  this.results.addAll(parser.getErrors());
  if (pkg == null) {
    this.results.add(new ParserError(resource,"Parser returned a null Package",0,0));
    return pkg;
  }
 else {
    return parser.hasErrors() ? null : pkg;
  }
}
