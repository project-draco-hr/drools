{
  byte[] bytecode=cb.buildClass(def);
  String resourceName=JavaDialectRuntimeData.convertClassToResourcePath(fullName);
  dialect.putClassDefinition(resourceName,bytecode);
  if (ruleBase != null) {
    ruleBase.registerAndLoadTypeDefinition(fullName,bytecode);
  }
 else {
    if (rootClassLoader instanceof ProjectClassLoader) {
      ((ProjectClassLoader)rootClassLoader).defineClass(fullName,resourceName,bytecode);
    }
 else {
      dialect.write(resourceName,bytecode);
    }
  }
}
