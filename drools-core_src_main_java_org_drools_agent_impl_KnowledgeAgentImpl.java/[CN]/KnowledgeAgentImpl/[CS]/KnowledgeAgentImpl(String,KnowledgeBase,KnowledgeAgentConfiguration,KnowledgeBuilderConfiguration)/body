{
  this.name=name;
  this.kbase=kbase;
  this.builderConfiguration=builderConfiguration;
  this.resourceDirectories=new HashSet<Resource>();
  this.listener=SystemEventListenerFactory.getSystemEventListener();
  this.queue=new LinkedBlockingQueue<ChangeSet>();
  boolean scanResources=false;
  boolean monitor=false;
  if (configuration != null) {
    this.newInstance=((KnowledgeAgentConfigurationImpl)configuration).isNewInstance();
    this.useKBaseClassLoaderForCompiling=configuration.isUseKBaseClassLoaderForCompiling();
    this.notifier=(ResourceChangeNotifierImpl)ResourceFactory.getResourceChangeNotifierService();
    if (configuration.isMonitorChangeSetEvents()) {
      monitor=true;
    }
    if (configuration.isScanDirectories()) {
      this.scanDirectories=true;
    }
    scanResources=configuration.isScanResources();
    if (scanResources) {
      this.notifier.addResourceChangeMonitor(ResourceFactory.getResourceChangeScannerService());
      monitor=true;
    }
    this.validationTimeout=configuration.getValidationTimeout();
  }
  monitorResourceChangeEvents(monitor);
  autoBuildResourceMapping();
  this.listener.info("KnowledgeAgent created, with configuration:\nmonitorChangeSetEvents=" + monitor + " scanResources="+ scanResources+ " scanDirectories="+ this.scanDirectories+ " newInstance="+ this.newInstance);
}
