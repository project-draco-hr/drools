{
  this.kbase=kbase;
  this.resources=new HashMap<Resource,ResourceMapping>();
  this.listener=listener;
  if (configuration != null) {
    this.newInstance=((KnowledgeAgentConfigurationImpl)configuration).isNewInstance();
    this.notifier=(ResourceChangeNotifierImpl)ResourceFactory.getResourceChangeNotifierService();
    if (((KnowledgeAgentConfigurationImpl)configuration).isScanResources()) {
      this.notifier.addResourceChangeMonitor(ResourceFactory.getResourceChangeScannerService());
    }
  }
  buildResourceMapping(kbase);
}
