{
  this.kbase=kbase;
  this.resources=new HashMap<Resource,ResourceMapping>();
  this.listener=listener;
  this.newInstance=true;
  if (configuration != null) {
    this.notifier=(ResourceChangeNotifierImpl)ResourceFactory.getResourceChangeNotifierService();
    if (((KnowledgeAgentConfigurationImpl)configuration).isScanResources()) {
      this.notifier.addResourceChangeMonitor(ResourceFactory.getResourceChangeScannerService());
    }
    if (((KnowledgeAgentConfigurationImpl)configuration).isMonitorChangeSetEvents()) {
      this.monitor=true;
    }
  }
  buildResourceMapping(kbase);
}
