{
  this.agent.listener.debug("KnowledgeAgent removing mappings for resource=" + resource + " with unsubscribe="+ unsubscribe);
  ResourceMapEntry rsrcMapping=this.resourceMappings.remove(resource);
  if (rsrcMapping != null) {
    if (unsubscribe) {
      this.agent.listener.debug("KnowledgeAgent notifier unsubscribing to resource=" + resource);
      this.agent.notifier.unsubscribeResourceChangeListener(agent,resource);
    }
    for (    KnowledgeDefinition kd : rsrcMapping.knowledgeDefinitions) {
      this.knowledgeDefinitionMappings.remove(kd);
    }
  }
  return rsrcMapping;
}
