{
synchronized (this.registeredResources) {
    this.eventSupport.fireBeforeChangeSetApplied(changeSet);
    this.listener.info("KnowledgeAgent applying ChangeSet");
    ChangeSetState changeSetState=new ChangeSetState();
    changeSetState.scanDirectories=this.scanDirectories;
    changeSetState.incrementalBuild=!(this.newInstance);
    processChangeSet(changeSet,changeSetState);
    buildKnowledgeBase(changeSetState);
    this.eventSupport.fireAfterChangeSetApplied(changeSet);
  }
}
