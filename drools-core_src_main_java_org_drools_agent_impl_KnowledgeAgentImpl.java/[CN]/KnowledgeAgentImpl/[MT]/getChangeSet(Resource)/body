{
  if (this.semanticModules == null) {
    this.semanticModules=new SemanticModules();
    this.semanticModules.addSemanticModule(new ChangeSetSemanticModule());
  }
  XmlChangeSetReader reader=new XmlChangeSetReader(this.semanticModules);
  if (resource instanceof ClassPathResource) {
    reader.setClassLoader(((ClassPathResource)resource).getClassLoader());
  }
 else {
    reader.setClassLoader(((AbstractRuleBase)(((KnowledgeBaseImpl)this.kbase).ruleBase)).getConfiguration().getClassLoader());
  }
  ChangeSet changeSet=null;
  try {
    changeSet=reader.read(resource.getReader());
  }
 catch (  Exception e) {
    this.listener.exception(new RuntimeException("Unable to parse ChangeSet",e));
  }
  if (changeSet == null) {
    this.listener.exception(new RuntimeException("Unable to parse ChangeSet"));
  }
  return changeSet;
}
