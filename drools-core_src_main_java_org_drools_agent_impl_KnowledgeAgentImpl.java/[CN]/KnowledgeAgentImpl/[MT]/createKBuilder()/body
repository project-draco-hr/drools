{
  if (this.builderConfiguration != null) {
    return KnowledgeBuilderFactory.newKnowledgeBuilder(this.builderConfiguration);
  }
  if (this.useKBaseClassLoaderForCompiling) {
    return KnowledgeBuilderFactory.newKnowledgeBuilder(KnowledgeBuilderFactory.newKnowledgeBuilderConfiguration(null,((ReteooRuleBase)((KnowledgeBaseImpl)this.getKnowledgeBase()).getRuleBase()).getRootClassLoader()));
  }
  return KnowledgeBuilderFactory.newKnowledgeBuilder();
}
