{
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  try {
    long revision=getLatestRevisionNumberForResource(resourceURI);
    Map props=new HashMap();
    repository.getFile(resourceURI,-1,props,out);
    while (!isCorrectStatus(props)) {
      props=new HashMap();
      out=new ByteArrayOutputStream();
      revision--;
      repository.getFile(resourceURI,revision,props,out);
    }
    return new ResourceVersion(revision,out.toByteArray());
  }
 catch (  SVNException e) {
    throw new RuntimeException("SVNException: " + e.getMessage());
  }
 finally {
    try {
      out.close();
    }
 catch (    IOException e) {
    }
  }
}
