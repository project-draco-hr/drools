{
  String kresultsId="kresults_" + serviceManager.getSessionId();
  Message msg=new Message(serviceManager.getSessionId(),serviceManager.counter.incrementAndGet(),true,new KnowledgeContextResolveFromContextCommand(new GetWorkItemManagerCommand(),null,null,instanceId,kresultsId));
  try {
    Object payload=serviceManager.client.write(msg).getPayload();
    WorkItemManager workItemManager=(WorkItemManager)((ExecutionResults)payload).getValue("workItemManager");
    ((WorkItemManagerRemoteClient)workItemManager).setServiceManager(serviceManager);
    ((WorkItemManagerRemoteClient)workItemManager).setInstanceId(instanceId);
    return workItemManager;
  }
 catch (  Exception e) {
    throw new RuntimeException("Unable to execute message",e);
  }
}
