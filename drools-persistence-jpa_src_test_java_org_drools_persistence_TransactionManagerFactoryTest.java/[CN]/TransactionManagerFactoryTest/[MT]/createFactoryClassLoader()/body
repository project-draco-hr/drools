{
  ArrayList<URL> urls=Lists.newArrayList(((URLClassLoader)getClass().getClassLoader()).getURLs());
  return new URLClassLoader(urls.toArray(new URL[0]),getClass().getClassLoader()){
    public Class<?> loadClass(    String name,    boolean resolve) throws ClassNotFoundException {
      if (name.endsWith("TransactionManagerFactory")) {
        Class<?> c=findLoadedClass(name);
        if (c == null) {
          c=findClass(name);
        }
        if (resolve) {
          resolveClass(c);
        }
        return c;
      }
 else {
        return super.loadClass(name,resolve);
      }
    }
  }
;
}
