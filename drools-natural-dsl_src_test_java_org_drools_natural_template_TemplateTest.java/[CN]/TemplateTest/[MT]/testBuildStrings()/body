{
  Chunk chunk1=new Chunk("baby on board");
  Chunk chunk2=new Chunk("{0}");
  Chunk chunk3=new Chunk("and");
  Chunk chunk4=new Chunk("{1}");
  Chunk chunk5=new Chunk("burt ward");
  chunk1.next=chunk2;
  chunk2.next=chunk3;
  chunk3.next=chunk4;
  chunk4.next=chunk5;
  String nl="yeah this is an expression baby on board exp1 and exp2 burt ward end.";
  chunk1.process(nl);
  HashMap map=new HashMap();
  chunk1.buildValueMap(map);
  StringBuffer buffer=new StringBuffer();
  chunk1.buildSubtitutionKey(buffer);
  assertEquals("baby on board exp1 and exp2 burt ward",buffer.toString());
  String grammar_r="something({0}, {1})";
  String target=buildTarget(map,grammar_r);
  String result=StringUtils.replace(nl,buffer.toString(),target);
  assertEquals("yeah this is an expression something(exp1, exp2) end.",result);
}
