{
  MavenProject mavenProject=getMavenProjectForGAV(gav);
  if (mavenProject == null) {
    return null;
  }
  mavenRepository=MavenRepository.getMavenRepository(mavenProject);
  PomParser pomParser=new EmbeddedPomParser(mavenProject);
  MemoryKieModule kieModule=new MemoryKieModule(gav);
  for (  DependencyDescriptor dep : pomParser.getPomDirectDependencies()) {
    Artifact depArtifact=mavenRepository.resolveArtifact(dep.toString());
    if (isKJar(depArtifact.getFile())) {
      GAV depGav=new DependencyDescriptor(depArtifact).getGav();
      kieModule.addDependency(new ZipKieModule(depGav,depArtifact.getFile()));
    }
  }
  build(kieModule);
  return kieModule;
}
