{
  canvas=new Canvas();
  canvas.setBackground(Color.BLACK);
  canvas.setSize(new Dimension(conf.getWindowWidth(),conf.getWindowHeight()));
  KeyListener klistener=new GameKeyListener(ksession.getEntryPoint("KeyPressedStream"),ksession.getEntryPoint("KeyReleasedStream"));
  canvas.addKeyListener(klistener);
  canvas.addMouseListener(new MouseListener(){
    @Override public void mouseClicked(    MouseEvent e){
      canvas.requestFocus();
    }
    @Override public void mousePressed(    MouseEvent e){
    }
    @Override public void mouseReleased(    MouseEvent e){
    }
    @Override public void mouseEntered(    MouseEvent e){
    }
    @Override public void mouseExited(    MouseEvent e){
    }
  }
);
  JFrame frame=new JFrame();
  frame.setResizable(false);
  frame.setDefaultCloseOperation(conf.isExitOnClose() ? JFrame.EXIT_ON_CLOSE : JFrame.DISPOSE_ON_CLOSE);
  frame.setSize(new Dimension(conf.getWindowWidth(),conf.getWindowHeight()));
  frame.setBackground(Color.BLACK);
  frame.add(canvas);
  frame.pack();
  frame.setVisible(true);
  frame.setLocationRelativeTo(null);
  canvas.createBufferStrategy(2);
  canvas.requestFocus();
}
