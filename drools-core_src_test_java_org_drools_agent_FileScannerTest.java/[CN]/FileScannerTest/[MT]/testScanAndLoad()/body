{
  Package p1=new Package("p1");
  Package p2=new Package("p2");
  File dir=RuleBaseAssemblerTest.getTempDirectory();
  File p1f=new File(dir,"p1.pkg");
  File p2f=new File(dir,"p2.pkg");
  RuleBaseAssemblerTest.writePackage(p1,p1f);
  RuleBaseAssemblerTest.writePackage(p2,p2f);
  FileScanner scan=new FileScanner();
  scan.setFiles(new String[]{p1f.getPath(),p2f.getPath()});
  RuleBase rb=RuleBaseFactory.newRuleBase();
  scan.updateRuleBase(rb);
  assertEquals(2,rb.getPackages().length);
  assertEquals("p1",rb.getPackages()[0].getName());
  assertEquals("p2",rb.getPackages()[1].getName());
  scan.updateRuleBase(rb);
  assertEquals(2,rb.getPackages().length);
  assertEquals("p1",rb.getPackages()[0].getName());
  assertEquals("p2",rb.getPackages()[1].getName());
  RuleBaseAssemblerTest.writePackage(p2,p2f);
  scan.updateRuleBase(rb);
  assertEquals(2,rb.getPackages().length);
  assertEquals("p1",rb.getPackages()[0].getName());
  assertEquals("p2",rb.getPackages()[1].getName());
}
