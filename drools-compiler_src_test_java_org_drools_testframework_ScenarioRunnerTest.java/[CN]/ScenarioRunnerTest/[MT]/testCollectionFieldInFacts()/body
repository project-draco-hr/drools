{
  ScenarioRunner runner=new ScenarioRunner(new Scenario(),null,new MockWorkingMemory());
  Cheesery listChesse=new Cheesery();
  Cheese f1=new Cheese("cheddar",42);
  Cheese f2=new Cheese("Camembert",43);
  Cheese f3=new Cheese("Emmental",45);
  runner.populatedData.put("f1",f1);
  runner.populatedData.put("f2",f2);
  runner.populatedData.put("f3",f3);
  FactData fd1=new FactData("Cheese","f1",ls(new FieldData("type",""),new FieldData("price","42")),false);
  FactData fd2=new FactData("Cheese","f2",ls(new FieldData("type",""),new FieldData("price","43")),false);
  FactData fd3=new FactData("Cheese","f3",ls(new FieldData("type",""),new FieldData("price","45")),false);
  runner.populatedData.put("ACheesery",listChesse);
  FieldData field=new FieldData();
  field.name="cheeses";
  field.collectionType="Cheese";
  field.nature=FieldData.TYPE_COLLECTION;
  field.value="=[f1,f2,f3]";
  List<FieldData> lstField=new ArrayList<FieldData>();
  lstField.add(field);
  FactData lst=new FactData("Cheesery","listChesse",lstField,false);
  runner.populateFields(lst,runner.populatedData,listChesse);
  assertTrue(listChesse.getCheeses().size() == 3);
  assertTrue(listChesse.getCheeses().contains(f1));
  assertTrue(listChesse.getCheeses().contains(f3));
  assertTrue(listChesse.getCheeses().contains(f3));
}
