{
  RuleBase rb=RuleBaseFactory.newRuleBase();
  WorkingMemory wm=rb.newWorkingMemory();
  LiteralValue literalKey1=new LiteralValue("literalKey1");
  LiteralValue literalValue1=new LiteralValue("literalValue1");
  MapValue.KeyValuePair literalPair=new MapValue.KeyValuePair(literalKey1,literalValue1);
  MapValue nestedMapValue=new MapValue(new MapValue.KeyValuePair[]{literalPair});
  LiteralValue literalKey2=new LiteralValue("literalKey2");
  MapValue.KeyValuePair nestedMapPair=new MapValue.KeyValuePair(literalKey2,nestedMapValue);
  MapValue mapValue=new MapValue(new MapValue.KeyValuePair[]{nestedMapPair});
  Cheese stilton=new Cheese("stilton",20);
  FactHandle stiltonHandle=wm.assertObject(stilton);
  Tuple tuple=new ReteTuple((DefaultFactHandle)stiltonHandle);
  Map map=(Map)mapValue.getValue(tuple,wm);
  Map nestedMap=(Map)map.get("literalKey2");
  assertEquals("literalValue1",nestedMap.get("literalKey1"));
}
