{
  try {
    String originalType="stilton";
    int originalPrice=15;
    Cheese cheese=new Cheese(originalType,originalPrice);
    Class proxy=ShadowProxyFactory.getProxy(Cheese.class);
    Cheese cheeseProxy=(Cheese)proxy.getConstructor(new Class[]{Cheese.class}).newInstance(new Object[]{cheese});
    Assert.assertEquals(originalType,cheeseProxy.getType());
    Assert.assertEquals(originalPrice,cheeseProxy.getPrice());
    String actualType="rotten stilton";
    int actualPrice=1;
    cheese.setType(actualType);
    cheese.setPrice(actualPrice);
    Assert.assertEquals(actualType,cheese.getType());
    Assert.assertFalse(actualType.equals(cheeseProxy.getType()));
    Assert.assertEquals(originalType,cheeseProxy.getType());
    Assert.assertEquals(actualPrice,cheese.getPrice());
    Assert.assertFalse(actualPrice == cheeseProxy.getPrice());
    Assert.assertEquals(originalPrice,cheeseProxy.getPrice());
    ((ShadowProxy)cheeseProxy).updateProxy();
    Assert.assertEquals(actualType,cheese.getType());
    Assert.assertEquals(actualType,cheeseProxy.getType());
    Assert.assertFalse(originalType.equals(cheeseProxy.getType()));
    Assert.assertEquals(actualPrice,cheese.getPrice());
    Assert.assertEquals(actualPrice,cheeseProxy.getPrice());
    Assert.assertFalse(originalPrice == cheeseProxy.getPrice());
  }
 catch (  Exception e) {
    fail("Error: " + e.getMessage());
  }
}
