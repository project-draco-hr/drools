{
  try {
    ClassBuilder builder=new ClassBuilder();
    ClassDefinition classDef=new ClassDefinition("org.drools.TestClass3",null,new String[]{});
    FieldDefinition intDef=new FieldDefinition("intAttr","int",true);
    FieldDefinition strDef=new FieldDefinition("stringAttr","java.lang.String",false);
    classDef.addField(intDef);
    classDef.addField(strDef);
    Class clazz=builder.buildAndLoadClass(classDef);
    intDef.setReadWriteAccessor(store.getAccessor(clazz,intDef.getName(),classLoader));
    strDef.setReadWriteAccessor(store.getAccessor(clazz,strDef.getName(),classLoader));
    Object x=clazz.newInstance();
    intDef.setValue(x,new Integer(10));
    strDef.setValue(x,"abc");
    Assert.assertEquals("Wrong hashcode calculation",31 + 10,x.hashCode());
    Assert.assertEquals("Wrong hashcode calculation",x.hashCode(),x.hashCode());
  }
 catch (  Exception e) {
    e.printStackTrace();
    Assert.fail("Exception not expected");
  }
}
