{
  RuleBase rb=RuleBaseFactory.newRuleBase();
  WorkingMemory wm=rb.newWorkingMemory();
  final List wmList=new ArrayList();
  WorkingMemoryEventListener workingMemoryListener=new WorkingMemoryEventListener(){
    public void objectAsserted(    ObjectAssertedEvent event){
      wmList.add(event);
    }
    public void objectModified(    ObjectModifiedEvent event){
      wmList.add(event);
    }
    public void objectRetracted(    ObjectRetractedEvent event){
      wmList.add(event);
    }
  }
;
  wm.addEventListener(workingMemoryListener);
  Cheese stilton=new Cheese("stilton",15);
  Cheese cheddar=new Cheese("cheddar",17);
  FactHandle stiltonHandle=wm.assertObject(stilton);
  ObjectAssertedEvent oae=(ObjectAssertedEvent)wmList.get(0);
  assertSame(stiltonHandle,oae.getFactHandle());
  wm.modifyObject(stiltonHandle,stilton);
  ObjectModifiedEvent ome=(ObjectModifiedEvent)wmList.get(1);
  assertSame(stiltonHandle,ome.getFactHandle());
  wm.retractObject(stiltonHandle);
  ObjectRetractedEvent ore=(ObjectRetractedEvent)wmList.get(2);
  assertSame(stiltonHandle,ore.getFactHandle());
  wm.assertObject(cheddar);
}
