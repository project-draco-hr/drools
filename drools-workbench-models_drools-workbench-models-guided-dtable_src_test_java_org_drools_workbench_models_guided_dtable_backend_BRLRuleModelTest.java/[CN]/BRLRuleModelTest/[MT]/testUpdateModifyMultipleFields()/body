{
  GuidedDecisionTable52 dt=new GuidedDecisionTable52();
  Pattern52 p1=new Pattern52();
  p1.setBoundName("x");
  p1.setFactType("Context");
  ConditionCol52 c=new ConditionCol52();
  c.setConstraintValueType(BaseSingleFieldConstraint.TYPE_LITERAL);
  p1.getChildColumns().add(c);
  dt.getConditions().add(p1);
  BRLActionColumn brlAction1=new BRLActionColumn();
  ActionUpdateField auf1=new ActionUpdateField("x");
  auf1.addFieldValue(new ActionFieldValue("age","$age",DataType.TYPE_NUMERIC_INTEGER));
  auf1.getFieldValues()[0].setNature(BaseSingleFieldConstraint.TYPE_TEMPLATE);
  brlAction1.getDefinition().add(auf1);
  brlAction1.getChildColumns().add(new BRLActionVariableColumn("$age",DataType.TYPE_NUMERIC_INTEGER,"Context","age"));
  dt.getActionCols().add(brlAction1);
  BRLActionColumn brlAction2=new BRLActionColumn();
  ActionUpdateField auf2=new ActionUpdateField("x");
  auf2.addFieldValue(new ActionFieldValue("name","$name",DataType.TYPE_STRING));
  auf2.getFieldValues()[0].setNature(BaseSingleFieldConstraint.TYPE_TEMPLATE);
  brlAction2.getDefinition().add(auf2);
  brlAction2.getChildColumns().add(new BRLActionVariableColumn("$name",DataType.TYPE_STRING,"Context","name"));
  dt.getActionCols().add(brlAction2);
  dt.setData(DataUtilities.makeDataLists(new String[][]{new String[]{"1","desc","x","55","Fred"}}));
  String drl=GuidedDTDRLPersistence.getInstance().marshal(dt);
  final String expected1="//from row number: 1\n" + "//desc\n" + "rule \"Row 1 null\"\n"+ "dialect \"mvel\"\n"+ "when\n"+ "  x : Context( )\n"+ "then\n"+ "  modify( x ) {\n"+ "    setAge( 55 ), \n"+ "    setName( \"Fred\" )\n"+ "}\n"+ "end\n";
  assertEqualsIgnoreWhitespace(expected1,drl);
  dt.setData(DataUtilities.makeDataLists(new String[][]{new String[]{"1","desc","x","","Fred"}}));
  drl=GuidedDTDRLPersistence.getInstance().marshal(dt);
  final String expected2="//from row number: 1\n" + "//desc\n" + "rule \"Row 1 null\"\n"+ "dialect \"mvel\"\n"+ "when\n"+ "  x : Context( )\n"+ "then\n"+ "  modify( x ) {\n"+ "    setName( \"Fred\" )\n"+ "}\n"+ "end\n";
  assertEqualsIgnoreWhitespace(expected2,drl);
  dt.setData(DataUtilities.makeDataLists(new String[][]{new String[]{"1","desc","x","55",""}}));
  drl=GuidedDTDRLPersistence.getInstance().marshal(dt);
  final String expected3="//from row number: 1\n" + "//desc\n" + "rule \"Row 1 null\"\n"+ "dialect \"mvel\"\n"+ "when\n"+ "  x : Context( )\n"+ "then\n"+ "  modify( x ) {\n"+ "    setAge( 55 ) \n"+ "}\n"+ "end\n";
  assertEqualsIgnoreWhitespace(expected3,drl);
}
