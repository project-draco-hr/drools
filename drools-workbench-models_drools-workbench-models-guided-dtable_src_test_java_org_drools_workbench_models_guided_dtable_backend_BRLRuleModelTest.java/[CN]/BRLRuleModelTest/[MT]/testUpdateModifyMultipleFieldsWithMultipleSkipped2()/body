{
  GuidedDecisionTable52 dt=new GuidedDecisionTable52();
  Pattern52 p1=new Pattern52();
  p1.setBoundName("x");
  p1.setFactType("Context");
  ConditionCol52 c=new ConditionCol52();
  c.setConstraintValueType(BaseSingleFieldConstraint.TYPE_LITERAL);
  p1.getChildColumns().add(c);
  dt.getConditions().add(p1);
  BRLActionColumn brlAction1=new BRLActionColumn();
  ActionUpdateField auf1=new ActionUpdateField("x");
  auf1.addFieldValue(new ActionFieldValue("f1","$f1",DataType.TYPE_STRING));
  auf1.getFieldValues()[0].setNature(BaseSingleFieldConstraint.TYPE_TEMPLATE);
  brlAction1.getDefinition().add(auf1);
  brlAction1.getChildColumns().add(new BRLActionVariableColumn("$f1",DataType.TYPE_STRING,"Context","f1"));
  ActionUpdateField auf2=new ActionUpdateField("x");
  auf2.addFieldValue(new ActionFieldValue("f2","$f2",DataType.TYPE_STRING));
  auf2.getFieldValues()[0].setNature(BaseSingleFieldConstraint.TYPE_TEMPLATE);
  brlAction1.getDefinition().add(auf2);
  brlAction1.getChildColumns().add(new BRLActionVariableColumn("$f2",DataType.TYPE_STRING,"Context","f2"));
  ActionUpdateField auf3=new ActionUpdateField("x");
  auf3.addFieldValue(new ActionFieldValue("f3","$f3",DataType.TYPE_STRING));
  auf3.getFieldValues()[0].setNature(BaseSingleFieldConstraint.TYPE_TEMPLATE);
  brlAction1.getDefinition().add(auf3);
  brlAction1.getChildColumns().add(new BRLActionVariableColumn("$f3",DataType.TYPE_STRING,"Context","f3"));
  dt.getActionCols().add(brlAction1);
  dt.setData(DataUtilities.makeDataLists(new String[][]{new String[]{"1","desc","x",null,"v2","v3"}}));
  String drl=GuidedDTDRLPersistence.getInstance().marshal(dt);
  final String expected="//from row number: 1\n" + "//desc\n" + "rule \"Row 1 null\"\n"+ "dialect \"mvel\"\n"+ "when\n"+ "  x : Context( )\n"+ "then\n"+ "  modify( x ) {\n"+ "    setF2( \"v2\" ),\n"+ "    setF3( \"v3\" )\n"+ "}\n"+ "end\n";
  assertEqualsIgnoreWhitespace(expected,drl);
}
