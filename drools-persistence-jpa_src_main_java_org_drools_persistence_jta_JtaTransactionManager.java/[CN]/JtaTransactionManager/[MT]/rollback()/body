{
  boolean wasLocal=localTransaction;
  localTransaction=false;
  try {
    if (wasLocal) {
      this.ut.rollback();
    }
 else {
      this.ut.setRollbackOnly();
    }
  }
 catch (  Exception e) {
    logger.warn("Unable to rollback transaction",e);
    throw new RuntimeException("Unable to rollback transaction",e);
  }
}
