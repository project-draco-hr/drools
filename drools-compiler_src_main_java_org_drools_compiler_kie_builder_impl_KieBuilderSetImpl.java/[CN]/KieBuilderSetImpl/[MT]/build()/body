{
  Collection<String> filesToBuild=files != null ? asList(files) : kieBuilder.getModifiedResourcesSinceLastMark();
  if (filesToBuild.isEmpty()) {
    return new IncrementalResultsImpl();
  }
  kieBuilder.cloneKieModuleForIncrementalCompilation();
  for (  String file : filesToBuild) {
    kieBuilder.copySourceToTarget(file);
  }
  IncrementalResults result=buildChanges(filesToBuild);
  files=null;
  kieBuilder.markSource();
  return result;
}
