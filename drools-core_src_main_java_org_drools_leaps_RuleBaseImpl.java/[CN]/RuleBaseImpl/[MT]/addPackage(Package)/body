{
  rulesPackage.checkValidity();
  Map newApplicationData=rulesPackage.getGlobals();
  for (Iterator it=newApplicationData.keySet().iterator(); it.hasNext(); ) {
    String identifier=(String)it.next();
    Class type=(Class)newApplicationData.get(identifier);
    if (this.applicationData.containsKey(identifier) && !this.applicationData.get(identifier).equals(type)) {
      throw new PackageIntegrationException(rulesPackage);
    }
  }
  this.applicationData.putAll(newApplicationData);
  this.rulesPackages.add(rulesPackage);
  Rule[] rules=rulesPackage.getRules();
  for (int i=0, length=rules.length; i < length; ++i) {
    addRule(rules[i]);
  }
}
