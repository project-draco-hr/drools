{
  this.factHandleFactory=factHandleFactory;
  this.conflictResolver=conflictResolver;
  this.applicationData=applicationData;
  this.ruleBaseContext=ruleBaseContext;
  this.workingMemories=new WeakHashMap();
  this.builder=new Builder();
  this.ruleSets=new HashMap();
  if (ruleSets != null) {
    int i=0;
    RuleSet ruleSet;
    for (Iterator it=ruleSets.iterator(); it.hasNext(); i++) {
      ruleSet=(RuleSet)it.next();
      this.ruleSets.put(new Integer(i),ruleSet);
      Rule[] rules=ruleSet.getRules();
      for (int k=0; k < rules.length; k++) {
        this.addRule(rules[k]);
      }
    }
  }
  this.ruleSets.put(defaultRuleSet,new RuleSet(defaultRuleSet,this.ruleBaseContext));
}
