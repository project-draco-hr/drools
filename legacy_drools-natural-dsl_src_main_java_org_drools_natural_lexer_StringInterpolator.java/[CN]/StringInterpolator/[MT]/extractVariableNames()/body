{
  boolean inVariable=false;
  char[] chars=originalString.toCharArray();
  List result=new ArrayList();
  StringBuffer varName=new StringBuffer();
  for (int i=0; i < chars.length; i++) {
switch (chars[i]) {
case '$':
      if (nextCharIsBracket(chars,i)) {
        inVariable=true;
        i++;
        varName=new StringBuffer();
      }
    break;
case '}':
  if (inVariable) {
    inVariable=false;
    String var=varName.toString();
    if (!result.contains(var)) {
      result.add(varName.toString());
    }
  }
break;
default :
if (inVariable) {
varName.append(chars[i]);
}
break;
}
}
return result;
}
