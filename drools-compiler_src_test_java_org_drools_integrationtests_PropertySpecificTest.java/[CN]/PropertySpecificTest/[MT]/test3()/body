{
  String rule1="$b : B() A( i == $b.i)";
  KnowledgeBase kbase=getKnowledgeBase(rule1);
  ReteooWorkingMemoryInterface wm=((StatefulKnowledgeSessionImpl)kbase.newStatefulKnowledgeSession()).session;
  ObjectTypeNode otn=getObjectTypeNode(kbase,"A");
  List<String> sp=PropertySpecificUtil.getSettableProperties(wm,otn);
  BetaNode betaNode=(BetaNode)otn.getSinkPropagator().getSinks()[0];
  assertEquals(PropertySpecificUtil.calculateMaskFromPattern(list("i"),0,sp),betaNode.getDeclaredMask());
}
