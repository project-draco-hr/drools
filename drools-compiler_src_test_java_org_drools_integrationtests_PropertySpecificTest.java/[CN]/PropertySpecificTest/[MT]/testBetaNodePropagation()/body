{
  String rule="package org.drools\n" + "import org.drools.integrationtests.PropertySpecificTest.Hero\n" + "import org.drools.integrationtests.PropertySpecificTest.MoveCommand\n"+ "rule \"Move\" when\n"+ "   $mc : MoveCommand( move == 1 )"+ "   $h  : Hero( canMove == true )"+ "then\n"+ "   modify( $h ) { setPosition($h.getPosition() + 1) };\n"+ "   retract ( $mc );\n"+ "   System.out.println( \"Move: \" + $h + \" : \" + $mc );"+ "end\n";
  KnowledgeBase kbase=loadKnowledgeBaseFromString(rule);
  StatefulKnowledgeSession ksession=kbase.newStatefulKnowledgeSession();
  Hero hero=new Hero();
  hero.setPosition(0);
  hero.setCanMove(true);
  ksession.insert(hero);
  System.out.println("FIRE 1");
  ksession.fireAllRules();
  MoveCommand moveCommand=new MoveCommand();
  moveCommand.setMove(1);
  ksession.insert(moveCommand);
  System.out.println("FIRE 2");
  ksession.fireAllRules();
  moveCommand=moveCommand=new MoveCommand();
  moveCommand.setMove(1);
  ksession.insert(moveCommand);
  System.out.println("FIRE 3");
  ksession.fireAllRules();
  assertEquals(2,hero.getPosition());
}
