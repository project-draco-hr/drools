{
  KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase();
  StatefulKnowledgeSession ksession=kbase.newStatefulKnowledgeSession();
  Action executeResultHandler=PipelineFactory.newExecuteResultHandler();
  StatefulKnowledgeSessionInsertStage insertStage=new StatefulKnowledgeSessionInsertStage();
  insertStage.setReceiver(executeResultHandler);
  Pipeline pipeline=PipelineFactory.newStatefulKnowledgeSessionPipeline(ksession);
  pipeline.setReceiver(insertStage);
  assertEquals(0,ksession.getObjects().size());
  ResultHandlerImpl resultHanadle=new ResultHandlerImpl();
  pipeline.insert("Hello",resultHanadle);
  assertEquals(1,resultHanadle.getHandles().size());
}
