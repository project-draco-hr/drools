{
  PackageBuilder builder=new PackageBuilder();
  builder.addPackageFromDrl(new InputStreamReader(getClass().getResourceAsStream("test_Dynamic1.drl")));
  builder.addPackageFromDrl(new InputStreamReader(getClass().getResourceAsStream("test_Dynamic2.drl")));
  builder.addPackageFromDrl(new InputStreamReader(getClass().getResourceAsStream("test_Dynamic3.drl")));
  builder.addPackageFromDrl(new InputStreamReader(getClass().getResourceAsStream("test_Dynamic4.drl")));
  Package pkg=builder.getPackage();
  org.drools.reteoo.RuleBaseImpl ruleBase=new org.drools.reteoo.RuleBaseImpl();
  ruleBase.addPackage(pkg);
  WorkingMemory workingMemory=ruleBase.newWorkingMemory();
  List list=new ArrayList();
  workingMemory.setGlobal("list",list);
  Person bob=new Person("bob","stilton");
  bob.setStatus("Not evaluated");
  workingMemory.assertObject(bob);
  Cheese stilton1=new Cheese("stilton",5);
  workingMemory.assertObject(stilton1);
  Cheese stilton2=new Cheese("stilton",3);
  workingMemory.assertObject(stilton2);
  Cheese stilton3=new Cheese("stilton",1);
  workingMemory.assertObject(stilton3);
  Cheese cheddar=new Cheese("cheddar",5);
  workingMemory.assertObject(cheddar);
  assertEquals(11,workingMemory.getAgenda().getActivations().length);
  ruleBase.removeRule("org.drools.test","Who likes Stilton");
  assertEquals(8,workingMemory.getAgenda().getActivations().length);
  ruleBase.removeRule("org.drools.test","like cheese");
  assertEquals(4,workingMemory.getAgenda().getActivations().length);
  ruleBase.removePackage("org.drools.test");
  assertEquals(0,workingMemory.getAgenda().getActivations().length);
}
