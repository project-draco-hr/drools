{
  final PackageBuilder builder=new PackageBuilder();
  builder.addPackageFromDrl(new InputStreamReader(getClass().getResourceAsStream("test_DeclaringAndUsingBindsInSamePattern.drl")));
  final Package pkg=builder.getPackage();
  final RuleBase ruleBase=getRuleBase();
  ruleBase.addPackage(pkg);
  final WorkingMemory workingMemory=ruleBase.newWorkingMemory();
  try {
    List sensors=new ArrayList();
    workingMemory.setGlobal("sensors",sensors);
    Sensor sensor1=new Sensor(100,150);
    workingMemory.assertObject(sensor1);
    workingMemory.fireAllRules();
    assertEquals(0,sensors.size());
    Sensor sensor2=new Sensor(200,150);
    workingMemory.assertObject(sensor2);
    workingMemory.fireAllRules();
    assertEquals(1,sensors.size());
  }
 catch (  RuntimeException e) {
    e.printStackTrace();
    fail("Should not throw any exception");
  }
}
