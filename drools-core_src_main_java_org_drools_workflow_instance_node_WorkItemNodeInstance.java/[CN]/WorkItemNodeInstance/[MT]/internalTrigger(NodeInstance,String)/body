{
  super.internalTrigger(from,type);
  WorkItemNode workItemNode=getWorkItemNode();
  createWorkItem(workItemNode);
  if (workItemNode.isWaitForCompletion()) {
    addWorkItemListener();
  }
  if (isInversionOfControl()) {
    ((ProcessInstance)getProcessInstance()).getWorkingMemory().update(((ProcessInstance)getProcessInstance()).getWorkingMemory().getFactHandle(this),this);
  }
 else {
    ((WorkItemManager)((ProcessInstance)getProcessInstance()).getWorkingMemory().getWorkItemManager()).internalExecuteWorkItem(workItem);
  }
  if (!workItemNode.isWaitForCompletion()) {
    triggerCompleted();
  }
 else {
    this.workItemId=workItem.getId();
  }
}
