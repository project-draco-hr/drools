{
  KnowledgeBuilder kBuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kBuilder.add(ResourceFactory.newClassPathResource("waltz.drl",Waltz.class),ResourceType.DRL);
  if (kBuilder.hasErrors()) {
    fail(kBuilder.getErrors().toString());
  }
  KieBaseConfiguration kconf=KnowledgeBaseFactory.newKnowledgeBaseConfiguration();
  kconf.setOption(PhreakOption.ENABLED);
  KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase(kconf);
  kbase.addKnowledgePackages(kBuilder.getKnowledgePackages());
  return (KieBase)kbase;
}
