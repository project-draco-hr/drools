{
  if (object == null) {
    writeNull();
  }
 else {
    Class clazz=object.getClass();
    if (clazz == EMPTY_SET_CLASS) {
      writeEmptySet();
    }
 else     if (clazz == EMPTY_LIST_CLASS) {
      writeEmptyList();
    }
 else     if (clazz == EMPTY_MAP_CLASS) {
      writeEmptyMap();
    }
 else     if (clazz == String.class) {
      writeObjectOrReference(((String)object).intern(),clazz);
    }
 else {
      writeObjectOrReference(object,clazz);
    }
  }
  flush();
}
