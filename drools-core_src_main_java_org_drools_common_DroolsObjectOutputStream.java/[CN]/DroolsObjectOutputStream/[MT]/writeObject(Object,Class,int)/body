{
  if (Externalizable.class.isAssignableFrom(clazz)) {
    writeExternalizable((Externalizable)object,clazz,handle);
  }
 else   if (String.class.isAssignableFrom(clazz)) {
    writeString((String)object,handle);
  }
 else   if (Map.class.isAssignableFrom(clazz)) {
    writeMap((Map)object,clazz,handle);
  }
 else   if (Collection.class.isAssignableFrom(clazz)) {
    writeCollection((Collection)object,clazz,handle);
  }
 else   if (clazz == Class.class) {
    writeClass((Class)object,handle);
  }
 else   if (clazz.isArray()) {
    writeArray(object,clazz,handle);
  }
 else   if (AtomicReferenceArray.class.isAssignableFrom(clazz)) {
    writeAtomicReferenceArray((AtomicReferenceArray)object,handle);
  }
 else   if (Serializable.class.isAssignableFrom(clazz)) {
    writeSerializable((Serializable)object,handle);
  }
 else {
    throw new NotSerializableException("Unsupported class: " + clazz);
  }
}
