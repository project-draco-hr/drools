{
  if (remove) {
    ((org.drools.workflow.instance.NodeInstanceContainer)getNodeInstanceContainer()).removeNodeInstance(this);
  }
  Node node=getNode();
  List<Connection> connections=null;
  if (node != null) {
    connections=node.getOutgoingConnections(type);
  }
  if (connections == null || connections.isEmpty()) {
    ((org.drools.workflow.instance.NodeInstanceContainer)getNodeInstanceContainer()).nodeInstanceCompleted(this,type);
  }
 else {
    for (    Connection connection : connections) {
      if (getProcessInstance().getState() != ProcessInstance.STATE_ACTIVE) {
        return;
      }
      triggerConnection(connection);
    }
  }
}
