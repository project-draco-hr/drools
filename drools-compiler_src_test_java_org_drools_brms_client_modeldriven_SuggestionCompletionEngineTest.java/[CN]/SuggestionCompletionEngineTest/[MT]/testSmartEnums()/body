{
  final SuggestionCompletionEngine sce=new SuggestionCompletionEngine();
  sce.dataEnumLists=new HashMap();
  sce.dataEnumLists.put("Fact.type",new String[]{"sex","colour"});
  sce.dataEnumLists.put("Fact.value[type=sex]",new String[]{"M","F"});
  sce.dataEnumLists.put("Fact.value[type=colour]",new String[]{"RED","WHITE","BLUE"});
  FactPattern pat=new FactPattern("Fact");
  SingleFieldConstraint sfc=new SingleFieldConstraint("type");
  sfc.value="sex";
  pat.addConstraint(sfc);
  String[] result=sce.getEnums(pat,"value");
  assertEquals(2,result.length);
  assertEquals("M",result[0]);
  assertEquals("F",result[1]);
  pat=new FactPattern("Fact");
  sfc=new SingleFieldConstraint("type");
  sfc.value="colour";
  pat.addConstraint(sfc);
  result=sce.getEnums(pat,"value");
  assertEquals(3,result.length);
  assertEquals("RED",result[0]);
  assertEquals("WHITE",result[1]);
  assertEquals("BLUE",result[2]);
  result=sce.getEnums(pat,"type");
  assertEquals(2,result.length);
  assertEquals("sex",result[0]);
  assertEquals("colour",result[1]);
}
