{
  NLGrammar g=new NLGrammar();
  g.addNLItem(new NLMappingItem("This is something","boo","then"));
  g.addNLItem(new NLMappingItem("This is another","coo","then"));
  g.addNLItem(new NLMappingItem("end","it","*"));
  g.setDescription("my description");
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  OutputStreamWriter writer=new OutputStreamWriter(out);
  g.save(writer);
  String result=out.toString();
  assertEquals("#my description\n[then]This is something=boo\n[then]This is another=coo\nend=it\n",result);
  ByteArrayInputStream in=new ByteArrayInputStream(out.toByteArray());
  InputStreamReader reader=new InputStreamReader(in);
  g=new NLGrammar();
  g.load(reader);
  assertEquals(3,g.getMappings().size());
  assertEquals("my description",g.getDescription());
}
