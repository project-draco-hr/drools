{
  NLGrammar g=new NLGrammar();
  g.addNLItem(new NLMappingItem("This is something","boo","then"));
  g.addNLItem(new NLMappingItem("This is another","coo","then"));
  g.addNLItem(new NLMappingItem("end","it","*"));
  g.setDescription("my description");
  final ByteArrayOutputStream out=new ByteArrayOutputStream();
  final OutputStreamWriter writer=new OutputStreamWriter(out);
  g.save(writer);
  final String result=out.toString();
  assertEquals("#my description\n[then][null]This is something=boo\n[then][null]This is another=coo\n[null]end=it\n",result);
  final ByteArrayInputStream in=new ByteArrayInputStream(out.toByteArray());
  final InputStreamReader reader=new InputStreamReader(in);
  g=new NLGrammar();
  g.load(reader);
  assertEquals(3,g.getMappings().size());
  assertEquals("my description",g.getDescription());
}
