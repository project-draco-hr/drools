{
  final int hashCode=this.comparator.hashCodeOf(handle);
  final int index=indexOf(hashCode,this.table.length);
  if (checkExists) {
    FactEntry current=(FactEntry)this.table[index];
    while (current != null) {
      if (hashCode == current.hashCode && handle.getId() == current.handle.getId()) {
        return false;
      }
      current=(FactHashTable.FactEntry)current.getNext();
    }
  }
  final FactEntry entry=new FactEntry(handle,hashCode);
  entry.next=this.table[index];
  this.table[index]=entry;
  if (this.size++ >= this.threshold) {
    resize(2 * this.table.length);
  }
  return true;
}
