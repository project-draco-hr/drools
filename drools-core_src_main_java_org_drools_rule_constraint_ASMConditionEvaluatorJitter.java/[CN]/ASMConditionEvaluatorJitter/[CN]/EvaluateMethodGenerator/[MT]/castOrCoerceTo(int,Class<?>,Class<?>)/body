{
  Label nonInstanceOfLabel=new Label();
  Label endOfCoercionLabel=new Label();
  load(regNr);
  instanceOf(toType);
  mv.visitJumpInsn(IFEQ,nonInstanceOfLabel);
  load(regNr);
  cast(toType);
  store(regNr,toType);
  mv.visitJumpInsn(GOTO,endOfCoercionLabel);
  mv.visitLabel(nonInstanceOfLabel);
  mv.visitTypeInsn(NEW,internalName(toType));
  mv.visitInsn(DUP);
  load(regNr);
  coerceByConstructor(fromType,toType);
  store(regNr,toType);
  mv.visitLabel(endOfCoercionLabel);
}
