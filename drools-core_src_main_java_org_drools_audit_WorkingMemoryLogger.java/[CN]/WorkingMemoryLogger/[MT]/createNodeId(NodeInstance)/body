{
  Node node=((org.drools.workflow.instance.NodeInstance)nodeInstance).getNode();
  String nodeId="" + node.getId();
  NodeContainer nodeContainer=node.getNodeContainer();
  while (nodeContainer != null) {
    if (nodeContainer instanceof CompositeNode) {
      node=(CompositeNode)nodeContainer;
      nodeId=node.getId() + ":" + nodeId;
      nodeContainer=node.getNodeContainer();
    }
 else {
      break;
    }
  }
  return nodeId;
}
