{
  final StringBuffer result=new StringBuffer();
  final Tuple tuple=activation.getTuple();
  final Declaration[] declarations=activation.getRule().getDeclarations();
  for (int i=0, length=declarations.length; i < length; i++) {
    final Declaration declaration=declarations[i];
    final FactHandle handle=tuple.get(declaration);
    if (handle instanceof InternalFactHandle) {
      final InternalFactHandle handleImpl=(InternalFactHandle)handle;
      if (handleImpl.getId() == -1) {
        continue;
      }
      final Object value=declaration.getValue((InternalWorkingMemory)workingMemory,workingMemory.getObject(handle));
      result.append(declaration.getIdentifier());
      result.append("=");
      if (value == null) {
        result.append("null");
      }
 else {
        result.append(value);
        result.append("(");
        result.append(handleImpl.getId());
        result.append(")");
      }
    }
    if (i < declarations.length - 1) {
      result.append("; ");
    }
  }
  return result.toString();
}
