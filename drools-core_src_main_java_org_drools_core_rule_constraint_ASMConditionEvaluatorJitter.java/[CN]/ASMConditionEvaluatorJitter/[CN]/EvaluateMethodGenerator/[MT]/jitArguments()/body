{
  if (declarations == null || declarations.length == 0) {
    return;
  }
  declPositions=new int[declarations.length];
  List<GeneratorHelper.DeclarationMatcher> declarationMatchers=matchDeclarationsToTuple(declarations);
  LeftTuple currentLeftTuple=leftTuple;
  mv.visitVarInsn(ALOAD,3);
  store(4,LeftTuple.class);
  int decPos=ARGUMENTS;
  for (  GeneratorHelper.DeclarationMatcher declarationMatcher : declarationMatchers) {
    int i=declarationMatcher.getOriginalIndex();
    if (currentLeftTuple == null || declarationMatcher.getRootDistance() > currentLeftTuple.getIndex()) {
      getFieldFromThis("declarations",Declaration[].class);
      push(i);
      mv.visitInsn(AALOAD);
      mv.visitVarInsn(ALOAD,2);
      mv.visitVarInsn(ALOAD,1);
      invokeInterface(InternalFactHandle.class,"getObject",Object.class);
      declPositions[i]=decPos;
      decPos+=storeObjectFromDeclaration(declarationMatcher.getDeclaration(),decPos);
      continue;
    }
    currentLeftTuple=traverseTuplesUntilDeclaration(currentLeftTuple,declarationMatcher.getRootDistance(),4);
    getFieldFromThis("declarations",Declaration[].class);
    push(i);
    mv.visitInsn(AALOAD);
    mv.visitVarInsn(ALOAD,2);
    load(4);
    invokeInterface(LeftTuple.class,"getHandle",InternalFactHandle.class);
    invokeInterface(InternalFactHandle.class,"getObject",Object.class);
    declPositions[i]=decPos;
    decPos+=storeObjectFromDeclaration(declarationMatcher.getDeclaration(),decPos);
  }
}
