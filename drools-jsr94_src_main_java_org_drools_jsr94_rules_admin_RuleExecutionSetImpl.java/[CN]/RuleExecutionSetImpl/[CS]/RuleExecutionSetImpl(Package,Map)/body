{
  if (null == properties) {
    this.properties=new HashMap();
  }
 else {
    this.properties=properties;
  }
  this.pkg=pkg;
  this.description=pkg.getName();
  RuleBaseConfiguration config=(RuleBaseConfiguration)this.properties.get(Constants.RES_RULEBASE_CONFIG);
  if (config == null) {
    config=new RuleBaseConfiguration();
  }
  config.getComponentFactory().setHandleFactoryProvider(new Jsr94FactHandleFactory());
  org.drools.core.reteoo.ReteooRuleBase ruleBase=new org.drools.core.reteoo.ReteooRuleBase(null,config);
  ruleBase.addPackage(pkg);
  this.ruleBase=ruleBase;
}
