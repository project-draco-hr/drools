{
  PackageBuilder builder=new PackageBuilder();
  builder.addPackageFromDrl(new InputStreamReader(WaltzBenchmark.class.getResourceAsStream("waltz.drl")));
  Package pkg=builder.getPackage();
  final RuleBase ruleBase=RuleBaseFactory.newRuleBase();
  ruleBase.addPackage(pkg);
  StatefulSession session=ruleBase.newStatefulSession();
  String filename;
  if (args.length != 0) {
    String arg=args[0];
    filename=arg;
  }
 else {
    filename="waltz12.dat";
  }
  loadLines(session,filename);
  Stage stage=new Stage(Stage.DUPLICATE);
  session.insert(stage);
  long start=System.currentTimeMillis();
  session.fireAllRules();
  System.out.println((System.currentTimeMillis() - start) / 1000);
  session.dispose();
}
