{
  String drl="package org.mortgages;\n" + "\n" + "import org.mortgages.LoanApplication;\n"+ "\n"+ "rule \"Bankruptcy history\"\n"+ "  dialect \"mvel\"\n"+ "  when\n"+ "    a : LoanApplication( )\n"+ "  then\n"+ "    keke.add( a );\n"+ "end";
  when(dmo.getGlobalCollections()).thenReturn(new String[]{"keke"});
  when(dmo.getGlobalVariable("keke")).thenReturn("java.util.ArrayList");
  when(dmo.getGlobalVariables()).thenReturn(new String[]{"keke"});
  when(dmo.getAllFactTypes()).thenReturn(new String[]{"java.util.ArrayList","org.mortgages.LoanApplication"});
  RuleModel m=BRDRLPersistence.getInstance().unmarshal(drl,dmo);
  assertTrue(m.rhs[0] instanceof ActionGlobalCollectionAdd);
  ActionGlobalCollectionAdd actionGlobalCollectionAdd=(ActionGlobalCollectionAdd)m.rhs[0];
  assertEquals("keke",actionGlobalCollectionAdd.getGlobalName());
  assertEquals("a",actionGlobalCollectionAdd.getFactName());
}
