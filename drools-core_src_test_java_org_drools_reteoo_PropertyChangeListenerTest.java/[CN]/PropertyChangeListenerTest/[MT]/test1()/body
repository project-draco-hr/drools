{
  final ReteooRuleBase ruleBase=(ReteooRuleBase)RuleBaseFactory.newRuleBase();
  final ReteooWorkingMemory workingMemory=(ReteooWorkingMemory)ruleBase.newWorkingMemory();
  final Rete rete=ruleBase.getRete();
  final ObjectTypeNode objectTypeNode=new ObjectTypeNode(1,new ClassObjectType(State.class),rete);
  objectTypeNode.attach();
  final MockObjectSink sink=new MockObjectSink();
  objectTypeNode.addObjectSink(sink);
  final State a=new State("go");
  workingMemory.assertObject(a,true);
  assertEquals(1,sink.getAsserted().size());
  assertEquals(0,sink.getModified().size());
  a.setState("stop");
  assertEquals(1,sink.getModified().size());
}
