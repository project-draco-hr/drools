{
  RuleBaseImpl ruleBase=new RuleBaseImpl();
  WorkingMemoryImpl workingMemory=(WorkingMemoryImpl)ruleBase.newWorkingMemory();
  Rete rete=ruleBase.getRete();
  ObjectTypeNode objectTypeNode=new ObjectTypeNode(1,new ClassObjectType(State.class),rete);
  objectTypeNode.attach();
  MockObjectSink sink=new MockObjectSink();
  objectTypeNode.addObjectSink(sink);
  State a=new State("go");
  workingMemory.assertObject(a,true);
  assertEquals(1,sink.getAsserted().size());
  assertEquals(0,sink.getModified().size());
  a.setState("stop");
  assertEquals(1,sink.getModified().size());
}
