{
  final String ruleTemplate=marshalRule(model);
  log.debug("ruleTemplate:\n{}",ruleTemplate);
  final DataProvider dataProvider=chooseDataProvider(model);
  final DataProviderCompiler tplCompiler=new DataProviderCompiler();
  final String generatedDRl=tplCompiler.compile(dataProvider,new ByteArrayInputStream(ruleTemplate.getBytes()));
  log.debug("generated drl:\n{}",generatedDRl);
  return generatedDRl;
}
