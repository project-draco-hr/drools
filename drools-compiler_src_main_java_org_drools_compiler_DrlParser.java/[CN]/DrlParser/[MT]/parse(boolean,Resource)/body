{
  this.resource=resource;
  InputStream is=resource.getInputStream();
  String encoding=null;
  if (resource instanceof ClassPathResource) {
    encoding=((ClassPathResource)resource).getEncoding();
  }
  if (resource instanceof InputStreamResource) {
    encoding=((InputStreamResource)resource).getEncoding();
  }
  final DRLParser parser=getParser(is,encoding);
  return compile(isEditor,parser);
}
