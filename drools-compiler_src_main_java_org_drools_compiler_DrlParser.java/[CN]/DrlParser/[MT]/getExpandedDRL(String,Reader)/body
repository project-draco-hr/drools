{
  DefaultExpanderResolver resolver;
  try {
    resolver=new DefaultExpanderResolver(dsl);
  }
 catch (  final IOException e) {
    throw new DroolsParserException("Error parsing the DSL.",e);
  }
  final Expander expander=resolver.get("*",null);
  final String expanded=expander.expand(source);
  if (expander.hasErrors()) {
    String err="";
    for (Iterator iter=expander.getErrors().iterator(); iter.hasNext(); ) {
      ExpanderException ex=(ExpanderException)iter.next();
      err=err + "\n Line:[" + ex.getLine()+ "] "+ ex.getMessage();
    }
    throw new DroolsParserException(err);
  }
  return expanded;
}
