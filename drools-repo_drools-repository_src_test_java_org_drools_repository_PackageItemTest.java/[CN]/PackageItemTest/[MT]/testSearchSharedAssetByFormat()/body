{
  AssetItem item=loadGlobalArea().addAsset("testSearchSharedAssetByFormat","");
  item.updateFormat("testSearchSharedAssetByFormat");
  item.checkin("la");
  AssetItemIterator it=loadGlobalArea().queryAssets("drools:format='testSearchSharedAssetByFormat'");
  List list=iteratorToList(it);
  assertEquals(1,list.size());
  assertTrue(list.get(0) instanceof AssetItem);
  PackageItem pkg2=getRepo().createPackage("testSearchSharedAssetByFormat","");
  getRepo().save();
  AssetItem linkedItem=pkg2.addAssetImportedFromGlobalArea(item.getName());
  Thread.sleep(150);
  item=loadGlobalArea().loadAsset("testSearchSharedAssetByFormat");
  assertEquals("testSearchSharedAssetByFormat",item.getFormat());
  it=loadGlobalArea().queryAssets("drools:format='testSearchSharedAssetByFormat'");
  list=iteratorToList(it);
  assertEquals(1,list.size());
  assertTrue(list.get(0) instanceof AssetItem);
}
