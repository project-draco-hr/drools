{
  if (classpathKContainer == null) {
synchronized (lock) {
      if (classpathKContainer == null) {
        classpathClassLoader=classLoader;
        classpathKContainer=newKieClasspathContainer(classLoader);
      }
 else       if (classLoader != classpathClassLoader) {
        throw new IllegalStateException("There's already another KieContainer created from a different ClassLoader");
      }
    }
  }
 else   if (classLoader != classpathClassLoader) {
    throw new IllegalStateException("There's already another KieContainer created from a different ClassLoader");
  }
  return classpathKContainer;
}
