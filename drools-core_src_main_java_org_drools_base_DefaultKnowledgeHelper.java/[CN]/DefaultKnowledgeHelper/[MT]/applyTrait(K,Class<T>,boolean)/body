{
  AbstractRuleBase arb=(AbstractRuleBase)((KnowledgeBaseImpl)this.getKnowledgeRuntime().getKnowledgeBase()).getRuleBase();
  TraitFactory builder=arb.getConfiguration().getComponentFactory().getTraitFactory();
  boolean needsWrapping=!(core instanceof TraitableBean);
  TraitableBean inner=needsWrapping ? asTraitable(core,builder) : (TraitableBean)core;
  return processTraits(core,trait,builder,needsWrapping,inner,logical);
}
