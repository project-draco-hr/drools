{
  FactHandle handle=null;
  if (identityMap != null) {
    handle=identityMap.get(object);
  }
  if (handle != null) {
    return handle;
  }
  handle=getFactHandleFromWM(object);
  if (handle == null) {
    throw new FactException("Update error: handle not found for object: " + object + ". Is it in the working memory?");
  }
  return handle;
}
