{
  VariableScopeInstance variableScope=null;
  if (nodeInstance != null) {
    variableScope=(VariableScopeInstance)nodeInstance.resolveContextInstance(VariableScope.VARIABLE_SCOPE,variableName);
  }
  if (variableScope == null) {
    variableScope=(VariableScopeInstance)getProcessInstance().getContextInstance(VariableScope.VARIABLE_SCOPE);
    if (variableScope.getVariableScope().findVariable(variableName) == null) {
      variableScope=null;
    }
  }
  if (variableScope == null) {
    System.err.println("Could not find variable " + variableName);
    System.err.println("Continuing without setting value");
    return;
  }
  variableScope.setVariable(variableName,value);
}
