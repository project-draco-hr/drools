{
  TestWorkItemManager manager=new TestWorkItemManager();
  WorkItemImpl workItem=new WorkItemImpl();
  workItem.setName("Human Task");
  workItem.setParameter("TaskName","TaskName");
  workItem.setParameter("Comment","Comment");
  workItem.setParameter("Priority","10");
  workItem.setParameter("ActorId","Darth Vader, Dalai Lama");
  handler.executeWorkItem(workItem,manager);
  Thread.sleep(500);
  BlockingTaskSummaryMessageResponseHandler responseHandler=new BlockingTaskSummaryMessageResponseHandler();
  humanTaskClient.getTasksAssignedAsPotentialOwner("Darth Vader","en-UK",responseHandler);
  responseHandler.waitTillDone(DEFAULT_WAIT_TIME);
  List<TaskSummary> tasks=responseHandler.getResults();
  assertEquals(1,tasks.size());
  TaskSummary task=tasks.get(0);
  assertEquals("TaskName",task.getName());
  assertEquals(10,task.getPriority());
  assertEquals("Comment",task.getDescription());
  assertEquals(Status.Ready,task.getStatus());
  System.out.println("Claiming task " + task.getId());
  BlockingTaskOperationMessageResponseHandler operationResponseHandler=new BlockingTaskOperationMessageResponseHandler();
  humanTaskClient.claim(task.getId(),"Darth Vader",operationResponseHandler);
  operationResponseHandler.waitTillDone(DEFAULT_WAIT_TIME);
  System.out.println("Claimed task " + task.getId());
  System.out.println("Starting task " + task.getId());
  operationResponseHandler=new BlockingTaskOperationMessageResponseHandler();
  humanTaskClient.start(task.getId(),"Darth Vader",operationResponseHandler);
  operationResponseHandler.waitTillDone(DEFAULT_WAIT_TIME);
  System.out.println("Started task " + task.getId());
  System.out.println("Completing task " + task.getId());
  operationResponseHandler=new BlockingTaskOperationMessageResponseHandler();
  humanTaskClient.complete(task.getId(),"Darth Vader",null,operationResponseHandler);
  operationResponseHandler.waitTillDone(DEFAULT_WAIT_TIME);
  System.out.println("Completed task " + task.getId());
  assertTrue(manager.waitTillCompleted(MANAGER_COMPLETION_WAIT_TIME));
}
