{
  for (  ListenerModel listenerModel : model.getListenerModels()) {
    Object listener;
    try {
      listener=beanCreator.createBean(listenerModel.getType(),listenerModel.getQualifierModel());
    }
 catch (    Exception e) {
      throw new RuntimeException("Cannot instance listener " + listenerModel.getType(),e);
    }
switch (listenerModel.getKind()) {
case AGENDA_EVENT_LISTENER:
      kSession.addEventListener((AgendaEventListener)listener);
    break;
case WORKING_MEMORY_EVENT_LISTENER:
  kSession.addEventListener((RuleRuntimeEventListener)listener);
break;
case PROCESS_EVENT_LISTENER:
kSession.addEventListener((ProcessEventListener)listener);
break;
}
}
for (WorkItemHandlerModel wihModel : model.getWorkItemHandlerModels()) {
WorkItemHandler wih;
try {
wih=beanCreator.createBean(wihModel.getType(),wihModel.getQualifierModel());
}
 catch (Exception e) {
throw new RuntimeException("Cannot instance WorkItemHandler " + wihModel.getType(),e);
}
kSession.getWorkItemManager().registerWorkItemHandler(wihModel.getName(),wih);
}
}
