{
  final String defaultPackageName=this.defaultPackage != null ? this.defaultPackage.getName() : "rule_table";
  final String rulesetName=getProperties().getProperty(DefaultRuleSheetListener.RULESET_TAG,defaultPackageName);
  final Package ruleset=new Package(rulesetName);
  for (final Iterator it=this._ruleList.iterator(); it.hasNext(); ) {
    ruleset.addRule((Rule)it.next());
  }
  final List importList=RuleSheetParserUtil.getImportList(getProperties().getProperty(DefaultRuleSheetListener.IMPORT_TAG));
  for (final Iterator it=importList.iterator(); it.hasNext(); ) {
    ruleset.addImport((Import)it.next());
  }
  final List variableList=RuleSheetParserUtil.getVariableList(getProperties().getProperty(DefaultRuleSheetListener.VARIABLES_TAG));
  for (final Iterator it=variableList.iterator(); it.hasNext(); ) {
    ruleset.addVariable((Global)it.next());
  }
  final String functions=getProperties().getProperty(DefaultRuleSheetListener.FUNCTIONS_TAG);
  ruleset.addFunctions(functions);
  return ruleset;
}
