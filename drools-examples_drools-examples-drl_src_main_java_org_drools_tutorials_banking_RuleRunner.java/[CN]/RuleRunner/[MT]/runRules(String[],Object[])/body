{
  KnowledgeBase knowledgeBase=KnowledgeBaseFactory.newKnowledgeBase();
  KnowledgeBuilder builder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  for (int i=0; i < rules.length; i++) {
    String ruleFile=rules[i];
    System.out.println("Loading file: " + ruleFile);
    builder.addResource(new InputStreamReader(RuleRunner.class.getResourceAsStream(ruleFile)),KnowledgeType.DRL);
  }
  Collection<KnowledgePackage> pkgs=builder.getKnowledgePackages();
  knowledgeBase.addKnowledgePackages(pkgs);
  StatefulKnowledgeSession statefullKnowledgeSession=knowledgeBase.newStatefulKnowledgeSession();
  for (int i=0; i < facts.length; i++) {
    Object fact=facts[i];
    System.out.println("Inserting fact: " + fact);
    statefullKnowledgeSession.insert(fact);
  }
  statefullKnowledgeSession.fireAllRules();
}
