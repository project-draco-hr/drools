{
  RuleBase ruleBase=RuleBaseFactory.newRuleBase();
  PackageBuilder builder=new PackageBuilder();
  for (int i=0; i < rules.length; i++) {
    String ruleFile=rules[i];
    System.out.println("Loading file: " + ruleFile);
    builder.addPackageFromDrl(new InputStreamReader(RuleRunner.class.getResourceAsStream(ruleFile)));
  }
  Package pkg=builder.getPackage();
  ruleBase.addPackage(pkg);
  WorkingMemory workingMemory=ruleBase.newStatefulSession();
  for (int i=0; i < facts.length; i++) {
    Object fact=facts[i];
    System.out.println("Inserting fact: " + fact);
    workingMemory.insert(fact);
  }
  workingMemory.fireAllRules();
}
