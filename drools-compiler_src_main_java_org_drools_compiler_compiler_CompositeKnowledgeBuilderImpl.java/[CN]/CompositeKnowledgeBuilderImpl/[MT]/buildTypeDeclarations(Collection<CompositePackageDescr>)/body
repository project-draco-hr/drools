{
  for (  PackageDescr packageDescr : packages) {
    for (    TypeDeclarationDescr typeDeclarationDescr : packageDescr.getTypeDeclarations()) {
      if (pkgBuilder.isEmpty(typeDeclarationDescr.getNamespace())) {
        typeDeclarationDescr.setNamespace(packageDescr.getNamespace());
      }
      pkgBuilder.registerGeneratedType(typeDeclarationDescr);
    }
  }
  List<PackageBuilder.TypeDefinition> unresolvedTypes=new ArrayList<PackageBuilder.TypeDefinition>();
  for (  PackageDescr packageDescr : packages) {
    buildTypeDeclarations(packageDescr,unresolvedTypes);
  }
  for (  PackageBuilder.TypeDefinition unresolvedType : unresolvedTypes) {
    pkgBuilder.processUnresolvedType(pkgBuilder.getPackageRegistry(unresolvedType.getNamespace()),unresolvedType);
  }
  for (  PackageDescr packageDescr : packages) {
    for (    ImportDescr importDescr : packageDescr.getImports()) {
      pkgBuilder.getPackageRegistry(packageDescr.getNamespace()).addImport(importDescr);
    }
  }
}
