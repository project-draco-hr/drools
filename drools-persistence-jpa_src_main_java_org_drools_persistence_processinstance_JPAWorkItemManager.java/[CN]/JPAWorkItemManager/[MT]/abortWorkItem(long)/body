{
  EntityManager em=(EntityManager)this.workingMemory.getEnvironment().get(EnvironmentName.ENTITY_MANAGER);
  WorkItemInfo workItemInfo=null;
  if (this.workItems != null) {
    workItemInfo=this.workItems.get(id);
    em.merge(workItemInfo);
  }
  if (workItemInfo == null) {
    workItemInfo=em.find(WorkItemInfo.class,id);
  }
  if (workItemInfo != null) {
    WorkItem workItem=(WorkItemImpl)workItemInfo.getWorkItem();
    ProcessInstance processInstance=workingMemory.getProcessInstance(workItem.getProcessInstanceId());
    workItem.setState(WorkItem.ABORTED);
    if (processInstance != null) {
      processInstance.signalEvent("workItemAborted",workItem);
    }
    em.remove(workItemInfo);
    if (workItems != null) {
      workItems.remove(workItem.getId());
    }
    workingMemory.fireAllRules();
  }
}
