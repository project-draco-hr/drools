{
  final ByteVector bv=new ByteVector();
  if (code != null && code.length > StackMapAttribute.MAX_SIZE) {
    bv.putInt(this.frames.size());
  }
 else {
    bv.putShort(this.frames.size());
  }
  for (int i=0; i < this.frames.size(); i++) {
    writeFrame((StackMapFrame)this.frames.get(i),cw,maxStack,maxLocals,bv);
  }
  return bv;
}
