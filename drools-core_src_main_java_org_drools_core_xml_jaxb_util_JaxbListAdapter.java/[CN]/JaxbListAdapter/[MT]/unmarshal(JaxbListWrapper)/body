{
  if (v.getType() == null) {
    return new ArrayList(Arrays.asList(v.getElements()));
  }
 else {
switch (v.getType()) {
case LIST:
      return new ArrayList(Arrays.asList(v.getElements()));
case SET:
    return new HashSet(Arrays.asList(v.getElements()));
default :
  throw new UnsupportedOperationException("Unsupported collection type: " + v.getType());
}
}
}
