{
  int n=tokens.size();
  while (i < n) {
    Token t=((Token)tokens.get(i));
    if (channelOverrideMap != null) {
      Integer channelI=(Integer)channelOverrideMap.get(new Integer(t.getType()));
      if (channelI != null) {
        t.setChannel(channelI.intValue());
      }
    }
    if (t.getChannel() == channel) {
      break;
    }
    i++;
  }
  return i;
}
