{
  while (i >= 0) {
    final Token t=((Token)this.tokens.get(i));
    if (this.channelOverrideMap != null) {
      final Integer channelI=(Integer)this.channelOverrideMap.get(new Integer(t.getType()));
      if (channelI != null) {
        t.setChannel(channelI.intValue());
      }
    }
    if (t.getChannel() == this.channel) {
      break;
    }
    i--;
  }
  return i;
}
