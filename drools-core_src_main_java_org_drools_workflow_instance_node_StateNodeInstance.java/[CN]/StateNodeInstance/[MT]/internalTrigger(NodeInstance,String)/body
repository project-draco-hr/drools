{
  super.internalTrigger(from,type);
  StateNode stateNode=getStateNode();
  Set<String> keys=stateNode.getConstraints().keySet();
  int triggeredActivation=0;
  for (  String key : keys) {
    String rule="RuleFlowStateNode-" + getProcessInstance().getProcessId() + "-"+ getNode().getId()+ "-"+ key;
    boolean isActive=((InternalAgenda)getProcessInstance().getAgenda()).isRuleActiveInRuleFlowGroup("DROOLS_SYSTEM",rule,getProcessInstance().getId());
    if (isActive) {
      triggerCompleted(key,true);
      triggeredActivation++;
    }
  }
  if (triggeredActivation == 0) {
    addTriggerListener();
  }
}
