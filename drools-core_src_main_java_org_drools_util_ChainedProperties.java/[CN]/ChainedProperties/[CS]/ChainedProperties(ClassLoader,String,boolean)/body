{
  if (classLoader == null) {
    classLoader=Thread.currentThread().getContextClassLoader();
    if (classLoader == null) {
      classLoader=this.getClass().getClassLoader();
    }
  }
  this.props=new ArrayList();
  this.defaultProps=new ArrayList();
  addProperties(System.getProperties());
  loadProperties(System.getProperty("drools." + confFileName),this.props);
  loadProperties(System.getProperty("user.home") + "/drools." + confFileName,this.props);
  loadProperties("drools." + confFileName,this.props);
  ClassLoader confClassLoader=classLoader;
  if (confClassLoader != null) {
    loadProperties(confClassLoader.getResource("META-INF/drools." + confFileName),this.props);
  }
  confClassLoader=getClass().getClassLoader();
  if (confClassLoader != null && confClassLoader != classLoader) {
    loadProperties(confClassLoader.getResource("META-INF/drools." + confFileName),this.props);
  }
  confClassLoader=Thread.currentThread().getContextClassLoader();
  if (confClassLoader != null && confClassLoader != classLoader) {
    loadProperties(confClassLoader.getResource("META-INF/drools." + confFileName),this.props);
  }
  confClassLoader=ClassLoader.getSystemClassLoader();
  if (confClassLoader != null && confClassLoader != classLoader) {
    loadProperties(confClassLoader.getResource("META-INF/drools." + confFileName),this.props);
  }
  if (!populateDefaults) {
    return;
  }
  confClassLoader=classLoader;
  URL defaultURL=null;
  if (confClassLoader != null) {
    defaultURL=confClassLoader.getResource("META-INF/drools.default." + confFileName);
  }
  if (defaultURL == null) {
    confClassLoader=getClass().getClassLoader();
    if (confClassLoader != null && confClassLoader != classLoader) {
      defaultURL=confClassLoader.getResource("META-INF/drools.default." + confFileName);
    }
  }
  if (defaultURL == null) {
    confClassLoader=Thread.currentThread().getContextClassLoader();
    if (confClassLoader != null && confClassLoader != classLoader) {
      defaultURL=confClassLoader.getResource("META-INF/drools.default." + confFileName);
    }
  }
  if (defaultURL == null) {
    confClassLoader=ClassLoader.getSystemClassLoader();
    if (confClassLoader != null && confClassLoader != classLoader) {
      defaultURL=confClassLoader.getResource("META-INF/drools.default." + confFileName);
    }
  }
  if (defaultURL != null) {
    loadProperties(defaultURL,this.defaultProps);
  }
}
