{
  if (classLoader == null) {
    classLoader=Thread.currentThread().getContextClassLoader();
    if (classLoader == null) {
      classLoader=this.getClass().getClassLoader();
    }
  }
  this.props=new ArrayList();
  this.defaultProps=new ArrayList();
  addProperties(System.getProperties());
  loadProperties(System.getProperty("drools." + confFileName),this.props);
  loadProperties(System.getProperty("user.home") + "/drools." + confFileName,this.props);
  loadProperties("drools." + confFileName,this.props);
  ClassLoader confClassLoader=classLoader;
  if (confClassLoader != null) {
    loadProperties(getResources("META-INF/drools." + confFileName,confClassLoader),this.props);
  }
  confClassLoader=getClass().getClassLoader();
  if (confClassLoader != null && confClassLoader != classLoader) {
    loadProperties(getResources("META-INF/drools." + confFileName,confClassLoader),this.props);
  }
  confClassLoader=Thread.currentThread().getContextClassLoader();
  if (confClassLoader != null && confClassLoader != classLoader) {
    loadProperties(getResources("META-INF/drools." + confFileName,confClassLoader),this.props);
  }
  confClassLoader=ClassLoader.getSystemClassLoader();
  if (confClassLoader != null && confClassLoader != classLoader) {
    loadProperties(getResources("META-INF/drools." + confFileName,confClassLoader),this.props);
  }
  if (!populateDefaults) {
    return;
  }
  confClassLoader=classLoader;
  if (confClassLoader != null) {
    loadProperties(getResources("META-INF/drools.default." + confFileName,confClassLoader),this.defaultProps);
  }
  confClassLoader=getClass().getClassLoader();
  if (confClassLoader != null && confClassLoader != classLoader) {
    loadProperties(getResources("META-INF/drools.default." + confFileName,confClassLoader),this.defaultProps);
  }
  confClassLoader=Thread.currentThread().getContextClassLoader();
  if (confClassLoader != null && confClassLoader != classLoader) {
    loadProperties(getResources("META-INF/drools.default." + confFileName,confClassLoader),this.defaultProps);
  }
  confClassLoader=ClassLoader.getSystemClassLoader();
  if (confClassLoader != null && confClassLoader != classLoader) {
    loadProperties(getResources("META-INF/drools.default." + confFileName,confClassLoader),this.defaultProps);
  }
}
