{
  final Set<String> identifiers=result.getIdentifiers();
  final Set<String> notBound=new HashSet<String>(identifiers);
  Map<String,Class> usedDecls=new HashMap<String,Class>();
  Map<String,Class> usedGlobals=new HashMap<String,Class>();
  for (  Entry<String,Class> entry : availableIdentifiers.getDeclarations().entrySet()) {
    if (identifiers.contains(entry.getKey())) {
      usedDecls.put(entry.getKey(),entry.getValue());
      notBound.remove(entry.getKey());
    }
  }
  for (  Entry<String,Class> entry : availableIdentifiers.getGlobals().entrySet()) {
    if (identifiers.contains(entry.getKey())) {
      usedGlobals.put(entry.getKey(),entry.getValue());
      notBound.remove(entry.getKey());
    }
  }
  result.setBoundIdentifiers(new BoundIdentifiers(usedDecls,usedGlobals));
  result.setNotBoundedIdentifiers(notBound);
  return result;
}
