{
  Reader reader=new InputStreamReader(this.getClass().getResourceAsStream("test_assert_modify_replacement_v3.drl"));
  ByteArrayOutputStream result=new ByteArrayOutputStream();
  Writer writer=new PrintWriter(result);
  DRLUpdate updater=new DRLUpdate();
  updater.updateDrl(reader,writer);
  reader.close();
  writer.close();
  reader=new InputStreamReader(this.getClass().getResourceAsStream("test_assert_modify_replacement_v4.drl"));
  ByteArrayOutputStream expected=new ByteArrayOutputStream();
  writer=new PrintWriter(expected);
  char[] bytebuf=new char[1024];
  int r=0;
  while ((r=reader.read(bytebuf)) > 0) {
    writer.write(bytebuf,0,r);
  }
  writer.close();
  reader.close();
  assertEqualsIgnoreWhiteSpaces(expected.toString(),result.toString());
}
