{
  final Reader source=new InputStreamReader(HelloWorldExample.class.getResourceAsStream("HelloWorld.drl"));
  final KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.addResource(source,KnowledgeType.DRL);
  if (kbuilder.hasErrors()) {
    System.out.println(kbuilder.getErrors().toString());
    throw new RuntimeException("Unable to compile \"HelloWorld.drl\".");
  }
  final Collection<KnowledgePackage> pkgs=kbuilder.getKnowledgePackages();
  final KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase();
  kbase.addKnowledgePackages(pkgs);
  final StatefulKnowledgeSession ksession=kbase.newStatefulKnowledgeSession();
  ksession.setGlobal("list",new ArrayList());
  final WorkingMemoryFileLogger logger=new WorkingMemoryFileLogger(ksession);
  logger.setFileName("log/helloworld");
  final Message message=new Message();
  message.setMessage("Hello World");
  message.setStatus(Message.HELLO);
  ksession.insert(message);
  ksession.fireAllRules();
  logger.writeToDisk();
  ksession.dispose();
}
