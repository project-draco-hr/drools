{
  try {
    KnowledgeBase kbase=readRule();
    StatefulKnowledgeSession ksession=kbase.newStatefulKnowledgeSession();
    WorkingMemoryFileLogger logger=new WorkingMemoryFileLogger(ksession);
    RecommendationService recommendationService=new RecommendationService();
    ksession.setGlobal("recommendationService",recommendationService);
    Patient patient=new Patient();
    patient.setName("John Doe");
    patient.setAge(20);
    ksession.insert(patient);
    Diagnose diagnose=new Diagnose(Terminology.DIAGNOSE_X);
    ksession.insert(diagnose);
    ksession.fireAllRules();
    List recommendations=recommendationService.getRecommendations();
    for (Iterator iterator=recommendations.iterator(); iterator.hasNext(); ) {
      System.out.println(iterator.next());
    }
    recommendations.clear();
    diagnose=new Diagnose(Terminology.DIAGNOSE_X_TYPE_UNKNOWN);
    ksession.insert(diagnose);
    ksession.fireAllRules();
    recommendations=recommendationService.getRecommendations();
    for (Iterator iterator=recommendations.iterator(); iterator.hasNext(); ) {
      System.out.println(iterator.next());
    }
    recommendations.clear();
    diagnose=new Diagnose(Terminology.DIAGNOSE_X_TYPE2);
    ksession.insert(diagnose);
    ksession.fireAllRules();
    logger.writeToDisk();
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
