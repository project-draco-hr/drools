{
  try {
    KnowledgeBase kbase=readRule();
    StatefulKnowledgeSession ksession=kbase.newStatefulKnowledgeSession();
    KnowledgeRuntimeLogger logger=KnowledgeRuntimeLoggerFactory.newFileLogger(ksession,"log/cdss");
    RecommendationService recommendationService=new RecommendationService();
    ksession.setGlobal("recommendationService",recommendationService);
    Patient patient=new Patient();
    patient.setName("John Doe");
    patient.setAge(20);
    ksession.insert(patient);
    Diagnose diagnose=new Diagnose(Terminology.DIAGNOSE_X);
    ksession.insert(diagnose);
    ksession.fireAllRules();
    List<Recommendation> recommendations=recommendationService.getRecommendations();
    for (    Recommendation recommendation : recommendations) {
      System.out.println(recommendation);
    }
    recommendations.clear();
    diagnose=new Diagnose(Terminology.DIAGNOSE_X_TYPE_UNKNOWN);
    ksession.insert(diagnose);
    ksession.fireAllRules();
    recommendations=recommendationService.getRecommendations();
    for (    Recommendation recommendation : recommendations) {
      System.out.println(recommendation);
    }
    recommendations.clear();
    diagnose=new Diagnose(Terminology.DIAGNOSE_X_TYPE2);
    ksession.insert(diagnose);
    ksession.fireAllRules();
    logger.close();
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
