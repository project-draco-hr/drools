{
  KnowledgeBuilder knowledgeBuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  knowledgeBuilder.add(ResourceFactory.newByteArrayResource(drl.getBytes()),ResourceType.DRL);
  if (knowledgeBuilder.hasErrors()) {
    throw new RuntimeException(knowledgeBuilder.getErrors().toString());
  }
  KnowledgeBase kbase=conf.length > 0 ? KnowledgeBaseFactory.newKnowledgeBase(conf[0]) : KnowledgeBaseFactory.newKnowledgeBase();
  kbase.addKnowledgePackages(knowledgeBuilder.getKnowledgePackages());
  return kbase;
}
