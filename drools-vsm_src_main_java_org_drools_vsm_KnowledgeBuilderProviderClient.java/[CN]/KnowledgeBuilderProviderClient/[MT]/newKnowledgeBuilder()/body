{
  String localId=UUID.randomUUID().toString();
  Message cmd=new Message(serviceManager.getSessionId(),serviceManager.counter.incrementAndGet(),false,null,new SetVariableCommand("__TEMP__",localId,new NewKnowledgeBuilderCommand(null)));
  WriteFuture future=serviceManager.client.session.write(cmd);
  try {
    int tries=0;
    while (!future.isDone() && tries++ < 6) {
      Thread.sleep(500);
    }
    if (!future.isDone()) {
      throw new RuntimeException("unable to create new KnowledgeBuilder");
    }
  }
 catch (  InterruptedException e) {
    throw new RuntimeException("unable to create new KnowledgeBuilder");
  }
  return new KnowledgeBuilderClient(localId,serviceManager);
}
