{
  Consequence consequence=new Consequence();
  ScoringStrategy scoringStrategy=getScoringStrategy(scorecard);
switch (scoringStrategy) {
case AGGREGATE_SCORE:
case MINIMUM_SCORE:
case MAXIMUM_SCORE:
case AVERAGE_SCORE:
case WEIGHTED_AVERAGE_SCORE:
case WEIGHTED_MAXIMUM_SCORE:
case WEIGHTED_MINIMUM_SCORE:
case WEIGHTED_AGGREGATE_SCORE:
{
      consequence.setSnippet("double calculatedScore = $calculatedScore;");
      break;
    }
}
calcTotalRule.addConsequence(consequence);
consequence=new Consequence();
if (scorecard.getInitialScore() > 0) {
  consequence.setSnippet("$sc.setCalculatedScore(calculatedScore+$initialScore);");
}
 else {
  consequence.setSnippet("$sc.setCalculatedScore(calculatedScore);");
}
calcTotalRule.addConsequence(consequence);
}
