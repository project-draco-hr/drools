{
  AssetItem ruleItem1=getDefaultPackage().addAsset("testAddTag","test content");
  getRepo().loadCategory("/").addCategory("testAddTagTestTag","description");
  ruleItem1.addCategory("testAddTagTestTag");
  List tags=ruleItem1.getCategories();
  assertEquals(1,tags.size());
  assertEquals("testAddTagTestTag",((CategoryItem)tags.get(0)).getName());
  getRepo().loadCategory("/").addCategory("testAddTagTestTag2","description");
  ruleItem1.addCategory("testAddTagTestTag2");
  tags=ruleItem1.getCategories();
  assertEquals(2,tags.size());
  ruleItem1.checkin("woot");
  List result=getRepo().findAssetsByCategory("testAddTagTestTag",0,-1).assets;
  assertEquals(1,result.size());
  AssetItem retItem=(AssetItem)result.get(0);
  assertEquals("testAddTag",retItem.getName());
  ruleItem1.updateContent("foo");
  ruleItem1.checkin("latest");
  assertTrue(ruleItem1.getCategories().size() > 0);
  assertNotNull(ruleItem1.getCategorySummary());
  assertEquals("testAddTagTestTag testAddTagTestTag2 ",ruleItem1.getCategorySummary());
  result=getRepo().findAssetsByCategory("testAddTagTestTag",0,-1).assets;
  assertEquals(1,result.size());
  ruleItem1=(AssetItem)result.get(0);
  assertEquals(2,ruleItem1.getCategories().size());
  assertEquals("foo",ruleItem1.getContent());
  AssetItem prev=(AssetItem)ruleItem1.getPrecedingVersion();
  assertNotNull(prev);
}
