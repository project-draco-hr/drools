{
  KieServices ks=KieServices.Factory.get();
  KieContainer kieContainer=ks.getKieContainer(ks.newGav("org.drools","scanner-test","1.0-SNAPSHOT"));
  KieJar kJar1=createKieJarWithClass(ks,2,7);
  kieContainer.deploy(kJar1);
  MavenRepository repository=new MavenRepository();
  repository.deployArtifact("org.drools","scanner-test","1.0-SNAPSHOT",kJar1.asFile(),kPom);
  KieScanner scanner=ks.newKieScanner(kieContainer);
  KieSession ksession=kieContainer.getKieSession("KSession1");
  checkKSession(ksession,14);
  KieJar kJar2=createKieJarWithClass(ks,3,5);
  repository.deployArtifact("org.drools","scanner-test","1.0-SNAPSHOT",kJar2.asFile(),kPom);
  scanner.scanNow();
  KieSession ksession2=kieContainer.getKieSession("KSession1");
  checkKSession(ksession2,15);
}
