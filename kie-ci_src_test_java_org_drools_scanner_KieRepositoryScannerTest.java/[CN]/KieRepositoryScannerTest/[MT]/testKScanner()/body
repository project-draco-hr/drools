{
  KieServices ks=KieServices.Factory.get();
  KieFactory kf=KieFactory.Factory.get();
  GAV gav=kf.newGav("org.kie","scanner-test","1.0-SNAPSHOT");
  InternalKieJar kJar1=createKieJar(ks,kf,gav,"rule1","rule2");
  KieContainer kieContainer=ks.getKieContainer(gav);
  MavenRepository repository=getMavenRepository();
  repository.deployArtifact(gav,kJar1,kPom);
  KieSession ksession=kieContainer.getKieSession("KSession1");
  checkKSession(ksession,"rule1","rule2");
  InternalKieJar kJar2=createKieJar(ks,kf,gav,"rule2","rule3");
  repository.deployArtifact(gav,kJar2,kPom);
  KieScanner scanner=ks.newKieScanner(kieContainer);
  scanner.scanNow();
  KieSession ksession2=kieContainer.getKieSession("KSession1");
  checkKSession(ksession2,"rule2","rule3");
}
