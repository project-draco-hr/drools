{
  Vertex vertex=(NotNodeVertex)this.visitedNodes.get(dotId(node));
  if (vertex == null) {
    vertex=new NotNodeVertex(node);
    this.graph.addVertex(vertex);
    this.visitedNodes.put(dotId(node),vertex);
    this.graph.addEdge(new DroolsDirectedEdge(this.parentVertex,vertex));
    Vertex oldParentVertex=this.parentVertex;
    this.parentVertex=vertex;
    for (Iterator i=node.getTupleSinks().iterator(); i.hasNext(); ) {
      Object nextNode=i.next();
      visitNode(nextNode);
    }
    this.parentVertex=oldParentVertex;
  }
 else {
    this.graph.addEdge(new DroolsDirectedEdge(this.parentVertex,vertex));
  }
}
