{
  this.mavenHome=mavenHome;
  this.mavenRequest=mavenRequest;
  this.plexusContainer=plexusContainer;
  try {
    this.mavenExecutionRequest=this.buildMavenExecutionRequest(mavenRequest);
    RepositorySystemSession rss=((DefaultMaven)lookup(Maven.class)).newRepositorySession(mavenExecutionRequest);
    mavenSession=new MavenSession(plexusContainer,rss,mavenExecutionRequest,new DefaultMavenExecutionResult());
    lookup(LegacySupport.class).setSession(mavenSession);
  }
 catch (  MavenEmbedderException e) {
    throw new MavenEmbedderException(e.getMessage(),e);
  }
catch (  ComponentLookupException e) {
    throw new MavenEmbedderException(e.getMessage(),e);
  }
}
