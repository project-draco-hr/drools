{
  URLScanner scan=new URLScanner();
  File dir=RuleBaseAssemblerTest.getTempDirectory();
  int numfiles=dir.list().length;
  Properties config=new Properties();
  config.setProperty(RuleAgent.URLS,"http://goo.ber http://wee.waa");
  scan.configure(config);
  scan.httpClient=new IHttpClient(){
    public LastUpdatedPing checkLastUpdated(    URL url) throws IOException {
      LastUpdatedPing ping=new LastUpdatedPing();
      ping.lastUpdated=123;
      ping.responseMessage="200 OK";
      return ping;
    }
    public Package fetchPackage(    URL url) throws IOException {
      if (url.toExternalForm().equals("http://goo.ber")) {
        return new Package("goo.ber");
      }
 else {
        return new Package("wee.waa");
      }
    }
  }
;
  assertNull(scan.localCacheFileScanner);
  assertNull(scan.localCacheDir);
  RuleBase rb=RuleBaseFactory.newRuleBase();
  scan.updateRuleBase(rb,false);
  assertEquals(2,rb.getPackages().length);
  assertEquals("goo.ber",rb.getPackages()[0].getName());
  assertEquals("wee.waa",rb.getPackages()[1].getName());
  assertEquals(numfiles,dir.list().length);
}
