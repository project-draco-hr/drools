{
  if (builder.hasErrors()) {
    throw new CheckedDroolsException("There were errors in the rule source: " + builder.printErrors());
  }
  final Package binaryPackage=builder.getPackage();
  final RuleBase rb=RuleBaseFactory.newRuleBase(RuleBaseLoader.engineType);
  try {
    rb.addPackage(binaryPackage);
  }
 catch (  final Exception e) {
    throw new CheckedDroolsException("Unable to add compiled package to rulebase. Nested error is: " + e.getMessage());
  }
  return rb;
}
