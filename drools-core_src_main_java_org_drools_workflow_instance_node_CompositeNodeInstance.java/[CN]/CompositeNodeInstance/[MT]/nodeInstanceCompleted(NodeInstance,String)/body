{
  if (nodeInstance instanceof EndNodeInstance) {
    if (((org.drools.workflow.core.WorkflowProcess)getProcessInstance().getProcess()).isAutoComplete()) {
      if (nodeInstances.isEmpty()) {
        triggerCompleted(org.drools.workflow.core.Node.CONNECTION_DEFAULT_TYPE);
      }
    }
  }
 else {
    throw new IllegalArgumentException("Completing a node instance that has no outgoing connection not supported.");
  }
}
