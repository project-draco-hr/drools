{
  Collection<AnalyticsRule> rules=data.getAllRules();
  Collection<AnalyticsClass> classes=data.getAllClasses();
  Collection<Field> fields=data.getAllFields();
  str.append("<html>\n");
  str.append("<head>\n");
  str.append("<title>\n");
  str.append("Rule Relations\n");
  str.append("</title>\n");
  str.append("<style type=\"text/css\">\n");
  str.append("<!--\n");
  try {
    BufferedReader reader=new BufferedReader(new InputStreamReader(ComponentsReportModeller.class.getResourceAsStream(cssFile)));
    String cssLine=null;
    while ((cssLine=reader.readLine()) != null) {
      str.append(cssLine);
      str.append("\n");
    }
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  str.append("-->\n");
  str.append("</style>\n");
  str.append("</head>\n");
  str.append("<body>\n\n");
  str.append("<br>\n");
  str.append("<h1>\n");
  str.append("Rule Relations");
  str.append("</h1>\n");
  str.append("<br>\n");
  visitRuleCollection(rules);
  str.append("<br>\n");
  str.append("<br>\n");
  visitClassCollection(classes);
  str.append("<br>\n");
  str.append("<br>\n");
  visitFieldCollection(fields);
  str.append("<br>\n");
  str.append("<br>\n");
  str.append("</body>\n");
  str.append("</html>");
  return str.toString();
}
