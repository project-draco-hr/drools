{
  boolean multithread=context.readBoolean();
  int handleId=context.readInt();
  long handleCounter=context.readLong();
  long propagationCounter=context.readLong();
  context.readInt();
  context.readLong();
  session.reset(handleId,handleCounter,propagationCounter);
  DefaultAgenda agenda=(DefaultAgenda)session.getAgenda();
  readAgenda(context,agenda);
  context.wm=session;
  readFactHandles(context);
  readActionQueue(context);
  if (context.readBoolean()) {
    readTruthMaintenanceSystem(context);
  }
  if (context.marshalProcessInstances) {
    readProcessInstances(context);
  }
  if (context.marshalWorkItems) {
    readWorkItems(context);
  }
  if (context.marshalTimers) {
    readTimers(context);
  }
  if (multithread) {
    session.startPartitionManagers();
  }
  return session;
}
