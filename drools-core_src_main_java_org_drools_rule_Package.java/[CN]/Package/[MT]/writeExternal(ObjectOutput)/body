{
  boolean isDroolsStream=stream instanceof DroolsObjectOutputStream;
  ByteArrayOutputStream bytes=null;
  ObjectOutput out;
  if (isDroolsStream) {
    out=stream;
  }
 else {
    bytes=new ByteArrayOutputStream();
    out=new DroolsObjectOutputStream(bytes);
  }
  out.writeObject(this.dialectDatas);
  out.writeObject(this.name);
  out.writeObject(this.imports);
  out.writeObject(this.staticImports);
  out.writeObject(this.functions);
  out.writeObject(this.factTemplates);
  out.writeObject(this.ruleFlows);
  out.writeObject(this.globals);
  out.writeBoolean(this.valid);
  out.writeObject(this.rules);
  if (!isDroolsStream) {
    bytes.flush();
    bytes.close();
    stream.writeObject(bytes.toByteArray());
  }
}
