{
  Map<String,List<EventListener>> eventListeners=external ? this.externalEventListeners : this.eventListeners;
  List<EventListener> listeners=eventListeners.get(type);
  if (listeners == null) {
    listeners=new CopyOnWriteArrayList<EventListener>();
    eventListeners.put(type,listeners);
    if (external) {
      getWorkingMemory().getSignalManager().addEventListener(type,this);
    }
  }
  listeners.add(listener);
}
