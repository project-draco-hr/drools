{
  processInstanceEventListener=new DefaultRuleFlowEventListener(){
    public void afterRuleFlowCompleted(    RuleFlowCompletedEvent event,    WorkingMemory workingMemory){
      ProcessInstance processInstance=event.getProcessInstance();
      String type="processInstanceCompleted:" + processInstance.getId();
      List<EventListener> listeners=eventListeners.get(type);
      if (listeners != null) {
        for (        EventListener listener : listeners) {
          listener.signalEvent(type,processInstance);
        }
      }
    }
  }
;
  getWorkingMemory().addEventListener(processInstanceEventListener);
}
