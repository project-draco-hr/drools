{
  if (getWorkingMemory() == null) {
    List<ContextInstance> variableScopeInstances=getContextInstances(VariableScope.VARIABLE_SCOPE);
    if (variableScopeInstances == null) {
      return null;
    }
    Map<String,Object> result=new HashMap<String,Object>();
    for (    ContextInstance contextInstance : variableScopeInstances) {
      Map<String,Object> variables=((VariableScopeInstance)contextInstance).getVariables();
      result.putAll(variables);
    }
    return result;
  }
  VariableScopeInstance variableScopeInstance=(VariableScopeInstance)getContextInstance(VariableScope.VARIABLE_SCOPE);
  if (variableScopeInstance == null) {
    return null;
  }
  return variableScopeInstance.getVariables();
}
