{
  if (nodeInstance instanceof EndNodeInstance) {
    if (((org.drools.workflow.core.WorkflowProcess)getProcess()).isAutoComplete()) {
      if (nodeInstances.isEmpty()) {
        setState(ProcessInstance.STATE_COMPLETED);
      }
    }
  }
 else {
    throw new IllegalArgumentException("Completing a node instance that has no outgoing connection not suppoerted.");
  }
}
