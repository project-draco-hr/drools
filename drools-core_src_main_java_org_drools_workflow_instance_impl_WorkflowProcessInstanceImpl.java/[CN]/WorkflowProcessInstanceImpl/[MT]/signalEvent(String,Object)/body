{
synchronized (this) {
    List<EventListener> listeners=eventListeners.get(type);
    if (listeners != null) {
      for (      EventListener listener : listeners) {
        listener.signalEvent(type,event);
      }
    }
    listeners=externalEventListeners.get(type);
    if (listeners != null) {
      for (      EventListener listener : listeners) {
        listener.signalEvent(type,event);
      }
    }
    for (    Node node : getWorkflowProcess().getNodes()) {
      if (node instanceof EventNodeInterface) {
        if (((EventNodeInterface)node).acceptsEvent(type,event)) {
          if (node instanceof EventNode && ((EventNode)node).getFrom() == null) {
            EventNodeInstance eventNodeInstance=(EventNodeInstance)getNodeInstance(node);
            eventNodeInstance.signalEvent(type,event);
          }
 else {
            List<NodeInstance> nodeInstances=getNodeInstances(node.getId());
            if (nodeInstances != null && !nodeInstances.isEmpty()) {
              for (              NodeInstance nodeInstance : nodeInstances) {
                ((EventNodeInstanceInterface)nodeInstance).signalEvent(type,event);
              }
            }
          }
        }
      }
    }
  }
}
