{
  Set<String> newPkgNames=new HashSet<String>();
  if (newPackages == null || newPackages.isEmpty()) {
    this.listener.warning("KnowledgeAgent: The resource didn't create any package: " + entry.getKey() + ". Removing any existing knowledge definition of "+ entry.getKey());
  }
 else {
    for (    KnowledgePackage kp : newPackages) {
      newPkgNames.add(kp.getName());
    }
  }
  for (  KnowledgeDefinition kd : entry.getValue()) {
    if (!newPkgNames.contains(kd.getNamespace())) {
      this.listener.debug("KnowledgeAgent: Removing: " + kd);
      removeKnowledgeDefinitionFromBase(kd);
    }
  }
}
