{
  ChangeSetImpl result=new ChangeSetImpl();
  List<String> originalFiles=original.getFiles();
  List<String> currentFiles=currentJar.getFiles();
  ArrayList<String> removedFiles=new ArrayList<String>(originalFiles);
  removedFiles.removeAll(currentFiles);
  if (!removedFiles.isEmpty()) {
    List<Resource> removed=new ArrayList<Resource>(removedFiles.size());
    result.setResourcesRemoved(removed);
    for (    String file : removedFiles) {
      removed.add(ResourceFactory.newUrlResource(URL_PREFIX + file));
    }
  }
  List<Resource> modified=new ArrayList<Resource>();
  List<Resource> added=new ArrayList<Resource>();
  for (  String file : currentFiles) {
    if (originalFiles.contains(file)) {
      byte[] ob=original.getBytes(file);
      byte[] cb=currentJar.getBytes(file);
      if (!Arrays.equals(ob,cb)) {
        modified.add(ResourceFactory.newUrlResource(URL_PREFIX + file));
      }
    }
 else {
      added.add(ResourceFactory.newUrlResource(URL_PREFIX + file));
    }
  }
  if (!modified.isEmpty()) {
    result.setResourcesModified(modified);
  }
  if (!added.isEmpty()) {
    result.setResourcesAdded(added);
  }
  return result;
}
