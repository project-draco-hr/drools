{
  final XmlPackageReader xmlPackageReader=new XmlPackageReader();
  xmlPackageReader.read(new InputStreamReader(getClass().getResourceAsStream("test_ParseCollect.xml")));
  final PackageDescr packageDescr=xmlPackageReader.getPackageDescr();
  assertNotNull(packageDescr);
  RuleDescr obj=(RuleDescr)packageDescr.getRules().get(0);
  Object objectpattern=obj.getLhs().getDescrs().get(0);
  assertTrue(objectpattern instanceof PatternDescr);
  PatternDescr patterndescr=(PatternDescr)objectpattern;
  assertEquals(patterndescr.getObjectType(),"Cheese");
  Object collectobj=patterndescr.getSource();
  assertTrue(collectobj instanceof CollectDescr);
  CollectDescr collectDescr=(CollectDescr)collectobj;
  PatternDescr inputpattern=collectDescr.getInputPattern();
  assertEquals(inputpattern.getObjectType(),"Person");
  Object fieldContraintObject=inputpattern.getConstraint().getDescrs().get(0);
  assertTrue(fieldContraintObject instanceof FieldConstraintDescr);
  FieldConstraintDescr fieldconstraintdescr=(FieldConstraintDescr)fieldContraintObject;
  assertEquals(fieldconstraintdescr.getFieldName(),"hair");
  Object literal1=fieldconstraintdescr.getRestrictions().get(0);
  assertTrue(literal1 instanceof LiteralRestrictionDescr);
  LiteralRestrictionDescr literalDesc=(LiteralRestrictionDescr)literal1;
  assertEquals(literalDesc.getEvaluator(),"==");
  assertEquals(literalDesc.getText(),"pink");
  fieldContraintObject=patterndescr.getConstraint().getDescrs().get(0);
  assertTrue(fieldContraintObject instanceof FieldConstraintDescr);
  fieldconstraintdescr=(FieldConstraintDescr)fieldContraintObject;
  assertEquals(fieldconstraintdescr.getFieldName(),"type");
  literal1=fieldconstraintdescr.getRestrictions().get(0);
  assertTrue(literal1 instanceof LiteralRestrictionDescr);
  literalDesc=(LiteralRestrictionDescr)literal1;
  assertEquals(literalDesc.getEvaluator(),"==");
  assertEquals(literalDesc.getText(),"1");
}
