{
  InternalWorkingMemory wm=((InternalWorkingMemoryEntryPoint)ksession).getInternalWorkingMemory();
  if (((InternalRuleBase)wm.getRuleBase()).getConfiguration().isPhreakEnabled()) {
    return PhreakActivationIterator.iterator(wm);
  }
 else {
    return new ActivationIterator(((InternalWorkingMemoryEntryPoint)ksession).getInternalWorkingMemory(),ksession.getKieBase());
  }
}
