{
  TimerService clock=workingMemory.getTimerService();
  long currentTime=clock.getCurrentTime();
  SlidingTimeWindowContext queue=(SlidingTimeWindowContext)context;
  EventFactHandle handle=queue.queue.peek();
  while (handle != null && isExpired(currentTime,handle)) {
    queue.expiringHandle=handle;
    queue.queue.remove();
    if (handle.isValid()) {
      final PropagationContext propagationContext=new PropagationContextImpl(workingMemory.getNextPropagationIdCounter(),PropagationContext.EXPIRATION,null,null,handle);
      tuple.getRightTupleSink().retractRightTuple(tuple,propagationContext,workingMemory);
      propagationContext.evaluateActionQueue(workingMemory);
    }
    tuple.unlinkFromRightParent();
    queue.expiringHandle=null;
    handle=queue.queue.peek();
  }
  updateNextExpiration(fact,workingMemory,this,queue);
}
