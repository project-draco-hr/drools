{
  TimerService clock=workingMemory.getTimerService();
  long currentTime=clock.getCurrentTime();
  SlidingTimeWindowContext queue=(SlidingTimeWindowContext)context;
  RightTuple tuple=queue.queue.peek();
  while (tuple != null && isExpired(currentTime,tuple)) {
    queue.expiringTuple=tuple;
    queue.queue.remove();
    final InternalFactHandle handle=tuple.getFactHandle();
    final PropagationContext propagationContext=new PropagationContextImpl(workingMemory.getNextPropagationIdCounter(),PropagationContext.EXPIRATION,null,null,handle);
    tuple.getRightTupleSink().retractRightTuple(tuple,propagationContext,workingMemory);
    tuple.unlinkFromRightParent();
    queue.expiringTuple=null;
    tuple=queue.queue.peek();
  }
  updateNextExpiration(tuple,workingMemory,queue);
}
