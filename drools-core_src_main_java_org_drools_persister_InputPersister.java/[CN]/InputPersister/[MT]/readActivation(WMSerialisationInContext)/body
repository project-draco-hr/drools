{
  ObjectInputStream stream=context.stream;
  InternalRuleBase ruleBase=context.ruleBase;
  InternalWorkingMemory wm=context.wm;
  long activationNumber=stream.readLong();
  LeftTuple leftTuple=context.terminalTupleMap.get(stream.readInt());
  int salience=stream.readInt();
  String pkgName=stream.readUTF();
  String ruleName=stream.readUTF();
  Package pkg=ruleBase.getPackage(pkgName);
  Rule rule=pkg.getRule(ruleName);
  RuleTerminalNode ruleTerminalNode=(RuleTerminalNode)leftTuple.getLeftTupleSink();
  GroupElement subRule=ruleTerminalNode.getSubRule();
  PropagationContext pc=context.propagationContexts.get(stream.readLong());
  AgendaItem activation=new AgendaItem(activationNumber,leftTuple,salience,pc,rule,subRule);
  boolean activated=stream.readBoolean();
  activation.setActivated(activated);
  if (activated) {
    InternalAgendaGroup agendaGroup;
    if (rule.getAgendaGroup() == null || rule.getAgendaGroup().equals("") || rule.getAgendaGroup().equals(AgendaGroup.MAIN)) {
      agendaGroup=(InternalAgendaGroup)wm.getAgenda().getAgendaGroup(AgendaGroup.MAIN);
    }
 else {
      agendaGroup=(InternalAgendaGroup)wm.getAgenda().getAgendaGroup(rule.getAgendaGroup());
    }
    agendaGroup.add(activation);
  }
  return activation;
}
