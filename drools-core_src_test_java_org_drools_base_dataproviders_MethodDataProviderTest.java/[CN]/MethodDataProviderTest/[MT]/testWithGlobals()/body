{
  globals.put("foo",TestVariable.class);
  Package pkg=new Package("nothing");
  pkg.addGlobal("foo",TestVariable.class);
  RuleBase rb=RuleBaseFactory.newRuleBase();
  rb.addPackage(pkg);
  WorkingMemory wm=rb.newWorkingMemory();
  wm.setGlobal("foo",new TestVariable());
  MethodInvoker invoker=new MethodInvoker("otherMethod",TestVariable.class,new GlobalVariable("foo"),new ValueHandler[0]);
  MethodDataProvider prov=new MethodDataProvider(invoker);
  Iterator it=prov.getResults(null,wm,null);
  assertTrue(it.hasNext());
  assertEquals("boo",it.next());
}
