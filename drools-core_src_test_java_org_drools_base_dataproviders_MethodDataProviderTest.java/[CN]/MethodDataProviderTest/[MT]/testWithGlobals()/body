{
  this.globals.put("foo",TestVariable.class);
  final Package pkg=new Package("nothing");
  pkg.addGlobal("foo",TestVariable.class);
  final RuleBase rb=RuleBaseFactory.newRuleBase();
  rb.addPackage(pkg);
  final WorkingMemory wm=rb.newWorkingMemory();
  wm.setGlobal("foo",new TestVariable());
  final MethodInvoker invoker=new MethodInvoker("otherMethod",new GlobalVariable("foo",TestVariable.class),new ValueHandler[0]);
  final MethodDataProvider prov=new MethodDataProvider(invoker);
  final Iterator it=prov.getResults(null,wm,null);
  assertTrue(it.hasNext());
  assertEquals("boo",it.next());
}
