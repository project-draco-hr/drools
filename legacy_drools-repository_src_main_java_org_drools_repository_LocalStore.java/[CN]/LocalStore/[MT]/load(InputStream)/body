{
  if (mode == MODE_XSTREAM) {
    InputStreamReader reader=new InputStreamReader(input);
    Asset asset=(Asset)getXStream().fromXML(reader);
    return asset;
  }
 else   if (mode == MODE_OBJECT_SER) {
    try {
      ObjectInputStream objIn=new ObjectInputStream(input);
      Asset asset=(Asset)objIn.readObject();
      return asset;
    }
 catch (    Exception e) {
      throw new RepositoryException("Unable to store asset locally.",e);
    }
  }
 else {
    throw new IllegalArgumentException("Unknown local persistence mode.");
  }
}
