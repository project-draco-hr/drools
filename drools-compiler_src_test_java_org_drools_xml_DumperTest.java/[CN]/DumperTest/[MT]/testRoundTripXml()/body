{
  XmlPackageReader xmlPackageReader=new XmlPackageReader();
  xmlPackageReader.read(new InputStreamReader(getClass().getResourceAsStream("test_ParseRule.xml")));
  PackageDescr pkgOriginal=xmlPackageReader.getPackageDescr();
  XmlDumper dumper=new XmlDumper();
  String result=dumper.dump(pkgOriginal);
  assertNotNull(result);
  xmlPackageReader=new XmlPackageReader();
  PackageDescr pkgDumped=xmlPackageReader.read(new StringReader(result));
  assertEquals(pkgOriginal.getName(),pkgDumped.getName());
  assertEquals(pkgOriginal.getFunctions().size(),pkgDumped.getFunctions().size());
  assertEquals(pkgOriginal.getRules().size(),pkgDumped.getRules().size());
  assertEquals(pkgOriginal.getGlobals().size(),pkgDumped.getGlobals().size());
  RuleDescr ruleOriginal=(RuleDescr)pkgOriginal.getRules().get(0);
  RuleDescr ruleDumped=(RuleDescr)pkgDumped.getRules().get(0);
  assertEquals(ruleOriginal.getName(),ruleDumped.getName());
  assertEquals(ruleOriginal.getLhs().getDescrs().size(),ruleDumped.getLhs().getDescrs().size());
  assertEquals(ruleOriginal.getConsequence(),ruleDumped.getConsequence());
}
