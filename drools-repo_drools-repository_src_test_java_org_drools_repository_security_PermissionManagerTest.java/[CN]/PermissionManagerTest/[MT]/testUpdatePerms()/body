{
  PermissionManager pm=new PermissionManager(RepositorySessionUtil.getRepository());
  Map<String,List<String>> perms=new HashMap<String,List<String>>(){
{
      put("package.admin",new ArrayList<String>(){
{
          add("1234567890");
        }
      }
);
      put("package.developer",new ArrayList<String>(){
{
          add("1");
          add("2");
        }
      }
);
      put("analyst",new ArrayList<String>(){
{
          add("HR");
        }
      }
);
      put("admin",new ArrayList<String>());
    }
  }
;
  pm.updateUserPermissions("testUpdatePermsWankle",perms);
  perms=pm.retrieveUserPermissions("testUpdatePermsWankle");
  assertEquals(4,perms.size());
  perms.remove("package.developer");
  pm.updateUserPermissions("testUpdatePermsWankle",perms);
  perms=pm.retrieveUserPermissions("testUpdatePermsWankle");
  assertEquals(3,perms.size());
}
