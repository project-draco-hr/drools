{
  ProcessJobContext ctx=(ProcessJobContext)c;
  Long processInstanceId=ctx.getProcessInstanceId();
  WorkingMemory workingMemory=ctx.getWorkingMemory();
  if (processInstanceId == null) {
    throw new IllegalArgumentException("Could not find process instance for timer ");
  }
  ctx.getTimer().setLastTriggered(new Date());
  InternalProcessInstance processInstance=(InternalProcessInstance)workingMemory.getProcessInstance(processInstanceId);
  if (processInstance != null) {
    workingMemory.getSignalManager().signalEvent(processInstance,"timerTriggered",ctx.getTimer());
  }
  if (ctx.getTimer().getPeriod() == 0) {
    TimerManager.this.timers.remove(ctx.getTimer().getId());
  }
}
