{
  KnowledgeBaseConfiguration kbc=KnowledgeBaseFactory.newKnowledgeBaseConfiguration();
  kbc.setOption(EventProcessingOption.STREAM);
  KnowledgeBase kbase=loadKnowledgeBase(kbc,"test_CEP_EventExpiration2.drl");
  final InternalRuleBase internal=(InternalRuleBase)((KnowledgeBaseImpl)kbase).ruleBase;
  final TimeIntervalParser parser=new TimeIntervalParser();
  Map<ObjectType,ObjectTypeNode> objectTypeNodes=internal.getRete().getObjectTypeNodes(EntryPoint.DEFAULT);
  ObjectTypeNode node=objectTypeNodes.get(new ClassObjectType(StockTick.class));
  assertNotNull(node);
  assertEquals(parser.parse("10m")[0].longValue() + 1,node.getExpirationOffset());
}
