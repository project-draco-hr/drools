{
  final Reader reader=new InputStreamReader(getClass().getResourceAsStream("test_CEP_SimpleTimeWindow.drl"));
  final RuleBase ruleBase=loadRuleBase(reader);
  final TemporalSession<SessionPseudoClock> wm=ruleBase.newTemporalSession(ClockType.PSEUDO_CLOCK);
  final List results=new ArrayList();
  wm.setGlobal("results",results);
  SessionPseudoClock clock=wm.getSessionClock();
  clock.advanceTime(10000);
  EventFactHandle handle1=(EventFactHandle)wm.insert(new OrderEvent("1","customer A",70));
  assertEquals(10000,handle1.getStartTimestamp());
  assertEquals(0,handle1.getDuration());
  wm.fireAllRules();
  clock.advanceTime(10000);
  EventFactHandle handle2=(EventFactHandle)wm.insert(new OrderEvent("2","customer A",60));
  assertEquals(20000,handle2.getStartTimestamp());
  assertEquals(0,handle2.getDuration());
  wm.fireAllRules();
  clock.advanceTime(10000);
  EventFactHandle handle3=(EventFactHandle)wm.insert(new OrderEvent("3","customer A",50));
  assertEquals(30000,handle3.getStartTimestamp());
  assertEquals(0,handle3.getDuration());
  wm.fireAllRules();
  clock.advanceTime(10000);
  EventFactHandle handle4=(EventFactHandle)wm.insert(new OrderEvent("4","customer A",30));
  assertEquals(40000,handle4.getStartTimestamp());
  assertEquals(0,handle4.getDuration());
  wm.fireAllRules();
  clock.advanceTime(10000);
  EventFactHandle handle5=(EventFactHandle)wm.insert(new OrderEvent("5","customer A",70));
  assertEquals(50000,handle5.getStartTimestamp());
  assertEquals(0,handle5.getDuration());
  wm.fireAllRules();
  clock.advanceTime(10000);
  EventFactHandle handle6=(EventFactHandle)wm.insert(new OrderEvent("6","customer A",80));
  assertEquals(60000,handle6.getStartTimestamp());
  assertEquals(0,handle6.getDuration());
  wm.fireAllRules();
}
