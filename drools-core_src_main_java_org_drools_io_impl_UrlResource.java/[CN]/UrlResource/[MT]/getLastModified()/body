{
  try {
    if ("file".equals(url.getProtocol())) {
      File file=getFile();
      return file.lastModified();
    }
 else {
      URLConnection conn=getURL().openConnection();
      if (conn instanceof HttpURLConnection) {
        ((HttpURLConnection)conn).setRequestMethod("HEAD");
      }
      long date=conn.getLastModified();
      if (date == 0) {
        try {
          date=Long.parseLong(conn.getHeaderField("lastModified"));
        }
 catch (        Exception e) {
        }
      }
      return date;
    }
  }
 catch (  IOException e) {
    throw new RuntimeException("Unable to get LastMofified for ClasspathResource",e);
  }
}
