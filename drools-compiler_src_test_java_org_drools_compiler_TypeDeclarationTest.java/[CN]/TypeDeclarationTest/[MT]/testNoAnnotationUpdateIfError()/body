{
  String str1="";
  str1+="package org.drools \n" + "declare org.drools.EventA \n" + "    name : String \n"+ "    duration : Long \n"+ "end \n";
  String str2="";
  str2+="package org.drools \n" + "declare org.drools.ClassA \n" + "    @Role (event) \n"+ "    @duration (duration) \n"+ "    anotherField : String \n"+ "end \n";
  KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  kbuilder.add(ResourceFactory.newByteArrayResource(str1.getBytes()),ResourceType.DRL);
  kbuilder.add(ResourceFactory.newByteArrayResource(str2.getBytes()),ResourceType.DRL);
  if (!kbuilder.hasErrors()) {
    fail("Errors Expected");
  }
  KnowledgeBuilderResults warnings=kbuilder.getResults(ResultSeverity.WARNING);
  Assert.assertEquals(0,warnings.size());
  Assert.assertEquals(1,kbuilder.getKnowledgePackages().size());
  FactType factType=((KnowledgePackageImp)kbuilder.getKnowledgePackages().iterator().next()).pkg.getFactType("org.drools.EventA");
  Assert.assertNotNull(factType);
  FactField field=factType.getField("name");
  Assert.assertNotNull(field);
  field=factType.getField("duration");
  Assert.assertNotNull(field);
  TypeDeclaration typeDeclaration=((KnowledgePackageImp)kbuilder.getKnowledgePackages().iterator().next()).pkg.getTypeDeclaration("org.drools.EventA");
  assertEquals(TypeDeclaration.Role.FACT,typeDeclaration.getRole());
  assertNull(typeDeclaration.getDurationAttribute());
}
