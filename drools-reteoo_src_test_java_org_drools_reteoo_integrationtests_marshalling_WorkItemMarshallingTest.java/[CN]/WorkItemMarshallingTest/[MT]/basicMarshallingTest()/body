{
  WorkItem workItem=createWorkItem(input);
  ObjectMarshallingStrategy[] strats=new ObjectMarshallingStrategy[]{MarshallerFactory.newSerializeMarshallingStrategy()};
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  MarshallerWriteContext outContext=new MarshallerWriteContext(baos,null,null,null,new ObjectMarshallingStrategyStoreImpl(strats),true,true,null);
  OutputMarshaller.writeWorkItem(outContext,workItem);
  byte[] byteArray=baos.toByteArray();
  ByteArrayInputStream bais=new ByteArrayInputStream(byteArray);
  MarshallerReaderContext inContext=new MarshallerReaderContext(bais,null,null,new ObjectMarshallingStrategyStoreImpl(strats),Collections.EMPTY_MAP,true,true,null);
  workItem=InputMarshaller.readWorkItem(inContext);
  checkWorkItem(workItem,input);
}
