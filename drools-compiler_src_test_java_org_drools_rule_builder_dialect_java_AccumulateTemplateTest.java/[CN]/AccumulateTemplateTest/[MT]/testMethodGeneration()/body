{
  StringTemplateGroup ruleGroup=new StringTemplateGroup(new InputStreamReader(AccumulateTemplateTest.class.getResourceAsStream("javaRule.stg")),AngleBracketTemplateLexer.class);
  StringTemplate accMethod=ruleGroup.getInstanceOf("accumulateMethod");
  final String[] declarationTypes=new String[]{"String","int"};
  final Declaration[] declarations=new Declaration[]{new Declaration("name",null,null),new Declaration("age",null,null)};
  final Declaration[] inner=new Declaration[]{new Declaration("cheese",new ColumnExtractor(new ClassObjectType(Cheese.class)),null),new Declaration("price",new ClassFieldExtractor(Cheese.class,"price"),null)};
  final String[] globals=new String[]{"aGlobal","anotherGlobal"};
  final List globalTypes=Arrays.asList(new String[]{"String","String"});
  accMethod.setAttribute("declarations",declarations);
  accMethod.setAttribute("declarationTypes",declarationTypes);
  accMethod.setAttribute("innerDeclarations",inner);
  accMethod.setAttribute("globals",globals);
  accMethod.setAttribute("globalTypes",globalTypes);
  accMethod.setAttribute("methodName","accumulateTestMethod");
  accMethod.setAttribute("columnType","MyClass");
  accMethod.setAttribute("columnDeclaration","$myclass");
  accMethod.setAttribute("initCode","int x = 0;");
  accMethod.setAttribute("actionCode","x += 1;");
  accMethod.setAttribute("resultCode","x + 10");
  System.out.println(accMethod.toString());
}
