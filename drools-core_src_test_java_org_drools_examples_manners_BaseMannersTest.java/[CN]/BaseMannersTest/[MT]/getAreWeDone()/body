{
  final Rule rule=new Rule("areWeDone");
  Column contextColumn=new Column(0,contextType,"context");
  contextColumn.addConstraint(getLiteralConstraint(contextColumn,"state",new Integer(Context.CHECK_DONE),this.integerEqualEvaluator));
  rule.addPattern(contextColumn);
  final Declaration contextDeclaration=rule.getDeclaration("context");
  Column lastSeatColumn=new Column(1,lastSeatType);
  setFieldDeclaration(lastSeatColumn,"seat","lastSeat");
  rule.addPattern(lastSeatColumn);
  final Declaration lastSeatDeclaration=rule.getDeclaration("lastSeat");
  Column seatingColumn=new Column(2,seatingType,null);
  seatingColumn.addConstraint(getBoundVariableConstraint(seatingColumn,"rightSeat",lastSeatDeclaration,integerEqualEvaluator));
  rule.addPattern(seatingColumn);
  Consequence consequence=new Consequence(){
    public void evaluate(    KnowledgeHelper drools,    WorkingMemory workingMemory) throws ConsequenceException {
      try {
        Rule rule=drools.getRule();
        Tuple tuple=drools.getTuple();
        Context context=(Context)drools.get(contextDeclaration);
        context.setState(Context.PRINT_RESULTS);
        drools.modifyObject(tuple.get(contextDeclaration),context);
        System.err.println("We Are Done!!!");
      }
 catch (      Exception e) {
        throw new ConsequenceException(e);
      }
    }
  }
;
  rule.setConsequence(consequence);
  return rule;
}
