{
  if (!org.drools.workflow.core.Node.CONNECTION_DEFAULT_TYPE.equals(type)) {
    throw new IllegalArgumentException("An ActionNode only accepts default incoming connections!");
  }
  final Join join=getJoin();
switch (join.getType()) {
case Join.TYPE_XOR:
    triggerCompleted();
  break;
case Join.TYPE_AND:
Integer count=(Integer)this.triggers.get(from.getNodeId());
if (count == null) {
this.triggers.put(from.getNodeId(),1);
}
 else {
this.triggers.put(from.getNodeId(),count.intValue() + 1);
}
if (checkAllActivated()) {
decreaseAllTriggers();
triggerCompleted();
}
break;
case Join.TYPE_DISCRIMINATOR:
boolean triggerCompleted=triggers.isEmpty();
triggers.put(from.getNodeId(),new Integer(1));
if (checkAllActivated()) {
resetAllTriggers();
}
if (triggerCompleted) {
triggerCompleted();
}
break;
default :
throw new IllegalArgumentException("Illegal join type " + join.getType());
}
}
