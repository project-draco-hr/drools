{
  StatelessSession session=getStatelessSession(this.getClass().getResourceAsStream("Notes.drl"));
  session.setAgendaFilter(new RuleNameMatchesAgendaFilter("Find redundant restrictions from pattern possibilities"));
  Pattern pattern=VerifierComponentMockFactory.createPattern1();
  Collection<Object> objects=new ArrayList<Object>();
  LiteralRestriction left=new LiteralRestriction(pattern);
  LiteralRestriction right=new LiteralRestriction(pattern);
  Redundancy redundancy=new Redundancy(left,right);
  SubPattern possibility=new SubPattern(pattern,0);
  possibility.add(left);
  possibility.add(right);
  objects.add(left);
  objects.add(right);
  objects.add(redundancy);
  objects.add(possibility);
  VerifierReport result=VerifierReportFactory.newVerifierReport();
  session.setGlobal("result",result);
  session.executeWithResults(objects);
  Collection<VerifierMessageBase> notes=result.getBySeverity(Severity.NOTE);
  assertEquals(1,notes.size());
  VerifierMessageBase note=notes.iterator().next();
  Iterator<Cause> causes=note.getCauses().iterator();
  assertEquals(left,causes.next());
  assertEquals(right,causes.next());
}
