{
  ObjectOutputStream out=null;
  try {
    final XStream xstream=new XStream();
    out=xstream.createObjectOutputStream(new FileWriter(this.fileName + (this.nbOfFile == 0 ? ".log" : this.nbOfFile + ".log"),false));
    out.writeObject(this.events);
    this.nbOfFile++;
    clear();
  }
 catch (  final FileNotFoundException exc) {
    throw new RuntimeException("Could not create the log file.  Please make sure that directory that the log file should be placed in does exist.");
  }
catch (  final Throwable t) {
    t.printStackTrace(System.err);
  }
 finally {
    if (out != null) {
      try {
        out.close();
      }
 catch (      Exception e) {
      }
    }
  }
}
