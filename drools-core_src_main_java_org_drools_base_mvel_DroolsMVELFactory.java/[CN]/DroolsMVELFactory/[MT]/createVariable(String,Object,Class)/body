{
  VariableResolver vr=getVariableResolver(name);
  if (vr != null && vr.getType() != null) {
    throw new CompileException("variable already defined within scope: " + vr.getType() + " "+ name);
  }
 else {
    addResolver(name,vr=new MapVariableResolver(variables,name,type));
    vr.setValue(value);
    return vr;
  }
}
