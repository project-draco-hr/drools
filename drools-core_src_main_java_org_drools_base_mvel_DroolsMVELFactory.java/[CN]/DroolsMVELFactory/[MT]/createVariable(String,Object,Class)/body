{
  VariableResolver vr=getVariableResolver(name);
  if (vr != null && vr.getType() != null) {
    throw new CompileException("variable already defined within scope: " + vr.getType() + " "+ name);
  }
 else {
    if (this.variables == null) {
      this.variables=new HashMap();
    }
    addResolver(name,vr=new MapVariableResolver(this.variables,name,type));
    vr.setValue(value);
    return vr;
  }
}
