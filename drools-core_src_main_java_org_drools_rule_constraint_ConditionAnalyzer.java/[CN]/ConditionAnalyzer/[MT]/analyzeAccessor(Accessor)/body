{
  AccessorNode accessorNode;
  if (accessor instanceof VariableAccessor) {
    VariableAccessor variableAccessor=(VariableAccessor)accessor;
    accessorNode=variableAccessor.getNextNode();
    if (accessorNode == null || !isStaticAccessor(accessorNode)) {
      String variableName=(String)(variableAccessor.getProperty());
      return new VariableExpression(variableName,analyzeExpressionNode(accessorNode),getVariableType(variableName));
    }
  }
  if (accessor instanceof DynamicGetAccessor) {
    accessorNode=(AccessorNode)((DynamicGetAccessor)accessor).getAccessor();
  }
 else   if (accessor instanceof AccessorNode) {
    accessorNode=(AccessorNode)accessor;
  }
 else   if (accessor instanceof CompiledExpression) {
    return analyzeNode(((CompiledExpression)accessor).getFirstNode());
  }
 else {
    throw new RuntimeException("Unknown accessor type: " + accessor);
  }
  if (accessorNode != null && accessorNode instanceof VariableAccessor) {
    if (isStaticAccessor(accessorNode)) {
      while (accessorNode != null && accessorNode instanceof VariableAccessor) {
        accessorNode=accessorNode.getNextNode();
      }
    }
 else {
      return analyzeAccessor(accessorNode);
    }
  }
  while (accessorNode instanceof StaticReferenceAccessor) {
    StaticReferenceAccessor staticReferenceAccessor=((StaticReferenceAccessor)accessorNode);
    Object literal=staticReferenceAccessor.getLiteral();
    accessorNode=accessorNode.getNextNode();
    if (accessorNode == null)     return new FixedExpression(literal.getClass(),literal);
  }
  return analyzeExpressionNode(accessorNode);
}
