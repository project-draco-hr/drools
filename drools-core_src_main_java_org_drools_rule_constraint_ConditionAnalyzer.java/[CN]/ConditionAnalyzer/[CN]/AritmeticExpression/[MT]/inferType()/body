{
  if (isStringConcat()) {
    return String.class;
  }
  if (operator.isBitwiseOperation()) {
    Class<?> type=left instanceof VariableExpression ? ((VariableExpression)left).getVariableType() : left.getType();
    return type == long.class || type == Long.class ? long.class : int.class;
  }
  if (left.getType().isPrimitive() && left.getType() == right.getType()) {
    return left.getType();
  }
  return double.class;
}
