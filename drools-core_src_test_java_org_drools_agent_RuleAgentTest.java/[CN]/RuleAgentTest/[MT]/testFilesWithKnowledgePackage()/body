{
  File dir=RuleBaseAssemblerTest.getTempDirectory();
  KnowledgePackage kpackage1=new KnowledgePackageImp(new Package("p1"));
  File p1f=new File(dir,"p1.pkg");
  RuleBaseAssemblerTest.writePackage(kpackage1,p1f);
  KnowledgePackage kpackage2=new KnowledgePackageImp(new Package("p2"));
  File p2f=new File(dir,"p2.pkg");
  RuleBaseAssemblerTest.writePackage(kpackage2,p2f);
  String path=dir.getPath() + "/" + "p1.pkg "+ dir.getPath()+ "/"+ "p2.pkg";
  Properties props=new Properties();
  props.setProperty("file",path);
  RuleAgent ag=RuleAgent.newRuleAgent(props);
  RuleBase rb=ag.getRuleBase();
  assertNotNull(rb);
  assertEquals(2,rb.getPackages().length);
  assertFalse(ag.isPolling());
  props.setProperty("poll","1");
  ag=RuleAgent.newRuleAgent(props);
  assertTrue(ag.isPolling());
  ag.stopPolling();
  assertFalse(ag.isPolling());
}
