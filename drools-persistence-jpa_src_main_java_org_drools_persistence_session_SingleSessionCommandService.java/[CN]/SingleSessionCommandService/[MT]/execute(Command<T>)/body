{
  try {
    txm.begin();
    initKsession(this.sessionInfo.getId(),this.marshallingHelper.getKbase(),this.marshallingHelper.getConf());
    this.jpm.beginCommandScopedEntityManager();
    registerRollbackSync();
    T result=((GenericCommand<T>)command).execute(this.kContext);
    txm.commit();
    return result;
  }
 catch (  Exception t1) {
    try {
      txm.rollback();
    }
 catch (    Exception t2) {
      throw new RuntimeException("Could not commit session or rollback",t2);
    }
    throw new RuntimeException("Could not commit session",t1);
  }
 finally {
    if (command instanceof DisposeCommand) {
      this.jpm.dispose();
    }
  }
}
