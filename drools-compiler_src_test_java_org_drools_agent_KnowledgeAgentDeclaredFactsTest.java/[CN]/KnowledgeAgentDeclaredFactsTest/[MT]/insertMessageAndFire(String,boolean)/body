{
  System.out.println("********** Firing rules");
  String result=null;
  FactType testFactType=kagent.getKnowledgeBase().getFactType("test","TestFact");
  Object fact=testFactType.newInstance();
  testFactType.set(fact,"message",message);
  if (stateful) {
    StatefulKnowledgeSession session=kagent.getKnowledgeBase().newStatefulKnowledgeSession();
    session.insert(fact);
    session.fireAllRules();
    result=(String)testFactType.get(fact,"message");
    session.dispose();
  }
 else {
    StatelessKnowledgeSession session=kagent.getKnowledgeBase().newStatelessKnowledgeSession();
    session.execute(fact);
    result=(String)testFactType.get(fact,"message");
  }
  return result;
}
