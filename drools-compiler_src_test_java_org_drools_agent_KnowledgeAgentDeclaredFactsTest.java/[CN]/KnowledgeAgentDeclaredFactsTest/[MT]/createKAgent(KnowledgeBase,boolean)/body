{
  ResourceChangeScannerConfiguration sconf=ResourceFactory.getResourceChangeScannerService().newResourceChangeScannerConfiguration();
  sconf.setProperty("drools.resource.scanner.interval","1");
  ResourceFactory.getResourceChangeScannerService().configure(sconf);
  KnowledgeAgentConfiguration aconf=KnowledgeAgentFactory.newKnowledgeAgentConfiguration();
  aconf.setProperty(ScanDirectoriesOption.PROPERTY_NAME,"" + ScanDirectoriesOption.YES.isScanDirectories());
  aconf.setProperty(ScanResourcesOption.PROPERTY_NAME,"" + ScanResourcesOption.YES.isScanResources());
  aconf.setProperty(NewInstanceOption.PROPERTY_NAME,"" + newInstance);
  KnowledgeAgent kagent=KnowledgeAgentFactory.newKnowledgeAgent("test agent",kbase,aconf);
  kagent.monitorResourceChangeEvents(true);
  return kagent;
}
