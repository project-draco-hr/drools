{
  KnowledgeBuilder builder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  try {
    builder.add(ResourceFactory.newInputStreamResource(Broker.class.getResourceAsStream(RULES_FILE)),ResourceType.DRL);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  KnowledgeBaseConfiguration conf=KnowledgeBaseFactory.newKnowledgeBaseConfiguration();
  conf.setProperty("drools.eventProcessingMode","stream");
  KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase(conf);
  kbase.addKnowledgePackages(builder.getKnowledgePackages());
  return kbase;
}
