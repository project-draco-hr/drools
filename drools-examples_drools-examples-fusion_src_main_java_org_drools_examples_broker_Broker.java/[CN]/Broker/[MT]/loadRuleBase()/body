{
  KnowledgeBuilder builder=KnowledgeBuilderFactory.newKnowledgeBuilder();
  try {
    for (int i=0; i < ASSET_FILES.length; i++) {
      builder.add(ResourceFactory.newInputStreamResource(Broker.class.getResourceAsStream(ASSET_FILES[i])),ResourceType.determineResourceType(ASSET_FILES[i]));
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    System.exit(0);
  }
  if (builder.hasErrors()) {
    System.err.println(builder.getErrors());
    System.exit(0);
  }
  KnowledgeBaseConfiguration conf=KnowledgeBaseFactory.newKnowledgeBaseConfiguration();
  conf.setOption(EventProcessingOption.STREAM);
  conf.setOption(MBeansOption.ENABLED);
  KnowledgeBase kbase=KnowledgeBaseFactory.newKnowledgeBase("Stock Broker",conf);
  kbase.addKnowledgePackages(builder.getKnowledgePackages());
  return kbase;
}
