{
  BlockingMessageResponseHandler responseHandler=new BlockingMessageResponseHandler();
  if (responseHandler != null) {
    addResponseHandler(msg.getResponseId(),responseHandler);
  }
  this.session.write(msg);
  Message returnMessage=responseHandler.getMessage();
  if (responseHandler.getError() != null) {
    throw responseHandler.getError();
  }
  return returnMessage;
}
