{
  final List frames=getFrames();
  if (frames.size() == 0) {
    buf.append("List frames = Collections.EMPTY_LIST;\n");
  }
 else {
    buf.append("List frames = new ArrayList();\n");
    for (int i=0; i < frames.size(); i++) {
      buf.append("{\n");
      final StackMapFrame f=(StackMapFrame)frames.get(i);
      declareLabel(buf,labelNames,f.label);
      final String frameVar=varName + "frame" + i;
      asmifyTypeInfo(buf,frameVar,labelNames,f.locals,"locals");
      asmifyTypeInfo(buf,frameVar,labelNames,f.stack,"stack");
      buf.append("StackMapFrame ").append(frameVar).append(" = new StackMapFrame(").append(labelNames.get(f.label)).append(", locals, stack);\n");
      buf.append("frames.add(").append(frameVar).append(");\n");
      buf.append("}\n");
    }
  }
  buf.append("StackMapTableAttribute ").append(varName);
  buf.append(" = new StackMapTableAttribute(frames);\n");
}
