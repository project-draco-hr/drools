{
  HierarchyEncoder encoder=new HierarchyEncoderImpl();
  encoder.encode("Thing",Collections.EMPTY_LIST);
  encoder.encode("A",Arrays.asList("Thing"));
  encoder.encode("Z",Arrays.asList("Thing"));
  encoder.encode("B",Arrays.asList("A","Z"));
  encoder.encode("C",Arrays.asList("A","Z"));
  encoder.encode("N",Arrays.asList("B","C"));
  encoder.encode("P",Arrays.asList("Thing"));
  encoder.encode("Q",Arrays.asList("Thing"));
  encoder.encode("R",Arrays.asList("Thing"));
  encoder.encode("S",Arrays.asList("R"));
  encoder.encode("T",Arrays.asList("C","Q"));
  encoder.encode("M",Arrays.asList("R","Q"));
  encoder.encode("O",Arrays.asList("M","P"));
  System.out.println(encoder);
  BitSet b;
  Collection x;
  b=parseBitSet("111");
  x=encoder.lowerDescendants(b);
  System.out.println("DESC " + x);
  assertEquals(3,x.size());
  assertTrue(x.contains("C"));
  assertTrue(x.contains("N"));
  assertTrue(x.contains("T"));
  b=parseBitSet("10");
  x=encoder.lowerDescendants(b);
  System.out.println("DESC " + x);
  assertEquals(5,x.size());
  assertTrue(x.contains("C"));
  assertTrue(x.contains("N"));
  assertTrue(x.contains("T"));
  assertTrue(x.contains("Z"));
  assertTrue(x.contains("B"));
  b=parseBitSet("100000");
  x=encoder.lowerDescendants(b);
  System.out.println("DESC " + x);
  assertEquals(4,x.size());
  assertTrue(x.contains("Q"));
  assertTrue(x.contains("T"));
  assertTrue(x.contains("M"));
  assertTrue(x.contains("O"));
  b=parseBitSet("100010");
  x=encoder.lowerDescendants(b);
  System.out.println("DESC " + x);
  assertEquals(1,x.size());
  assertTrue(x.contains("T"));
  b=parseBitSet("1111");
  x=encoder.lowerDescendants(b);
  System.out.println("DESC " + x);
  assertEquals(1,x.size());
  assertTrue(x.contains("N"));
  b=parseBitSet("1");
  x=encoder.lowerDescendants(b);
  System.out.println("DESC " + x);
  assertEquals(5,x.size());
  assertTrue(x.contains("A"));
  assertTrue(x.contains("B"));
  assertTrue(x.contains("C"));
  assertTrue(x.contains("N"));
  assertTrue(x.contains("T"));
  System.out.println(" +*******************************+ ");
  x=encoder.lowerDescendants(new BitSet());
  System.out.println("DESC " + x);
  assertEquals(13,x.size());
  assertTrue(x.contains("Z"));
  assertTrue(x.contains("Thing"));
}
