{
  final String drl="rule \"test_0\"" + "when \n" + "  Person( )\n"+ "then \n"+ "  java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat(\"dd-MMM-yyyy\");\n"+ "  Person $var0 = new Person();\n"+ "  $var0.setDateOfBirth( sdf.parse(\"15-Jul-1985\") );\n"+ "  insert( $var0 );\n"+ "end";
  final GuidedDecisionTree expected=new GuidedDecisionTree();
  expected.setTreeName("test");
  final TypeNode type=new TypeNodeImpl("Person");
  expected.setRoot(type);
  final ActionInsertNode action=new ActionInsertNodeImpl("Person");
  action.setLogicalInsertion(false);
  final Calendar dob=Calendar.getInstance();
  dob.set(Calendar.YEAR,1985);
  dob.set(Calendar.MONTH,6);
  dob.set(Calendar.DATE,15);
  dob.set(Calendar.HOUR_OF_DAY,0);
  dob.set(Calendar.MINUTE,0);
  dob.set(Calendar.SECOND,0);
  action.getFieldValues().add(new ActionFieldValueImpl("dateOfBirth",new DateValue(dob.getTime())));
  type.addChild(action);
  addModelField("Person","this","Person",DataType.TYPE_THIS);
  addModelField("Person","dateOfBirth",Date.class.getName(),DataType.TYPE_DATE);
  final GuidedDecisionTree model=GuidedDecisionTreeDRLPersistence.getInstance().unmarshal(drl,"test",dmo);
  assertNotNull(model);
  assertEquals(0,model.getParserErrors().size());
  assertEquals(expected.getTreeName(),model.getTreeName());
  assertNotNull(model.getRoot());
  assertEquals(type.getClassName(),model.getRoot().getClassName());
  assertFalse(model.getRoot().isBound());
  assertEquals(1,model.getRoot().getChildren().size());
  assertNotNull(model.getRoot().getChildren().get(0));
  assertTrue(model.getRoot().getChildren().get(0) instanceof ActionInsertNode);
  final ActionInsertNode _action=(ActionInsertNode)model.getRoot().getChildren().get(0);
  assertEquals(action.getClassName(),_action.getClassName());
  assertEquals(action.isLogicalInsertion(),_action.isLogicalInsertion());
  assertEquals(action.getFieldValues().size(),_action.getFieldValues().size());
  assertEquals(1,_action.getFieldValues().size());
  assertEquals(action.getFieldValues().get(0).getFieldName(),_action.getFieldValues().get(0).getFieldName());
  assertEquals(action.getFieldValues().get(0).getValue().getValue().toString(),_action.getFieldValues().get(0).getValue().getValue().toString());
  assertEquals(0,_action.getChildren().size());
}
