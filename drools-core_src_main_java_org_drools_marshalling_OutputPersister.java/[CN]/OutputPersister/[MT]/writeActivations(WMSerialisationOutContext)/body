{
  ObjectOutputStream stream=context.stream;
  Entry<LeftTuple,Integer>[] entries=context.terminalTupleMap.entrySet().toArray(new Entry[context.terminalTupleMap.size()]);
  Arrays.sort(entries,TupleSorter.instance);
  if (entries.length != 0) {
    for (    Entry<LeftTuple,Integer> entry : entries) {
      LeftTuple leftTuple=entry.getKey();
      stream.writeInt(PersisterEnums.ACTIVATION);
      writeActivation(context,leftTuple,(AgendaItem)leftTuple.getActivation(),(RuleTerminalNode)leftTuple.getLeftTupleSink());
    }
  }
  stream.writeInt(PersisterEnums.END);
}
