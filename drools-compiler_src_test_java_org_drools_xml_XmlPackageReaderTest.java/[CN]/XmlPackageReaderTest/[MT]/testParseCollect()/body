{
  final XmlPackageReader xmlPackageReader=new XmlPackageReader();
  xmlPackageReader.read(new InputStreamReader(getClass().getResourceAsStream("test_ParseCollect.xml")));
  final PackageDescr packageDescr=xmlPackageReader.getPackageDescr();
  assertNotNull(packageDescr);
  RuleDescr obj=(RuleDescr)packageDescr.getRules().get(0);
  Object objectCollect=obj.getLhs().getDescrs().get(0);
  assertTrue(objectCollect instanceof CollectDescr);
  CollectDescr collectDescr=(CollectDescr)objectCollect;
  PatternDescr sourcePattern=collectDescr.getResultPattern();
  PatternDescr resultPattern=collectDescr.getSourcePattern();
  assertEquals(sourcePattern.getObjectType(),"Cheese");
  assertEquals(resultPattern.getObjectType(),"Person");
  Object fieldContraintObject=resultPattern.getConstraint().getDescrs().get(0);
  assertTrue(fieldContraintObject instanceof FieldConstraintDescr);
  FieldConstraintDescr fieldconstraintdescr=(FieldConstraintDescr)fieldContraintObject;
  assertEquals(fieldconstraintdescr.getFieldName(),"hair");
  Object literal1=fieldconstraintdescr.getRestrictions().get(0);
  assertTrue(literal1 instanceof LiteralRestrictionDescr);
  LiteralRestrictionDescr literalDesc=(LiteralRestrictionDescr)literal1;
  assertEquals(literalDesc.getEvaluator(),"==");
  assertEquals(literalDesc.getText(),"pink");
  fieldContraintObject=sourcePattern.getConstraint().getDescrs().get(0);
  assertTrue(fieldContraintObject instanceof FieldConstraintDescr);
  fieldconstraintdescr=(FieldConstraintDescr)fieldContraintObject;
  assertEquals(fieldconstraintdescr.getFieldName(),"type");
  literal1=fieldconstraintdescr.getRestrictions().get(0);
  assertTrue(literal1 instanceof LiteralRestrictionDescr);
  literalDesc=(LiteralRestrictionDescr)literal1;
  assertEquals(literalDesc.getEvaluator(),"==");
  assertEquals(literalDesc.getText(),"1");
}
